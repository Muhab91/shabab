function im(o,n){for(var s=0;s<n.length;s++){const a=n[s];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in o)){const d=Object.getOwnPropertyDescriptor(a,u);d&&Object.defineProperty(o,u,d.get?d:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();function jh(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function am(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var n=o.default;if(typeof n=="function"){var s=function a(){return this instanceof a?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};s.prototype=n.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var u=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(s,a,u.get?u:{enumerable:!0,get:function(){return o[a]}})}),s}var Jl={exports:{}},fs={},Ql={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad;function lm(){if(Ad)return pe;Ad=1;var o=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),y=Symbol.iterator;function b(v){return v===null||typeof v!="object"?null:(v=y&&v[y]||v["@@iterator"],typeof v=="function"?v:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function A(v,P,J){this.props=v,this.context=P,this.refs=T,this.updater=J||C}A.prototype.isReactComponent={},A.prototype.setState=function(v,P){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,P,"setState")},A.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function K(){}K.prototype=A.prototype;function B(v,P,J){this.props=v,this.context=P,this.refs=T,this.updater=J||C}var $=B.prototype=new K;$.constructor=B,S($,A.prototype),$.isPureReactComponent=!0;var I=Array.isArray,W=Object.prototype.hasOwnProperty,H={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function ae(v,P,J){var Q,ce={},me=null,we=null;if(P!=null)for(Q in P.ref!==void 0&&(we=P.ref),P.key!==void 0&&(me=""+P.key),P)W.call(P,Q)&&!Y.hasOwnProperty(Q)&&(ce[Q]=P[Q]);var _e=arguments.length-2;if(_e===1)ce.children=J;else if(1<_e){for(var Te=Array(_e),ut=0;ut<_e;ut++)Te[ut]=arguments[ut+2];ce.children=Te}if(v&&v.defaultProps)for(Q in _e=v.defaultProps,_e)ce[Q]===void 0&&(ce[Q]=_e[Q]);return{$$typeof:o,type:v,key:me,ref:we,props:ce,_owner:H.current}}function Ne(v,P){return{$$typeof:o,type:v.type,key:P,ref:v.ref,props:v.props,_owner:v._owner}}function je(v){return typeof v=="object"&&v!==null&&v.$$typeof===o}function Re(v){var P={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(J){return P[J]})}var z=/\/+/g;function ie(v,P){return typeof v=="object"&&v!==null&&v.key!=null?Re(""+v.key):P.toString(36)}function le(v,P,J,Q,ce){var me=typeof v;(me==="undefined"||me==="boolean")&&(v=null);var we=!1;if(v===null)we=!0;else switch(me){case"string":case"number":we=!0;break;case"object":switch(v.$$typeof){case o:case n:we=!0}}if(we)return we=v,ce=ce(we),v=Q===""?"."+ie(we,0):Q,I(ce)?(J="",v!=null&&(J=v.replace(z,"$&/")+"/"),le(ce,P,J,"",function(ut){return ut})):ce!=null&&(je(ce)&&(ce=Ne(ce,J+(!ce.key||we&&we.key===ce.key?"":(""+ce.key).replace(z,"$&/")+"/")+v)),P.push(ce)),1;if(we=0,Q=Q===""?".":Q+":",I(v))for(var _e=0;_e<v.length;_e++){me=v[_e];var Te=Q+ie(me,_e);we+=le(me,P,J,Te,ce)}else if(Te=b(v),typeof Te=="function")for(v=Te.call(v),_e=0;!(me=v.next()).done;)me=me.value,Te=Q+ie(me,_e++),we+=le(me,P,J,Te,ce);else if(me==="object")throw P=String(v),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return we}function D(v,P,J){if(v==null)return v;var Q=[],ce=0;return le(v,Q,"","",function(me){return P.call(J,me,ce++)}),Q}function ne(v){if(v._status===-1){var P=v._result;P=P(),P.then(function(J){(v._status===0||v._status===-1)&&(v._status=1,v._result=J)},function(J){(v._status===0||v._status===-1)&&(v._status=2,v._result=J)}),v._status===-1&&(v._status=0,v._result=P)}if(v._status===1)return v._result.default;throw v._result}var ee={current:null},V={transition:null},se={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:V,ReactCurrentOwner:H};function N(){throw Error("act(...) is not supported in production builds of React.")}return pe.Children={map:D,forEach:function(v,P,J){D(v,function(){P.apply(this,arguments)},J)},count:function(v){var P=0;return D(v,function(){P++}),P},toArray:function(v){return D(v,function(P){return P})||[]},only:function(v){if(!je(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},pe.Component=A,pe.Fragment=s,pe.Profiler=u,pe.PureComponent=B,pe.StrictMode=a,pe.Suspense=g,pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,pe.act=N,pe.cloneElement=function(v,P,J){if(v==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+v+".");var Q=S({},v.props),ce=v.key,me=v.ref,we=v._owner;if(P!=null){if(P.ref!==void 0&&(me=P.ref,we=H.current),P.key!==void 0&&(ce=""+P.key),v.type&&v.type.defaultProps)var _e=v.type.defaultProps;for(Te in P)W.call(P,Te)&&!Y.hasOwnProperty(Te)&&(Q[Te]=P[Te]===void 0&&_e!==void 0?_e[Te]:P[Te])}var Te=arguments.length-2;if(Te===1)Q.children=J;else if(1<Te){_e=Array(Te);for(var ut=0;ut<Te;ut++)_e[ut]=arguments[ut+2];Q.children=_e}return{$$typeof:o,type:v.type,key:ce,ref:me,props:Q,_owner:we}},pe.createContext=function(v){return v={$$typeof:f,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},v.Provider={$$typeof:d,_context:v},v.Consumer=v},pe.createElement=ae,pe.createFactory=function(v){var P=ae.bind(null,v);return P.type=v,P},pe.createRef=function(){return{current:null}},pe.forwardRef=function(v){return{$$typeof:p,render:v}},pe.isValidElement=je,pe.lazy=function(v){return{$$typeof:w,_payload:{_status:-1,_result:v},_init:ne}},pe.memo=function(v,P){return{$$typeof:x,type:v,compare:P===void 0?null:P}},pe.startTransition=function(v){var P=V.transition;V.transition={};try{v()}finally{V.transition=P}},pe.unstable_act=N,pe.useCallback=function(v,P){return ee.current.useCallback(v,P)},pe.useContext=function(v){return ee.current.useContext(v)},pe.useDebugValue=function(){},pe.useDeferredValue=function(v){return ee.current.useDeferredValue(v)},pe.useEffect=function(v,P){return ee.current.useEffect(v,P)},pe.useId=function(){return ee.current.useId()},pe.useImperativeHandle=function(v,P,J){return ee.current.useImperativeHandle(v,P,J)},pe.useInsertionEffect=function(v,P){return ee.current.useInsertionEffect(v,P)},pe.useLayoutEffect=function(v,P){return ee.current.useLayoutEffect(v,P)},pe.useMemo=function(v,P){return ee.current.useMemo(v,P)},pe.useReducer=function(v,P,J){return ee.current.useReducer(v,P,J)},pe.useRef=function(v){return ee.current.useRef(v)},pe.useState=function(v){return ee.current.useState(v)},pe.useSyncExternalStore=function(v,P,J){return ee.current.useSyncExternalStore(v,P,J)},pe.useTransition=function(){return ee.current.useTransition()},pe.version="18.3.1",pe}var Ld;function No(){return Ld||(Ld=1,Ql.exports=lm()),Ql.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id;function om(){if(Id)return fs;Id=1;var o=No(),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,x){var w,y={},b=null,C=null;x!==void 0&&(b=""+x),g.key!==void 0&&(b=""+g.key),g.ref!==void 0&&(C=g.ref);for(w in g)a.call(g,w)&&!d.hasOwnProperty(w)&&(y[w]=g[w]);if(p&&p.defaultProps)for(w in g=p.defaultProps,g)y[w]===void 0&&(y[w]=g[w]);return{$$typeof:n,type:p,key:b,ref:C,props:y,_owner:u.current}}return fs.Fragment=s,fs.jsx=f,fs.jsxs=f,fs}var zd;function um(){return zd||(zd=1,Jl.exports=om()),Jl.exports}var l=um(),L=No();const kh=jh(L),cm=im({__proto__:null,default:kh},[L]);var zi={},Gl={exports:{}},ot={},Yl={exports:{}},Xl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $d;function dm(){return $d||($d=1,function(o){function n(V,se){var N=V.length;V.push(se);e:for(;0<N;){var v=N-1>>>1,P=V[v];if(0<u(P,se))V[v]=se,V[N]=P,N=v;else break e}}function s(V){return V.length===0?null:V[0]}function a(V){if(V.length===0)return null;var se=V[0],N=V.pop();if(N!==se){V[0]=N;e:for(var v=0,P=V.length,J=P>>>1;v<J;){var Q=2*(v+1)-1,ce=V[Q],me=Q+1,we=V[me];if(0>u(ce,N))me<P&&0>u(we,ce)?(V[v]=we,V[me]=N,v=me):(V[v]=ce,V[Q]=N,v=Q);else if(me<P&&0>u(we,N))V[v]=we,V[me]=N,v=me;else break e}}return se}function u(V,se){var N=V.sortIndex-se.sortIndex;return N!==0?N:V.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;o.unstable_now=function(){return d.now()}}else{var f=Date,p=f.now();o.unstable_now=function(){return f.now()-p}}var g=[],x=[],w=1,y=null,b=3,C=!1,S=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(V){for(var se=s(x);se!==null;){if(se.callback===null)a(x);else if(se.startTime<=V)a(x),se.sortIndex=se.expirationTime,n(g,se);else break;se=s(x)}}function I(V){if(T=!1,$(V),!S)if(s(g)!==null)S=!0,ne(W);else{var se=s(x);se!==null&&ee(I,se.startTime-V)}}function W(V,se){S=!1,T&&(T=!1,K(ae),ae=-1),C=!0;var N=b;try{for($(se),y=s(g);y!==null&&(!(y.expirationTime>se)||V&&!Re());){var v=y.callback;if(typeof v=="function"){y.callback=null,b=y.priorityLevel;var P=v(y.expirationTime<=se);se=o.unstable_now(),typeof P=="function"?y.callback=P:y===s(g)&&a(g),$(se)}else a(g);y=s(g)}if(y!==null)var J=!0;else{var Q=s(x);Q!==null&&ee(I,Q.startTime-se),J=!1}return J}finally{y=null,b=N,C=!1}}var H=!1,Y=null,ae=-1,Ne=5,je=-1;function Re(){return!(o.unstable_now()-je<Ne)}function z(){if(Y!==null){var V=o.unstable_now();je=V;var se=!0;try{se=Y(!0,V)}finally{se?ie():(H=!1,Y=null)}}else H=!1}var ie;if(typeof B=="function")ie=function(){B(z)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,D=le.port2;le.port1.onmessage=z,ie=function(){D.postMessage(null)}}else ie=function(){A(z,0)};function ne(V){Y=V,H||(H=!0,ie())}function ee(V,se){ae=A(function(){V(o.unstable_now())},se)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(V){V.callback=null},o.unstable_continueExecution=function(){S||C||(S=!0,ne(W))},o.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<V?Math.floor(1e3/V):5},o.unstable_getCurrentPriorityLevel=function(){return b},o.unstable_getFirstCallbackNode=function(){return s(g)},o.unstable_next=function(V){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var N=b;b=se;try{return V()}finally{b=N}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(V,se){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var N=b;b=V;try{return se()}finally{b=N}},o.unstable_scheduleCallback=function(V,se,N){var v=o.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?v+N:v):N=v,V){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=N+P,V={id:w++,callback:se,priorityLevel:V,startTime:N,expirationTime:P,sortIndex:-1},N>v?(V.sortIndex=N,n(x,V),s(g)===null&&V===s(x)&&(T?(K(ae),ae=-1):T=!0,ee(I,N-v))):(V.sortIndex=P,n(g,V),S||C||(S=!0,ne(W))),V},o.unstable_shouldYield=Re,o.unstable_wrapCallback=function(V){var se=b;return function(){var N=b;b=se;try{return V.apply(this,arguments)}finally{b=N}}}}(Xl)),Xl}var Ud;function hm(){return Ud||(Ud=1,Yl.exports=dm()),Yl.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Md;function fm(){if(Md)return ot;Md=1;var o=No(),n=hm();function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function d(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},y={};function b(e){return g.call(y,e)?!0:g.call(w,e)?!1:x.test(e)?y[e]=!0:(w[e]=!0,!1)}function C(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S(e,t,r,i){if(t===null||typeof t>"u"||C(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function T(e,t,r,i,c,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){A[e]=new T(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];A[t]=new T(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){A[e]=new T(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){A[e]=new T(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){A[e]=new T(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){A[e]=new T(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){A[e]=new T(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){A[e]=new T(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){A[e]=new T(e,5,!1,e.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function B(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(K,B);A[t]=new T(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(K,B);A[t]=new T(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(K,B);A[t]=new T(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){A[e]=new T(e,1,!1,e.toLowerCase(),null,!1,!1)}),A.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){A[e]=new T(e,1,!1,e.toLowerCase(),null,!0,!0)});function $(e,t,r,i){var c=A.hasOwnProperty(t)?A[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S(t,r,c,i)&&(r=null),i||c===null?b(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,i=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var I=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),H=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),ae=Symbol.for("react.strict_mode"),Ne=Symbol.for("react.profiler"),je=Symbol.for("react.provider"),Re=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),V=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var N=Object.assign,v;function P(e){if(v===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);v=t&&t[1]||""}return`
`+v+e}var J=!1;function Q(e,t){if(!e||J)return"";J=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(O){var i=O}Reflect.construct(e,[],t)}else{try{t.call()}catch(O){i=O}e.call(t.prototype)}else{try{throw Error()}catch(O){i=O}e()}}catch(O){if(O&&i&&typeof O.stack=="string"){for(var c=O.stack.split(`
`),h=i.stack.split(`
`),m=c.length-1,_=h.length-1;1<=m&&0<=_&&c[m]!==h[_];)_--;for(;1<=m&&0<=_;m--,_--)if(c[m]!==h[_]){if(m!==1||_!==1)do if(m--,_--,0>_||c[m]!==h[_]){var j=`
`+c[m].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=m&&0<=_);break}}}finally{J=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?P(e):""}function ce(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=Q(e.type,!1),e;case 11:return e=Q(e.type.render,!1),e;case 1:return e=Q(e.type,!0),e;default:return""}}function me(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Y:return"Fragment";case H:return"Portal";case Ne:return"Profiler";case ae:return"StrictMode";case ie:return"Suspense";case le:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Re:return(e.displayName||"Context")+".Consumer";case je:return(e._context.displayName||"Context")+".Provider";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case ne:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}function we(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(t);case 8:return t===ae?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _e(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Te(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ut(e){var t=Te(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){i=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Es(e){e._valueTracker||(e._valueTracker=ut(e))}function Mo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Te(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Cs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ta(e,t){var r=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Bo(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=_e(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fo(e,t){t=t.checked,t!=null&&$(e,"checked",t,!1)}function ra(e,t){Fo(e,t);var r=_e(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?na(e,t.type,r):t.hasOwnProperty("defaultValue")&&na(e,t.type,_e(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wo(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function na(e,t,r){(t!=="number"||Cs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Cn=Array.isArray;function Mr(e,t,r,i){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&i&&(e[r].defaultSelected=!0)}else{for(r=""+_e(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function sa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(s(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vo(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(s(92));if(Cn(r)){if(1<r.length)throw Error(s(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_e(r)}}function qo(e,t){var r=_e(t.value),i=_e(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function Ho(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ko(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ia(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ko(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ts,Jo=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ts=Ts||document.createElement("div"),Ts.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ts.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Pn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uf=["Webkit","ms","Moz","O"];Object.keys(Pn).forEach(function(e){uf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pn[t]=Pn[e]})});function Qo(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Pn.hasOwnProperty(e)&&Pn[e]?(""+t).trim():t+"px"}function Go(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,c=Qo(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,c):e[r]=c}}var cf=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aa(e,t){if(t){if(cf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(s(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(s(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(t.style!=null&&typeof t.style!="object")throw Error(s(62))}}function la(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oa=null;function ua(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ca=null,Br=null,Fr=null;function Yo(e){if(e=Xn(e)){if(typeof ca!="function")throw Error(s(280));var t=e.stateNode;t&&(t=Xs(t),ca(e.stateNode,e.type,t))}}function Xo(e){Br?Fr?Fr.push(e):Fr=[e]:Br=e}function Zo(){if(Br){var e=Br,t=Fr;if(Fr=Br=null,Yo(e),t)for(e=0;e<t.length;e++)Yo(t[e])}}function eu(e,t){return e(t)}function tu(){}var da=!1;function ru(e,t,r){if(da)return e(t,r);da=!0;try{return eu(e,t,r)}finally{da=!1,(Br!==null||Fr!==null)&&(tu(),Zo())}}function Rn(e,t){var r=e.stateNode;if(r===null)return null;var i=Xs(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(s(231,t,typeof r));return r}var ha=!1;if(p)try{var On={};Object.defineProperty(On,"passive",{get:function(){ha=!0}}),window.addEventListener("test",On,On),window.removeEventListener("test",On,On)}catch{ha=!1}function df(e,t,r,i,c,h,m,_,j){var O=Array.prototype.slice.call(arguments,3);try{t.apply(r,O)}catch(M){this.onError(M)}}var Dn=!1,Ps=null,Rs=!1,fa=null,hf={onError:function(e){Dn=!0,Ps=e}};function ff(e,t,r,i,c,h,m,_,j){Dn=!1,Ps=null,df.apply(hf,arguments)}function pf(e,t,r,i,c,h,m,_,j){if(ff.apply(this,arguments),Dn){if(Dn){var O=Ps;Dn=!1,Ps=null}else throw Error(s(198));Rs||(Rs=!0,fa=O)}}function xr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function nu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function su(e){if(xr(e)!==e)throw Error(s(188))}function mf(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(s(188));return t!==e?null:e}for(var r=e,i=t;;){var c=r.return;if(c===null)break;var h=c.alternate;if(h===null){if(i=c.return,i!==null){r=i;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===r)return su(c),e;if(h===i)return su(c),t;h=h.sibling}throw Error(s(188))}if(r.return!==i.return)r=c,i=h;else{for(var m=!1,_=c.child;_;){if(_===r){m=!0,r=c,i=h;break}if(_===i){m=!0,i=c,r=h;break}_=_.sibling}if(!m){for(_=h.child;_;){if(_===r){m=!0,r=h,i=c;break}if(_===i){m=!0,i=h,r=c;break}_=_.sibling}if(!m)throw Error(s(189))}}if(r.alternate!==i)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?e:t}function iu(e){return e=mf(e),e!==null?au(e):null}function au(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=au(e);if(t!==null)return t;e=e.sibling}return null}var lu=n.unstable_scheduleCallback,ou=n.unstable_cancelCallback,gf=n.unstable_shouldYield,vf=n.unstable_requestPaint,Le=n.unstable_now,yf=n.unstable_getCurrentPriorityLevel,pa=n.unstable_ImmediatePriority,uu=n.unstable_UserBlockingPriority,Os=n.unstable_NormalPriority,xf=n.unstable_LowPriority,cu=n.unstable_IdlePriority,Ds=null,Rt=null;function wf(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Ds,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:jf,_f=Math.log,bf=Math.LN2;function jf(e){return e>>>=0,e===0?32:31-(_f(e)/bf|0)|0}var As=64,Ls=4194304;function An(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Is(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,c=e.suspendedLanes,h=e.pingedLanes,m=r&268435455;if(m!==0){var _=m&~c;_!==0?i=An(_):(h&=m,h!==0&&(i=An(h)))}else m=r&~c,m!==0?i=An(m):h!==0&&(i=An(h));if(i===0)return 0;if(t!==0&&t!==i&&(t&c)===0&&(c=i&-i,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if((i&4)!==0&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-_t(t),c=1<<r,i|=e[r],t&=~c;return i}function kf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sf(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-_t(h),_=1<<m,j=c[m];j===-1?((_&r)===0||(_&i)!==0)&&(c[m]=kf(_,t)):j<=t&&(e.expiredLanes|=_),h&=~_}}function ma(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function du(){var e=As;return As<<=1,(As&4194240)===0&&(As=64),e}function ga(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ln(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=r}function Nf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-_t(r),h=1<<c;t[c]=0,i[c]=-1,e[c]=-1,r&=~h}}function va(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-_t(r),c=1<<i;c&t|e[i]&t&&(e[i]|=t),r&=~c}}var be=0;function hu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var fu,ya,pu,mu,gu,xa=!1,zs=[],Jt=null,Qt=null,Gt=null,In=new Map,zn=new Map,Yt=[],Ef="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(e,t){switch(e){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Qt=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":In.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zn.delete(t.pointerId)}}function $n(e,t,r,i,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Xn(t),t!==null&&ya(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Cf(e,t,r,i,c){switch(t){case"focusin":return Jt=$n(Jt,e,t,r,i,c),!0;case"dragenter":return Qt=$n(Qt,e,t,r,i,c),!0;case"mouseover":return Gt=$n(Gt,e,t,r,i,c),!0;case"pointerover":var h=c.pointerId;return In.set(h,$n(In.get(h)||null,e,t,r,i,c)),!0;case"gotpointercapture":return h=c.pointerId,zn.set(h,$n(zn.get(h)||null,e,t,r,i,c)),!0}return!1}function yu(e){var t=wr(e.target);if(t!==null){var r=xr(t);if(r!==null){if(t=r.tag,t===13){if(t=nu(r),t!==null){e.blockedOn=t,gu(e.priority,function(){pu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $s(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=_a(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);oa=i,r.target.dispatchEvent(i),oa=null}else return t=Xn(r),t!==null&&ya(t),e.blockedOn=r,!1;t.shift()}return!0}function xu(e,t,r){$s(e)&&r.delete(t)}function Tf(){xa=!1,Jt!==null&&$s(Jt)&&(Jt=null),Qt!==null&&$s(Qt)&&(Qt=null),Gt!==null&&$s(Gt)&&(Gt=null),In.forEach(xu),zn.forEach(xu)}function Un(e,t){e.blockedOn===t&&(e.blockedOn=null,xa||(xa=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Tf)))}function Mn(e){function t(c){return Un(c,e)}if(0<zs.length){Un(zs[0],e);for(var r=1;r<zs.length;r++){var i=zs[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Jt!==null&&Un(Jt,e),Qt!==null&&Un(Qt,e),Gt!==null&&Un(Gt,e),In.forEach(t),zn.forEach(t),r=0;r<Yt.length;r++)i=Yt[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Yt.length&&(r=Yt[0],r.blockedOn===null);)yu(r),r.blockedOn===null&&Yt.shift()}var Wr=I.ReactCurrentBatchConfig,Us=!0;function Pf(e,t,r,i){var c=be,h=Wr.transition;Wr.transition=null;try{be=1,wa(e,t,r,i)}finally{be=c,Wr.transition=h}}function Rf(e,t,r,i){var c=be,h=Wr.transition;Wr.transition=null;try{be=4,wa(e,t,r,i)}finally{be=c,Wr.transition=h}}function wa(e,t,r,i){if(Us){var c=_a(e,t,r,i);if(c===null)$a(e,t,i,Ms,r),vu(e,i);else if(Cf(c,e,t,r,i))i.stopPropagation();else if(vu(e,i),t&4&&-1<Ef.indexOf(e)){for(;c!==null;){var h=Xn(c);if(h!==null&&fu(h),h=_a(e,t,r,i),h===null&&$a(e,t,i,Ms,r),h===c)break;c=h}c!==null&&i.stopPropagation()}else $a(e,t,i,null,r)}}var Ms=null;function _a(e,t,r,i){if(Ms=null,e=ua(i),e=wr(e),e!==null)if(t=xr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=nu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ms=e,null}function wu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yf()){case pa:return 1;case uu:return 4;case Os:case xf:return 16;case cu:return 536870912;default:return 16}default:return 16}}var Xt=null,ba=null,Bs=null;function _u(){if(Bs)return Bs;var e,t=ba,r=t.length,i,c="value"in Xt?Xt.value:Xt.textContent,h=c.length;for(e=0;e<r&&t[e]===c[e];e++);var m=r-e;for(i=1;i<=m&&t[r-i]===c[h-i];i++);return Bs=c.slice(e,1<i?1-i:void 0)}function Fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function bu(){return!1}function ct(e){function t(r,i,c,h,m){this._reactName=r,this._targetInst=c,this.type=i,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(r=e[_],this[_]=r?r(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Ws:bu,this.isPropagationStopped=bu,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=ct(Vr),Bn=N({},Vr,{view:0,detail:0}),Of=ct(Bn),ka,Sa,Fn,Vs=N({},Bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ea,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fn&&(Fn&&e.type==="mousemove"?(ka=e.screenX-Fn.screenX,Sa=e.screenY-Fn.screenY):Sa=ka=0,Fn=e),ka)},movementY:function(e){return"movementY"in e?e.movementY:Sa}}),ju=ct(Vs),Df=N({},Vs,{dataTransfer:0}),Af=ct(Df),Lf=N({},Bn,{relatedTarget:0}),Na=ct(Lf),If=N({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),zf=ct(If),$f=N({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uf=ct($f),Mf=N({},Vr,{data:0}),ku=ct(Mf),Bf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ff={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wf[e])?!!t[e]:!1}function Ea(){return Vf}var qf=N({},Bn,{key:function(e){if(e.key){var t=Bf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ff[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ea,charCode:function(e){return e.type==="keypress"?Fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hf=ct(qf),Kf=N({},Vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=ct(Kf),Jf=N({},Bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ea}),Qf=ct(Jf),Gf=N({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yf=ct(Gf),Xf=N({},Vs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zf=ct(Xf),ep=[9,13,27,32],Ca=p&&"CompositionEvent"in window,Wn=null;p&&"documentMode"in document&&(Wn=document.documentMode);var tp=p&&"TextEvent"in window&&!Wn,Nu=p&&(!Ca||Wn&&8<Wn&&11>=Wn),Eu=" ",Cu=!1;function Tu(e,t){switch(e){case"keyup":return ep.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qr=!1;function rp(e,t){switch(e){case"compositionend":return Pu(t);case"keypress":return t.which!==32?null:(Cu=!0,Eu);case"textInput":return e=t.data,e===Eu&&Cu?null:e;default:return null}}function np(e,t){if(qr)return e==="compositionend"||!Ca&&Tu(e,t)?(e=_u(),Bs=ba=Xt=null,qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nu&&t.locale!=="ko"?null:t.data;default:return null}}var sp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ru(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sp[e.type]:t==="textarea"}function Ou(e,t,r,i){Xo(i),t=Qs(t,"onChange"),0<t.length&&(r=new ja("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Vn=null,qn=null;function ip(e){Gu(e,0)}function qs(e){var t=Gr(e);if(Mo(t))return e}function ap(e,t){if(e==="change")return t}var Du=!1;if(p){var Ta;if(p){var Pa="oninput"in document;if(!Pa){var Au=document.createElement("div");Au.setAttribute("oninput","return;"),Pa=typeof Au.oninput=="function"}Ta=Pa}else Ta=!1;Du=Ta&&(!document.documentMode||9<document.documentMode)}function Lu(){Vn&&(Vn.detachEvent("onpropertychange",Iu),qn=Vn=null)}function Iu(e){if(e.propertyName==="value"&&qs(qn)){var t=[];Ou(t,qn,e,ua(e)),ru(ip,t)}}function lp(e,t,r){e==="focusin"?(Lu(),Vn=t,qn=r,Vn.attachEvent("onpropertychange",Iu)):e==="focusout"&&Lu()}function op(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qs(qn)}function up(e,t){if(e==="click")return qs(t)}function cp(e,t){if(e==="input"||e==="change")return qs(t)}function dp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:dp;function Hn(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var c=r[i];if(!g.call(t,c)||!bt(e[c],t[c]))return!1}return!0}function zu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $u(e,t){var r=zu(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zu(r)}}function Uu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mu(){for(var e=window,t=Cs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cs(e.document)}return t}function Ra(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hp(e){var t=Mu(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Uu(r.ownerDocument.documentElement,r)){if(i!==null&&Ra(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,h=Math.min(i.start,c);i=i.end===void 0?h:Math.min(i.end,c),!e.extend&&h>i&&(c=i,i=h,h=c),c=$u(r,h);var m=$u(r,i);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fp=p&&"documentMode"in document&&11>=document.documentMode,Hr=null,Oa=null,Kn=null,Da=!1;function Bu(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Da||Hr==null||Hr!==Cs(i)||(i=Hr,"selectionStart"in i&&Ra(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Kn&&Hn(Kn,i)||(Kn=i,i=Qs(Oa,"onSelect"),0<i.length&&(t=new ja("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Hr)))}function Hs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Kr={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionend:Hs("Transition","TransitionEnd")},Aa={},Fu={};p&&(Fu=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function Ks(e){if(Aa[e])return Aa[e];if(!Kr[e])return e;var t=Kr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Fu)return Aa[e]=t[r];return e}var Wu=Ks("animationend"),Vu=Ks("animationiteration"),qu=Ks("animationstart"),Hu=Ks("transitionend"),Ku=new Map,Ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(e,t){Ku.set(e,t),d(t,[e])}for(var La=0;La<Ju.length;La++){var Ia=Ju[La],pp=Ia.toLowerCase(),mp=Ia[0].toUpperCase()+Ia.slice(1);Zt(pp,"on"+mp)}Zt(Wu,"onAnimationEnd"),Zt(Vu,"onAnimationIteration"),Zt(qu,"onAnimationStart"),Zt("dblclick","onDoubleClick"),Zt("focusin","onFocus"),Zt("focusout","onBlur"),Zt(Hu,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jn));function Qu(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,pf(i,t,void 0,e),e.currentTarget=null}function Gu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],c=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var m=i.length-1;0<=m;m--){var _=i[m],j=_.instance,O=_.currentTarget;if(_=_.listener,j!==h&&c.isPropagationStopped())break e;Qu(c,_,O),h=j}else for(m=0;m<i.length;m++){if(_=i[m],j=_.instance,O=_.currentTarget,_=_.listener,j!==h&&c.isPropagationStopped())break e;Qu(c,_,O),h=j}}}if(Rs)throw e=fa,Rs=!1,fa=null,e}function Ee(e,t){var r=t[Va];r===void 0&&(r=t[Va]=new Set);var i=e+"__bubble";r.has(i)||(Yu(t,e,2,!1),r.add(i))}function za(e,t,r){var i=0;t&&(i|=4),Yu(r,e,i,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function Qn(e){if(!e[Js]){e[Js]=!0,a.forEach(function(r){r!=="selectionchange"&&(gp.has(r)||za(r,!1,e),za(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,za("selectionchange",!1,t))}}function Yu(e,t,r,i){switch(wu(t)){case 1:var c=Pf;break;case 4:c=Rf;break;default:c=wa}r=c.bind(null,t,r,e),c=void 0,!ha||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function $a(e,t,r,i,c){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var _=i.stateNode.containerInfo;if(_===c||_.nodeType===8&&_.parentNode===c)break;if(m===4)for(m=i.return;m!==null;){var j=m.tag;if((j===3||j===4)&&(j=m.stateNode.containerInfo,j===c||j.nodeType===8&&j.parentNode===c))return;m=m.return}for(;_!==null;){if(m=wr(_),m===null)return;if(j=m.tag,j===5||j===6){i=h=m;continue e}_=_.parentNode}}i=i.return}ru(function(){var O=h,M=ua(r),F=[];e:{var U=Ku.get(e);if(U!==void 0){var G=ja,Z=e;switch(e){case"keypress":if(Fs(r)===0)break e;case"keydown":case"keyup":G=Hf;break;case"focusin":Z="focus",G=Na;break;case"focusout":Z="blur",G=Na;break;case"beforeblur":case"afterblur":G=Na;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Qf;break;case Wu:case Vu:case qu:G=zf;break;case Hu:G=Yf;break;case"scroll":G=Of;break;case"wheel":G=Zf;break;case"copy":case"cut":case"paste":G=Uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Su}var te=(t&4)!==0,Ie=!te&&e==="scroll",E=te?U!==null?U+"Capture":null:U;te=[];for(var k=O,R;k!==null;){R=k;var q=R.stateNode;if(R.tag===5&&q!==null&&(R=q,E!==null&&(q=Rn(k,E),q!=null&&te.push(Gn(k,q,R)))),Ie)break;k=k.return}0<te.length&&(U=new G(U,Z,null,r,M),F.push({event:U,listeners:te}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",U&&r!==oa&&(Z=r.relatedTarget||r.fromElement)&&(wr(Z)||Z[zt]))break e;if((G||U)&&(U=M.window===M?M:(U=M.ownerDocument)?U.defaultView||U.parentWindow:window,G?(Z=r.relatedTarget||r.toElement,G=O,Z=Z?wr(Z):null,Z!==null&&(Ie=xr(Z),Z!==Ie||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(G=null,Z=O),G!==Z)){if(te=ju,q="onMouseLeave",E="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(te=Su,q="onPointerLeave",E="onPointerEnter",k="pointer"),Ie=G==null?U:Gr(G),R=Z==null?U:Gr(Z),U=new te(q,k+"leave",G,r,M),U.target=Ie,U.relatedTarget=R,q=null,wr(M)===O&&(te=new te(E,k+"enter",Z,r,M),te.target=R,te.relatedTarget=Ie,q=te),Ie=q,G&&Z)t:{for(te=G,E=Z,k=0,R=te;R;R=Jr(R))k++;for(R=0,q=E;q;q=Jr(q))R++;for(;0<k-R;)te=Jr(te),k--;for(;0<R-k;)E=Jr(E),R--;for(;k--;){if(te===E||E!==null&&te===E.alternate)break t;te=Jr(te),E=Jr(E)}te=null}else te=null;G!==null&&Xu(F,U,G,te,!1),Z!==null&&Ie!==null&&Xu(F,Ie,Z,te,!0)}}e:{if(U=O?Gr(O):window,G=U.nodeName&&U.nodeName.toLowerCase(),G==="select"||G==="input"&&U.type==="file")var re=ap;else if(Ru(U))if(Du)re=cp;else{re=op;var oe=lp}else(G=U.nodeName)&&G.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(re=up);if(re&&(re=re(e,O))){Ou(F,re,r,M);break e}oe&&oe(e,U,O),e==="focusout"&&(oe=U._wrapperState)&&oe.controlled&&U.type==="number"&&na(U,"number",U.value)}switch(oe=O?Gr(O):window,e){case"focusin":(Ru(oe)||oe.contentEditable==="true")&&(Hr=oe,Oa=O,Kn=null);break;case"focusout":Kn=Oa=Hr=null;break;case"mousedown":Da=!0;break;case"contextmenu":case"mouseup":case"dragend":Da=!1,Bu(F,r,M);break;case"selectionchange":if(fp)break;case"keydown":case"keyup":Bu(F,r,M)}var ue;if(Ca)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else qr?Tu(e,r)&&(de="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(de="onCompositionStart");de&&(Nu&&r.locale!=="ko"&&(qr||de!=="onCompositionStart"?de==="onCompositionEnd"&&qr&&(ue=_u()):(Xt=M,ba="value"in Xt?Xt.value:Xt.textContent,qr=!0)),oe=Qs(O,de),0<oe.length&&(de=new ku(de,e,null,r,M),F.push({event:de,listeners:oe}),ue?de.data=ue:(ue=Pu(r),ue!==null&&(de.data=ue)))),(ue=tp?rp(e,r):np(e,r))&&(O=Qs(O,"onBeforeInput"),0<O.length&&(M=new ku("onBeforeInput","beforeinput",null,r,M),F.push({event:M,listeners:O}),M.data=ue))}Gu(F,t)})}function Gn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qs(e,t){for(var r=t+"Capture",i=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=Rn(e,r),h!=null&&i.unshift(Gn(e,h,c)),h=Rn(e,t),h!=null&&i.push(Gn(e,h,c))),e=e.return}return i}function Jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xu(e,t,r,i,c){for(var h=t._reactName,m=[];r!==null&&r!==i;){var _=r,j=_.alternate,O=_.stateNode;if(j!==null&&j===i)break;_.tag===5&&O!==null&&(_=O,c?(j=Rn(r,h),j!=null&&m.unshift(Gn(r,j,_))):c||(j=Rn(r,h),j!=null&&m.push(Gn(r,j,_)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var vp=/\r\n?/g,yp=/\u0000|\uFFFD/g;function Zu(e){return(typeof e=="string"?e:""+e).replace(vp,`
`).replace(yp,"")}function Gs(e,t,r){if(t=Zu(t),Zu(e)!==t&&r)throw Error(s(425))}function Ys(){}var Ua=null,Ma=null;function Ba(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fa=typeof setTimeout=="function"?setTimeout:void 0,xp=typeof clearTimeout=="function"?clearTimeout:void 0,ec=typeof Promise=="function"?Promise:void 0,wp=typeof queueMicrotask=="function"?queueMicrotask:typeof ec<"u"?function(e){return ec.resolve(null).then(e).catch(_p)}:Fa;function _p(e){setTimeout(function(){throw e})}function Wa(e,t){var r=t,i=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(i===0){e.removeChild(c),Mn(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=c}while(r);Mn(t)}function er(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Qr=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Qr,Yn="__reactProps$"+Qr,zt="__reactContainer$"+Qr,Va="__reactEvents$"+Qr,bp="__reactListeners$"+Qr,jp="__reactHandles$"+Qr;function wr(e){var t=e[Ot];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zt]||r[Ot]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=tc(e);e!==null;){if(r=e[Ot])return r;e=tc(e)}return t}e=r,r=e.parentNode}return null}function Xn(e){return e=e[Ot]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(s(33))}function Xs(e){return e[Yn]||null}var qa=[],Yr=-1;function tr(e){return{current:e}}function Ce(e){0>Yr||(e.current=qa[Yr],qa[Yr]=null,Yr--)}function ke(e,t){Yr++,qa[Yr]=e.current,e.current=t}var rr={},Ge=tr(rr),nt=tr(!1),_r=rr;function Xr(e,t){var r=e.type.contextTypes;if(!r)return rr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in r)c[h]=t[h];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function st(e){return e=e.childContextTypes,e!=null}function Zs(){Ce(nt),Ce(Ge)}function rc(e,t,r){if(Ge.current!==rr)throw Error(s(168));ke(Ge,t),ke(nt,r)}function nc(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(s(108,we(e)||"Unknown",c));return N({},r,i)}function ei(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||rr,_r=Ge.current,ke(Ge,e),ke(nt,nt.current),!0}function sc(e,t,r){var i=e.stateNode;if(!i)throw Error(s(169));r?(e=nc(e,t,_r),i.__reactInternalMemoizedMergedChildContext=e,Ce(nt),Ce(Ge),ke(Ge,e)):Ce(nt),ke(nt,r)}var $t=null,ti=!1,Ha=!1;function ic(e){$t===null?$t=[e]:$t.push(e)}function kp(e){ti=!0,ic(e)}function nr(){if(!Ha&&$t!==null){Ha=!0;var e=0,t=be;try{var r=$t;for(be=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}$t=null,ti=!1}catch(c){throw $t!==null&&($t=$t.slice(e+1)),lu(pa,nr),c}finally{be=t,Ha=!1}}return null}var Zr=[],en=0,ri=null,ni=0,pt=[],mt=0,br=null,Ut=1,Mt="";function jr(e,t){Zr[en++]=ni,Zr[en++]=ri,ri=e,ni=t}function ac(e,t,r){pt[mt++]=Ut,pt[mt++]=Mt,pt[mt++]=br,br=e;var i=Ut;e=Mt;var c=32-_t(i)-1;i&=~(1<<c),r+=1;var h=32-_t(t)+c;if(30<h){var m=c-c%5;h=(i&(1<<m)-1).toString(32),i>>=m,c-=m,Ut=1<<32-_t(t)+c|r<<c|i,Mt=h+e}else Ut=1<<h|r<<c|i,Mt=e}function Ka(e){e.return!==null&&(jr(e,1),ac(e,1,0))}function Ja(e){for(;e===ri;)ri=Zr[--en],Zr[en]=null,ni=Zr[--en],Zr[en]=null;for(;e===br;)br=pt[--mt],pt[mt]=null,Mt=pt[--mt],pt[mt]=null,Ut=pt[--mt],pt[mt]=null}var dt=null,ht=null,Pe=!1,jt=null;function lc(e,t){var r=xt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function oc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ht=er(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=br!==null?{id:Ut,overflow:Mt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,dt=e,ht=null,!0):!1;default:return!1}}function Qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ga(e){if(Pe){var t=ht;if(t){var r=t;if(!oc(e,t)){if(Qa(e))throw Error(s(418));t=er(r.nextSibling);var i=dt;t&&oc(e,t)?lc(i,r):(e.flags=e.flags&-4097|2,Pe=!1,dt=e)}}else{if(Qa(e))throw Error(s(418));e.flags=e.flags&-4097|2,Pe=!1,dt=e}}}function uc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function si(e){if(e!==dt)return!1;if(!Pe)return uc(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ba(e.type,e.memoizedProps)),t&&(t=ht)){if(Qa(e))throw cc(),Error(s(418));for(;t;)lc(e,t),t=er(t.nextSibling)}if(uc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ht=er(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=dt?er(e.stateNode.nextSibling):null;return!0}function cc(){for(var e=ht;e;)e=er(e.nextSibling)}function tn(){ht=dt=null,Pe=!1}function Ya(e){jt===null?jt=[e]:jt.push(e)}var Sp=I.ReactCurrentBatchConfig;function Zn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(s(309));var i=r.stateNode}if(!i)throw Error(s(147,e));var c=i,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var _=c.refs;m===null?delete _[h]:_[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function ii(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dc(e){var t=e._init;return t(e._payload)}function hc(e){function t(E,k){if(e){var R=E.deletions;R===null?(E.deletions=[k],E.flags|=16):R.push(k)}}function r(E,k){if(!e)return null;for(;k!==null;)t(E,k),k=k.sibling;return null}function i(E,k){for(E=new Map;k!==null;)k.key!==null?E.set(k.key,k):E.set(k.index,k),k=k.sibling;return E}function c(E,k){return E=dr(E,k),E.index=0,E.sibling=null,E}function h(E,k,R){return E.index=R,e?(R=E.alternate,R!==null?(R=R.index,R<k?(E.flags|=2,k):R):(E.flags|=2,k)):(E.flags|=1048576,k)}function m(E){return e&&E.alternate===null&&(E.flags|=2),E}function _(E,k,R,q){return k===null||k.tag!==6?(k=Fl(R,E.mode,q),k.return=E,k):(k=c(k,R),k.return=E,k)}function j(E,k,R,q){var re=R.type;return re===Y?M(E,k,R.props.children,q,R.key):k!==null&&(k.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ne&&dc(re)===k.type)?(q=c(k,R.props),q.ref=Zn(E,k,R),q.return=E,q):(q=Ti(R.type,R.key,R.props,null,E.mode,q),q.ref=Zn(E,k,R),q.return=E,q)}function O(E,k,R,q){return k===null||k.tag!==4||k.stateNode.containerInfo!==R.containerInfo||k.stateNode.implementation!==R.implementation?(k=Wl(R,E.mode,q),k.return=E,k):(k=c(k,R.children||[]),k.return=E,k)}function M(E,k,R,q,re){return k===null||k.tag!==7?(k=Rr(R,E.mode,q,re),k.return=E,k):(k=c(k,R),k.return=E,k)}function F(E,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Fl(""+k,E.mode,R),k.return=E,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case W:return R=Ti(k.type,k.key,k.props,null,E.mode,R),R.ref=Zn(E,null,k),R.return=E,R;case H:return k=Wl(k,E.mode,R),k.return=E,k;case ne:var q=k._init;return F(E,q(k._payload),R)}if(Cn(k)||se(k))return k=Rr(k,E.mode,R,null),k.return=E,k;ii(E,k)}return null}function U(E,k,R,q){var re=k!==null?k.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return re!==null?null:_(E,k,""+R,q);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case W:return R.key===re?j(E,k,R,q):null;case H:return R.key===re?O(E,k,R,q):null;case ne:return re=R._init,U(E,k,re(R._payload),q)}if(Cn(R)||se(R))return re!==null?null:M(E,k,R,q,null);ii(E,R)}return null}function G(E,k,R,q,re){if(typeof q=="string"&&q!==""||typeof q=="number")return E=E.get(R)||null,_(k,E,""+q,re);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case W:return E=E.get(q.key===null?R:q.key)||null,j(k,E,q,re);case H:return E=E.get(q.key===null?R:q.key)||null,O(k,E,q,re);case ne:var oe=q._init;return G(E,k,R,oe(q._payload),re)}if(Cn(q)||se(q))return E=E.get(R)||null,M(k,E,q,re,null);ii(k,q)}return null}function Z(E,k,R,q){for(var re=null,oe=null,ue=k,de=k=0,qe=null;ue!==null&&de<R.length;de++){ue.index>de?(qe=ue,ue=null):qe=ue.sibling;var xe=U(E,ue,R[de],q);if(xe===null){ue===null&&(ue=qe);break}e&&ue&&xe.alternate===null&&t(E,ue),k=h(xe,k,de),oe===null?re=xe:oe.sibling=xe,oe=xe,ue=qe}if(de===R.length)return r(E,ue),Pe&&jr(E,de),re;if(ue===null){for(;de<R.length;de++)ue=F(E,R[de],q),ue!==null&&(k=h(ue,k,de),oe===null?re=ue:oe.sibling=ue,oe=ue);return Pe&&jr(E,de),re}for(ue=i(E,ue);de<R.length;de++)qe=G(ue,E,de,R[de],q),qe!==null&&(e&&qe.alternate!==null&&ue.delete(qe.key===null?de:qe.key),k=h(qe,k,de),oe===null?re=qe:oe.sibling=qe,oe=qe);return e&&ue.forEach(function(hr){return t(E,hr)}),Pe&&jr(E,de),re}function te(E,k,R,q){var re=se(R);if(typeof re!="function")throw Error(s(150));if(R=re.call(R),R==null)throw Error(s(151));for(var oe=re=null,ue=k,de=k=0,qe=null,xe=R.next();ue!==null&&!xe.done;de++,xe=R.next()){ue.index>de?(qe=ue,ue=null):qe=ue.sibling;var hr=U(E,ue,xe.value,q);if(hr===null){ue===null&&(ue=qe);break}e&&ue&&hr.alternate===null&&t(E,ue),k=h(hr,k,de),oe===null?re=hr:oe.sibling=hr,oe=hr,ue=qe}if(xe.done)return r(E,ue),Pe&&jr(E,de),re;if(ue===null){for(;!xe.done;de++,xe=R.next())xe=F(E,xe.value,q),xe!==null&&(k=h(xe,k,de),oe===null?re=xe:oe.sibling=xe,oe=xe);return Pe&&jr(E,de),re}for(ue=i(E,ue);!xe.done;de++,xe=R.next())xe=G(ue,E,de,xe.value,q),xe!==null&&(e&&xe.alternate!==null&&ue.delete(xe.key===null?de:xe.key),k=h(xe,k,de),oe===null?re=xe:oe.sibling=xe,oe=xe);return e&&ue.forEach(function(sm){return t(E,sm)}),Pe&&jr(E,de),re}function Ie(E,k,R,q){if(typeof R=="object"&&R!==null&&R.type===Y&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case W:e:{for(var re=R.key,oe=k;oe!==null;){if(oe.key===re){if(re=R.type,re===Y){if(oe.tag===7){r(E,oe.sibling),k=c(oe,R.props.children),k.return=E,E=k;break e}}else if(oe.elementType===re||typeof re=="object"&&re!==null&&re.$$typeof===ne&&dc(re)===oe.type){r(E,oe.sibling),k=c(oe,R.props),k.ref=Zn(E,oe,R),k.return=E,E=k;break e}r(E,oe);break}else t(E,oe);oe=oe.sibling}R.type===Y?(k=Rr(R.props.children,E.mode,q,R.key),k.return=E,E=k):(q=Ti(R.type,R.key,R.props,null,E.mode,q),q.ref=Zn(E,k,R),q.return=E,E=q)}return m(E);case H:e:{for(oe=R.key;k!==null;){if(k.key===oe)if(k.tag===4&&k.stateNode.containerInfo===R.containerInfo&&k.stateNode.implementation===R.implementation){r(E,k.sibling),k=c(k,R.children||[]),k.return=E,E=k;break e}else{r(E,k);break}else t(E,k);k=k.sibling}k=Wl(R,E.mode,q),k.return=E,E=k}return m(E);case ne:return oe=R._init,Ie(E,k,oe(R._payload),q)}if(Cn(R))return Z(E,k,R,q);if(se(R))return te(E,k,R,q);ii(E,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,k!==null&&k.tag===6?(r(E,k.sibling),k=c(k,R),k.return=E,E=k):(r(E,k),k=Fl(R,E.mode,q),k.return=E,E=k),m(E)):r(E,k)}return Ie}var rn=hc(!0),fc=hc(!1),ai=tr(null),li=null,nn=null,Xa=null;function Za(){Xa=nn=li=null}function el(e){var t=ai.current;Ce(ai),e._currentValue=t}function tl(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function sn(e,t){li=e,Xa=nn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(it=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(Xa!==e)if(e={context:e,memoizedValue:t,next:null},nn===null){if(li===null)throw Error(s(308));nn=e,li.dependencies={lanes:0,firstContext:e}}else nn=nn.next=e;return t}var kr=null;function rl(e){kr===null?kr=[e]:kr.push(e)}function pc(e,t,r,i){var c=t.interleaved;return c===null?(r.next=r,rl(t)):(r.next=c.next,c.next=r),t.interleaved=r,Bt(e,i)}function Bt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var sr=!1;function nl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ft(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ir(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(ve&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,Bt(e,r)}return c=i.interleaved,c===null?(t.next=t,rl(i)):(t.next=c.next,c.next=t),i.interleaved=t,Bt(e,r)}function oi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,va(e,r)}}function gc(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var c=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?c=h=m:h=h.next=m,r=r.next}while(r!==null);h===null?c=h=t:h=h.next=t}else c=h=t;r={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ui(e,t,r,i){var c=e.updateQueue;sr=!1;var h=c.firstBaseUpdate,m=c.lastBaseUpdate,_=c.shared.pending;if(_!==null){c.shared.pending=null;var j=_,O=j.next;j.next=null,m===null?h=O:m.next=O,m=j;var M=e.alternate;M!==null&&(M=M.updateQueue,_=M.lastBaseUpdate,_!==m&&(_===null?M.firstBaseUpdate=O:_.next=O,M.lastBaseUpdate=j))}if(h!==null){var F=c.baseState;m=0,M=O=j=null,_=h;do{var U=_.lane,G=_.eventTime;if((i&U)===U){M!==null&&(M=M.next={eventTime:G,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var Z=e,te=_;switch(U=t,G=r,te.tag){case 1:if(Z=te.payload,typeof Z=="function"){F=Z.call(G,F,U);break e}F=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=te.payload,U=typeof Z=="function"?Z.call(G,F,U):Z,U==null)break e;F=N({},F,U);break e;case 2:sr=!0}}_.callback!==null&&_.lane!==0&&(e.flags|=64,U=c.effects,U===null?c.effects=[_]:U.push(_))}else G={eventTime:G,lane:U,tag:_.tag,payload:_.payload,callback:_.callback,next:null},M===null?(O=M=G,j=F):M=M.next=G,m|=U;if(_=_.next,_===null){if(_=c.shared.pending,_===null)break;U=_,_=U.next,U.next=null,c.lastBaseUpdate=U,c.shared.pending=null}}while(!0);if(M===null&&(j=F),c.baseState=j,c.firstBaseUpdate=O,c.lastBaseUpdate=M,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);Er|=m,e.lanes=m,e.memoizedState=F}}function vc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=r,typeof c!="function")throw Error(s(191,c));c.call(i)}}}var es={},Dt=tr(es),ts=tr(es),rs=tr(es);function Sr(e){if(e===es)throw Error(s(174));return e}function sl(e,t){switch(ke(rs,t),ke(ts,e),ke(Dt,es),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ia(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ia(t,e)}Ce(Dt),ke(Dt,t)}function an(){Ce(Dt),Ce(ts),Ce(rs)}function yc(e){Sr(rs.current);var t=Sr(Dt.current),r=ia(t,e.type);t!==r&&(ke(ts,e),ke(Dt,r))}function il(e){ts.current===e&&(Ce(Dt),Ce(ts))}var Oe=tr(0);function ci(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var al=[];function ll(){for(var e=0;e<al.length;e++)al[e]._workInProgressVersionPrimary=null;al.length=0}var di=I.ReactCurrentDispatcher,ol=I.ReactCurrentBatchConfig,Nr=0,De=null,Ue=null,We=null,hi=!1,ns=!1,ss=0,Np=0;function Ye(){throw Error(s(321))}function ul(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bt(e[r],t[r]))return!1;return!0}function cl(e,t,r,i,c,h){if(Nr=h,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,di.current=e===null||e.memoizedState===null?Pp:Rp,e=r(i,c),ns){h=0;do{if(ns=!1,ss=0,25<=h)throw Error(s(301));h+=1,We=Ue=null,t.updateQueue=null,di.current=Op,e=r(i,c)}while(ns)}if(di.current=mi,t=Ue!==null&&Ue.next!==null,Nr=0,We=Ue=De=null,hi=!1,t)throw Error(s(300));return e}function dl(){var e=ss!==0;return ss=0,e}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?De.memoizedState=We=e:We=We.next=e,We}function vt(){if(Ue===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=We===null?De.memoizedState:We.next;if(t!==null)We=t,Ue=e;else{if(e===null)throw Error(s(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},We===null?De.memoizedState=We=e:We=We.next=e}return We}function is(e,t){return typeof t=="function"?t(e):t}function hl(e){var t=vt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=Ue,c=i.baseQueue,h=r.pending;if(h!==null){if(c!==null){var m=c.next;c.next=h.next,h.next=m}i.baseQueue=c=h,r.pending=null}if(c!==null){h=c.next,i=i.baseState;var _=m=null,j=null,O=h;do{var M=O.lane;if((Nr&M)===M)j!==null&&(j=j.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),i=O.hasEagerState?O.eagerState:e(i,O.action);else{var F={lane:M,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};j===null?(_=j=F,m=i):j=j.next=F,De.lanes|=M,Er|=M}O=O.next}while(O!==null&&O!==h);j===null?m=i:j.next=_,bt(i,t.memoizedState)||(it=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=j,r.lastRenderedState=i}if(e=r.interleaved,e!==null){c=e;do h=c.lane,De.lanes|=h,Er|=h,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fl(e){var t=vt(),r=t.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=e;var i=r.dispatch,c=r.pending,h=t.memoizedState;if(c!==null){r.pending=null;var m=c=c.next;do h=e(h,m.action),m=m.next;while(m!==c);bt(h,t.memoizedState)||(it=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,i]}function xc(){}function wc(e,t){var r=De,i=vt(),c=t(),h=!bt(i.memoizedState,c);if(h&&(i.memoizedState=c,it=!0),i=i.queue,pl(jc.bind(null,r,i,e),[e]),i.getSnapshot!==t||h||We!==null&&We.memoizedState.tag&1){if(r.flags|=2048,as(9,bc.bind(null,r,i,c,t),void 0,null),Ve===null)throw Error(s(349));(Nr&30)!==0||_c(r,t,c)}return c}function _c(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bc(e,t,r,i){t.value=r,t.getSnapshot=i,kc(t)&&Sc(e)}function jc(e,t,r){return r(function(){kc(t)&&Sc(e)})}function kc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!bt(e,r)}catch{return!0}}function Sc(e){var t=Bt(e,1);t!==null&&Et(t,e,1,-1)}function Nc(e){var t=At();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:e},t.queue=e,e=e.dispatch=Tp.bind(null,De,e),[t.memoizedState,e]}function as(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Ec(){return vt().memoizedState}function fi(e,t,r,i){var c=At();De.flags|=e,c.memoizedState=as(1|t,r,void 0,i===void 0?null:i)}function pi(e,t,r,i){var c=vt();i=i===void 0?null:i;var h=void 0;if(Ue!==null){var m=Ue.memoizedState;if(h=m.destroy,i!==null&&ul(i,m.deps)){c.memoizedState=as(t,r,h,i);return}}De.flags|=e,c.memoizedState=as(1|t,r,h,i)}function Cc(e,t){return fi(8390656,8,e,t)}function pl(e,t){return pi(2048,8,e,t)}function Tc(e,t){return pi(4,2,e,t)}function Pc(e,t){return pi(4,4,e,t)}function Rc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Oc(e,t,r){return r=r!=null?r.concat([e]):null,pi(4,4,Rc.bind(null,t,e),r)}function ml(){}function Dc(e,t){var r=vt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ul(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Ac(e,t){var r=vt();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ul(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Lc(e,t,r){return(Nr&21)===0?(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=r):(bt(r,t)||(r=du(),De.lanes|=r,Er|=r,e.baseState=!0),t)}function Ep(e,t){var r=be;be=r!==0&&4>r?r:4,e(!0);var i=ol.transition;ol.transition={};try{e(!1),t()}finally{be=r,ol.transition=i}}function Ic(){return vt().memoizedState}function Cp(e,t,r){var i=ur(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},zc(e))$c(t,r);else if(r=pc(e,t,r,i),r!==null){var c=tt();Et(r,e,i,c),Uc(r,t,i)}}function Tp(e,t,r){var i=ur(e),c={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(zc(e))$c(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,_=h(m,r);if(c.hasEagerState=!0,c.eagerState=_,bt(_,m)){var j=t.interleaved;j===null?(c.next=c,rl(t)):(c.next=j.next,j.next=c),t.interleaved=c;return}}catch{}finally{}r=pc(e,t,c,i),r!==null&&(c=tt(),Et(r,e,i,c),Uc(r,t,i))}}function zc(e){var t=e.alternate;return e===De||t!==null&&t===De}function $c(e,t){ns=hi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Uc(e,t,r){if((r&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,va(e,r)}}var mi={readContext:gt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},Pp={readContext:gt,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Cc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,fi(4194308,4,Rc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return fi(4194308,4,e,t)},useInsertionEffect:function(e,t){return fi(4,2,e,t)},useMemo:function(e,t){var r=At();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=At();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Cp.bind(null,De,e),[i.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:Nc,useDebugValue:ml,useDeferredValue:function(e){return At().memoizedState=e},useTransition:function(){var e=Nc(!1),t=e[0];return e=Ep.bind(null,e[1]),At().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=De,c=At();if(Pe){if(r===void 0)throw Error(s(407));r=r()}else{if(r=t(),Ve===null)throw Error(s(349));(Nr&30)!==0||_c(i,t,r)}c.memoizedState=r;var h={value:r,getSnapshot:t};return c.queue=h,Cc(jc.bind(null,i,h,e),[e]),i.flags|=2048,as(9,bc.bind(null,i,h,r,t),void 0,null),r},useId:function(){var e=At(),t=Ve.identifierPrefix;if(Pe){var r=Mt,i=Ut;r=(i&~(1<<32-_t(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=ss++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Np++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Rp={readContext:gt,useCallback:Dc,useContext:gt,useEffect:pl,useImperativeHandle:Oc,useInsertionEffect:Tc,useLayoutEffect:Pc,useMemo:Ac,useReducer:hl,useRef:Ec,useState:function(){return hl(is)},useDebugValue:ml,useDeferredValue:function(e){var t=vt();return Lc(t,Ue.memoizedState,e)},useTransition:function(){var e=hl(is)[0],t=vt().memoizedState;return[e,t]},useMutableSource:xc,useSyncExternalStore:wc,useId:Ic,unstable_isNewReconciler:!1},Op={readContext:gt,useCallback:Dc,useContext:gt,useEffect:pl,useImperativeHandle:Oc,useInsertionEffect:Tc,useLayoutEffect:Pc,useMemo:Ac,useReducer:fl,useRef:Ec,useState:function(){return fl(is)},useDebugValue:ml,useDeferredValue:function(e){var t=vt();return Ue===null?t.memoizedState=e:Lc(t,Ue.memoizedState,e)},useTransition:function(){var e=fl(is)[0],t=vt().memoizedState;return[e,t]},useMutableSource:xc,useSyncExternalStore:wc,useId:Ic,unstable_isNewReconciler:!1};function kt(e,t){if(e&&e.defaultProps){t=N({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function gl(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:N({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gi={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=tt(),c=ur(e),h=Ft(i,c);h.payload=t,r!=null&&(h.callback=r),t=ir(e,h,c),t!==null&&(Et(t,e,c,i),oi(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=tt(),c=ur(e),h=Ft(i,c);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=ir(e,h,c),t!==null&&(Et(t,e,c,i),oi(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tt(),i=ur(e),c=Ft(r,i);c.tag=2,t!=null&&(c.callback=t),t=ir(e,c,i),t!==null&&(Et(t,e,i,r),oi(t,e,i))}};function Mc(e,t,r,i,c,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,m):t.prototype&&t.prototype.isPureReactComponent?!Hn(r,i)||!Hn(c,h):!0}function Bc(e,t,r){var i=!1,c=rr,h=t.contextType;return typeof h=="object"&&h!==null?h=gt(h):(c=st(t)?_r:Ge.current,i=t.contextTypes,h=(i=i!=null)?Xr(e,c):rr),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gi,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function Fc(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&gi.enqueueReplaceState(t,t.state,null)}function vl(e,t,r,i){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs={},nl(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=gt(h):(h=st(t)?_r:Ge.current,c.context=Xr(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(gl(e,t,h,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&gi.enqueueReplaceState(c,c.state,null),ui(e,r,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function ln(e,t){try{var r="",i=t;do r+=ce(i),i=i.return;while(i);var c=r}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function yl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function xl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Dp=typeof WeakMap=="function"?WeakMap:Map;function Wc(e,t,r){r=Ft(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){ji||(ji=!0,Al=i),xl(e,t)},r}function Vc(e,t,r){r=Ft(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;r.payload=function(){return i(c)},r.callback=function(){xl(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){xl(e,t),typeof i!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function qc(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Dp;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(r)||(c.add(r),e=Kp.bind(null,e,t,r),t.then(e,e))}function Hc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kc(e,t,r,i,c){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ft(-1,1),t.tag=2,ir(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=c,e)}var Ap=I.ReactCurrentOwner,it=!1;function et(e,t,r,i){t.child=e===null?fc(t,null,r,i):rn(t,e.child,r,i)}function Jc(e,t,r,i,c){r=r.render;var h=t.ref;return sn(t,c),i=cl(e,t,r,i,h,c),r=dl(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wt(e,t,c)):(Pe&&r&&Ka(t),t.flags|=1,et(e,t,i,c),t.child)}function Qc(e,t,r,i,c){if(e===null){var h=r.type;return typeof h=="function"&&!Bl(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,Gc(e,t,h,i,c)):(e=Ti(r.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&c)===0){var m=h.memoizedProps;if(r=r.compare,r=r!==null?r:Hn,r(m,i)&&e.ref===t.ref)return Wt(e,t,c)}return t.flags|=1,e=dr(h,i),e.ref=t.ref,e.return=t,t.child=e}function Gc(e,t,r,i,c){if(e!==null){var h=e.memoizedProps;if(Hn(h,i)&&e.ref===t.ref)if(it=!1,t.pendingProps=i=h,(e.lanes&c)!==0)(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,Wt(e,t,c)}return wl(e,t,r,i,c)}function Yc(e,t,r){var i=t.pendingProps,c=i.children,h=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(un,ft),ft|=r;else{if((r&1073741824)===0)return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ke(un,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=h!==null?h.baseLanes:r,ke(un,ft),ft|=i}else h!==null?(i=h.baseLanes|r,t.memoizedState=null):i=r,ke(un,ft),ft|=i;return et(e,t,c,r),t.child}function Xc(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function wl(e,t,r,i,c){var h=st(r)?_r:Ge.current;return h=Xr(t,h),sn(t,c),r=cl(e,t,r,i,h,c),i=dl(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Wt(e,t,c)):(Pe&&i&&Ka(t),t.flags|=1,et(e,t,r,c),t.child)}function Zc(e,t,r,i,c){if(st(r)){var h=!0;ei(t)}else h=!1;if(sn(t,c),t.stateNode===null)yi(e,t),Bc(t,r,i),vl(t,r,i,c),i=!0;else if(e===null){var m=t.stateNode,_=t.memoizedProps;m.props=_;var j=m.context,O=r.contextType;typeof O=="object"&&O!==null?O=gt(O):(O=st(r)?_r:Ge.current,O=Xr(t,O));var M=r.getDerivedStateFromProps,F=typeof M=="function"||typeof m.getSnapshotBeforeUpdate=="function";F||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==i||j!==O)&&Fc(t,m,i,O),sr=!1;var U=t.memoizedState;m.state=U,ui(t,i,m,c),j=t.memoizedState,_!==i||U!==j||nt.current||sr?(typeof M=="function"&&(gl(t,r,M,i),j=t.memoizedState),(_=sr||Mc(t,r,_,i,U,j,O))?(F||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=j),m.props=i,m.state=j,m.context=O,i=_):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,mc(e,t),_=t.memoizedProps,O=t.type===t.elementType?_:kt(t.type,_),m.props=O,F=t.pendingProps,U=m.context,j=r.contextType,typeof j=="object"&&j!==null?j=gt(j):(j=st(r)?_r:Ge.current,j=Xr(t,j));var G=r.getDerivedStateFromProps;(M=typeof G=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==F||U!==j)&&Fc(t,m,i,j),sr=!1,U=t.memoizedState,m.state=U,ui(t,i,m,c);var Z=t.memoizedState;_!==F||U!==Z||nt.current||sr?(typeof G=="function"&&(gl(t,r,G,i),Z=t.memoizedState),(O=sr||Mc(t,r,O,i,U,Z,j)||!1)?(M||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,Z,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,Z,j)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=Z),m.props=i,m.state=Z,m.context=j,i=O):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),i=!1)}return _l(e,t,r,i,h,c)}function _l(e,t,r,i,c,h){Xc(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return c&&sc(t,r,!1),Wt(e,t,h);i=t.stateNode,Ap.current=t;var _=m&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=rn(t,e.child,null,h),t.child=rn(t,null,_,h)):et(e,t,_,h),t.memoizedState=i.state,c&&sc(t,r,!0),t.child}function ed(e){var t=e.stateNode;t.pendingContext?rc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&rc(e,t.context,!1),sl(e,t.containerInfo)}function td(e,t,r,i,c){return tn(),Ya(c),t.flags|=256,et(e,t,r,i),t.child}var bl={dehydrated:null,treeContext:null,retryLane:0};function jl(e){return{baseLanes:e,cachePool:null,transitions:null}}function rd(e,t,r){var i=t.pendingProps,c=Oe.current,h=!1,m=(t.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(c&2)!==0),_?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),ke(Oe,c&1),e===null)return Ga(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=i.children,e=i.fallback,h?(i=t.mode,h=t.child,m={mode:"hidden",children:m},(i&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=Pi(m,i,0,null),e=Rr(e,i,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=jl(r),t.memoizedState=bl,e):kl(t,m));if(c=e.memoizedState,c!==null&&(_=c.dehydrated,_!==null))return Lp(e,t,m,i,_,c,r);if(h){h=i.fallback,m=t.mode,c=e.child,_=c.sibling;var j={mode:"hidden",children:i.children};return(m&1)===0&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=j,t.deletions=null):(i=dr(c,j),i.subtreeFlags=c.subtreeFlags&14680064),_!==null?h=dr(_,h):(h=Rr(h,m,r,null),h.flags|=2),h.return=t,i.return=t,i.sibling=h,t.child=i,i=h,h=t.child,m=e.child.memoizedState,m=m===null?jl(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~r,t.memoizedState=bl,i}return h=e.child,e=h.sibling,i=dr(h,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function kl(e,t){return t=Pi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vi(e,t,r,i){return i!==null&&Ya(i),rn(t,e.child,null,r),e=kl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lp(e,t,r,i,c,h,m){if(r)return t.flags&256?(t.flags&=-257,i=yl(Error(s(422))),vi(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=i.fallback,c=t.mode,i=Pi({mode:"visible",children:i.children},c,0,null),h=Rr(h,c,m,null),h.flags|=2,i.return=t,h.return=t,i.sibling=h,t.child=i,(t.mode&1)!==0&&rn(t,e.child,null,m),t.child.memoizedState=jl(m),t.memoizedState=bl,h);if((t.mode&1)===0)return vi(e,t,m,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var _=i.dgst;return i=_,h=Error(s(419)),i=yl(h,i,void 0),vi(e,t,m,i)}if(_=(m&e.childLanes)!==0,it||_){if(i=Ve,i!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=(c&(i.suspendedLanes|m))!==0?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,Bt(e,c),Et(i,e,c,-1))}return Ml(),i=yl(Error(s(421))),vi(e,t,m,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=Jp.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,ht=er(c.nextSibling),dt=t,Pe=!0,jt=null,e!==null&&(pt[mt++]=Ut,pt[mt++]=Mt,pt[mt++]=br,Ut=e.id,Mt=e.overflow,br=t),t=kl(t,i.children),t.flags|=4096,t)}function nd(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),tl(e.return,t,r)}function Sl(e,t,r,i,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=i,h.tail=r,h.tailMode=c)}function sd(e,t,r){var i=t.pendingProps,c=i.revealOrder,h=i.tail;if(et(e,t,i.children,r),i=Oe.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nd(e,r,t);else if(e.tag===19)nd(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ke(Oe,i),(t.mode&1)===0)t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&ci(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Sl(t,!1,c,r,h);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ci(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Sl(t,!0,r,null,h);break;case"together":Sl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Er|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,r=dr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=dr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ip(e,t,r){switch(t.tag){case 3:ed(t),tn();break;case 5:yc(t);break;case 1:st(t.type)&&ei(t);break;case 4:sl(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;ke(ai,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ke(Oe,Oe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?rd(e,t,r):(ke(Oe,Oe.current&1),e=Wt(e,t,r),e!==null?e.sibling:null);ke(Oe,Oe.current&1);break;case 19:if(i=(r&t.childLanes)!==0,(e.flags&128)!==0){if(i)return sd(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ke(Oe,Oe.current),i)break;return null;case 22:case 23:return t.lanes=0,Yc(e,t,r)}return Wt(e,t,r)}var id,Nl,ad,ld;id=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Nl=function(){},ad=function(e,t,r,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,Sr(Dt.current);var h=null;switch(r){case"input":c=ta(e,c),i=ta(e,i),h=[];break;case"select":c=N({},c,{value:void 0}),i=N({},i,{value:void 0}),h=[];break;case"textarea":c=sa(e,c),i=sa(e,i),h=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Ys)}aa(r,i);var m;r=null;for(O in c)if(!i.hasOwnProperty(O)&&c.hasOwnProperty(O)&&c[O]!=null)if(O==="style"){var _=c[O];for(m in _)_.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(u.hasOwnProperty(O)?h||(h=[]):(h=h||[]).push(O,null));for(O in i){var j=i[O];if(_=c!=null?c[O]:void 0,i.hasOwnProperty(O)&&j!==_&&(j!=null||_!=null))if(O==="style")if(_){for(m in _)!_.hasOwnProperty(m)||j&&j.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in j)j.hasOwnProperty(m)&&_[m]!==j[m]&&(r||(r={}),r[m]=j[m])}else r||(h||(h=[]),h.push(O,r)),r=j;else O==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,_=_?_.__html:void 0,j!=null&&_!==j&&(h=h||[]).push(O,j)):O==="children"?typeof j!="string"&&typeof j!="number"||(h=h||[]).push(O,""+j):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(u.hasOwnProperty(O)?(j!=null&&O==="onScroll"&&Ee("scroll",e),h||_===j||(h=[])):(h=h||[]).push(O,j))}r&&(h=h||[]).push("style",r);var O=h;(t.updateQueue=O)&&(t.flags|=4)}},ld=function(e,t,r,i){r!==i&&(t.flags|=4)};function ls(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Xe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function zp(e,t,r){var i=t.pendingProps;switch(Ja(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(t),null;case 1:return st(t.type)&&Zs(),Xe(t),null;case 3:return i=t.stateNode,an(),Ce(nt),Ce(Ge),ll(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(si(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,jt!==null&&(zl(jt),jt=null))),Nl(e,t),Xe(t),null;case 5:il(t);var c=Sr(rs.current);if(r=t.type,e!==null&&t.stateNode!=null)ad(e,t,r,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(s(166));return Xe(t),null}if(e=Sr(Dt.current),si(t)){i=t.stateNode,r=t.type;var h=t.memoizedProps;switch(i[Ot]=t,i[Yn]=h,e=(t.mode&1)!==0,r){case"dialog":Ee("cancel",i),Ee("close",i);break;case"iframe":case"object":case"embed":Ee("load",i);break;case"video":case"audio":for(c=0;c<Jn.length;c++)Ee(Jn[c],i);break;case"source":Ee("error",i);break;case"img":case"image":case"link":Ee("error",i),Ee("load",i);break;case"details":Ee("toggle",i);break;case"input":Bo(i,h),Ee("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!h.multiple},Ee("invalid",i);break;case"textarea":Vo(i,h),Ee("invalid",i)}aa(r,h),c=null;for(var m in h)if(h.hasOwnProperty(m)){var _=h[m];m==="children"?typeof _=="string"?i.textContent!==_&&(h.suppressHydrationWarning!==!0&&Gs(i.textContent,_,e),c=["children",_]):typeof _=="number"&&i.textContent!==""+_&&(h.suppressHydrationWarning!==!0&&Gs(i.textContent,_,e),c=["children",""+_]):u.hasOwnProperty(m)&&_!=null&&m==="onScroll"&&Ee("scroll",i)}switch(r){case"input":Es(i),Wo(i,h,!0);break;case"textarea":Es(i),Ho(i);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(i.onclick=Ys)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ko(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(r,{is:i.is}):(e=m.createElement(r),r==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,r),e[Ot]=t,e[Yn]=i,id(e,t,!1,!1),t.stateNode=e;e:{switch(m=la(r,i),r){case"dialog":Ee("cancel",e),Ee("close",e),c=i;break;case"iframe":case"object":case"embed":Ee("load",e),c=i;break;case"video":case"audio":for(c=0;c<Jn.length;c++)Ee(Jn[c],e);c=i;break;case"source":Ee("error",e),c=i;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),c=i;break;case"details":Ee("toggle",e),c=i;break;case"input":Bo(e,i),c=ta(e,i),Ee("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=N({},i,{value:void 0}),Ee("invalid",e);break;case"textarea":Vo(e,i),c=sa(e,i),Ee("invalid",e);break;default:c=i}aa(r,c),_=c;for(h in _)if(_.hasOwnProperty(h)){var j=_[h];h==="style"?Go(e,j):h==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Jo(e,j)):h==="children"?typeof j=="string"?(r!=="textarea"||j!=="")&&Tn(e,j):typeof j=="number"&&Tn(e,""+j):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(u.hasOwnProperty(h)?j!=null&&h==="onScroll"&&Ee("scroll",e):j!=null&&$(e,h,j,m))}switch(r){case"input":Es(e),Wo(e,i,!1);break;case"textarea":Es(e),Ho(e);break;case"option":i.value!=null&&e.setAttribute("value",""+_e(i.value));break;case"select":e.multiple=!!i.multiple,h=i.value,h!=null?Mr(e,!!i.multiple,h,!1):i.defaultValue!=null&&Mr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Ys)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xe(t),null;case 6:if(e&&t.stateNode!=null)ld(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(s(166));if(r=Sr(rs.current),Sr(Dt.current),si(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ot]=t,(h=i.nodeValue!==r)&&(e=dt,e!==null))switch(e.tag){case 3:Gs(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gs(i.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ot]=t,t.stateNode=i}return Xe(t),null;case 13:if(Ce(Oe),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&ht!==null&&(t.mode&1)!==0&&(t.flags&128)===0)cc(),tn(),t.flags|=98560,h=!1;else if(h=si(t),i!==null&&i.dehydrated!==null){if(e===null){if(!h)throw Error(s(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Ot]=t}else tn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Xe(t),h=!1}else jt!==null&&(zl(jt),jt=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Oe.current&1)!==0?Me===0&&(Me=3):Ml())),t.updateQueue!==null&&(t.flags|=4),Xe(t),null);case 4:return an(),Nl(e,t),e===null&&Qn(t.stateNode.containerInfo),Xe(t),null;case 10:return el(t.type._context),Xe(t),null;case 17:return st(t.type)&&Zs(),Xe(t),null;case 19:if(Ce(Oe),h=t.memoizedState,h===null)return Xe(t),null;if(i=(t.flags&128)!==0,m=h.rendering,m===null)if(i)ls(h,!1);else{if(Me!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=ci(e),m!==null){for(t.flags|=128,ls(h,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)h=r,e=i,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ke(Oe,Oe.current&1|2),t.child}e=e.sibling}h.tail!==null&&Le()>cn&&(t.flags|=128,i=!0,ls(h,!1),t.lanes=4194304)}else{if(!i)if(e=ci(m),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ls(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Pe)return Xe(t),null}else 2*Le()-h.renderingStartTime>cn&&r!==1073741824&&(t.flags|=128,i=!0,ls(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(r=h.last,r!==null?r.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Le(),t.sibling=null,r=Oe.current,ke(Oe,i?r&1|2:r&1),t):(Xe(t),null);case 22:case 23:return Ul(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?(ft&1073741824)!==0&&(Xe(t),t.subtreeFlags&6&&(t.flags|=8192)):Xe(t),null;case 24:return null;case 25:return null}throw Error(s(156,t.tag))}function $p(e,t){switch(Ja(t),t.tag){case 1:return st(t.type)&&Zs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return an(),Ce(nt),Ce(Ge),ll(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return il(t),null;case 13:if(Ce(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));tn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(Oe),null;case 4:return an(),null;case 10:return el(t.type._context),null;case 22:case 23:return Ul(),null;case 24:return null;default:return null}}var xi=!1,Ze=!1,Up=typeof WeakSet=="function"?WeakSet:Set,X=null;function on(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Ae(e,t,i)}else r.current=null}function El(e,t,r){try{r()}catch(i){Ae(e,t,i)}}var od=!1;function Mp(e,t){if(Ua=Us,e=Mu(),Ra(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var c=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var m=0,_=-1,j=-1,O=0,M=0,F=e,U=null;t:for(;;){for(var G;F!==r||c!==0&&F.nodeType!==3||(_=m+c),F!==h||i!==0&&F.nodeType!==3||(j=m+i),F.nodeType===3&&(m+=F.nodeValue.length),(G=F.firstChild)!==null;)U=F,F=G;for(;;){if(F===e)break t;if(U===r&&++O===c&&(_=m),U===h&&++M===i&&(j=m),(G=F.nextSibling)!==null)break;F=U,U=F.parentNode}F=G}r=_===-1||j===-1?null:{start:_,end:j}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ma={focusedElem:e,selectionRange:r},Us=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var Z=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var te=Z.memoizedProps,Ie=Z.memoizedState,E=t.stateNode,k=E.getSnapshotBeforeUpdate(t.elementType===t.type?te:kt(t.type,te),Ie);E.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(q){Ae(t,t.return,q)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return Z=od,od=!1,Z}function os(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&El(t,r,h)}c=c.next}while(c!==i)}}function wi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Cl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ud(e){var t=e.alternate;t!==null&&(e.alternate=null,ud(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[Yn],delete t[Va],delete t[bp],delete t[jp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cd(e){return e.tag===5||e.tag===3||e.tag===4}function dd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ys));else if(i!==4&&(e=e.child,e!==null))for(Tl(e,t,r),e=e.sibling;e!==null;)Tl(e,t,r),e=e.sibling}function Pl(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Pl(e,t,r),e=e.sibling;e!==null;)Pl(e,t,r),e=e.sibling}var Ke=null,St=!1;function ar(e,t,r){for(r=r.child;r!==null;)hd(e,t,r),r=r.sibling}function hd(e,t,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Ds,r)}catch{}switch(r.tag){case 5:Ze||on(r,t);case 6:var i=Ke,c=St;Ke=null,ar(e,t,r),Ke=i,St=c,Ke!==null&&(St?(e=Ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ke.removeChild(r.stateNode));break;case 18:Ke!==null&&(St?(e=Ke,r=r.stateNode,e.nodeType===8?Wa(e.parentNode,r):e.nodeType===1&&Wa(e,r),Mn(e)):Wa(Ke,r.stateNode));break;case 4:i=Ke,c=St,Ke=r.stateNode.containerInfo,St=!0,ar(e,t,r),Ke=i,St=c;break;case 0:case 11:case 14:case 15:if(!Ze&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var h=c,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&El(r,t,m),c=c.next}while(c!==i)}ar(e,t,r);break;case 1:if(!Ze&&(on(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(_){Ae(r,t,_)}ar(e,t,r);break;case 21:ar(e,t,r);break;case 22:r.mode&1?(Ze=(i=Ze)||r.memoizedState!==null,ar(e,t,r),Ze=i):ar(e,t,r);break;default:ar(e,t,r)}}function fd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Up),t.forEach(function(i){var c=Qp.bind(null,e,i);r.has(i)||(r.add(i),i.then(c,c))})}}function Nt(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];try{var h=e,m=t,_=m;e:for(;_!==null;){switch(_.tag){case 5:Ke=_.stateNode,St=!1;break e;case 3:Ke=_.stateNode.containerInfo,St=!0;break e;case 4:Ke=_.stateNode.containerInfo,St=!0;break e}_=_.return}if(Ke===null)throw Error(s(160));hd(h,m,c),Ke=null,St=!1;var j=c.alternate;j!==null&&(j.return=null),c.return=null}catch(O){Ae(c,t,O)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pd(t,e),t=t.sibling}function pd(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nt(t,e),Lt(e),i&4){try{os(3,e,e.return),wi(3,e)}catch(te){Ae(e,e.return,te)}try{os(5,e,e.return)}catch(te){Ae(e,e.return,te)}}break;case 1:Nt(t,e),Lt(e),i&512&&r!==null&&on(r,r.return);break;case 5:if(Nt(t,e),Lt(e),i&512&&r!==null&&on(r,r.return),e.flags&32){var c=e.stateNode;try{Tn(c,"")}catch(te){Ae(e,e.return,te)}}if(i&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,m=r!==null?r.memoizedProps:h,_=e.type,j=e.updateQueue;if(e.updateQueue=null,j!==null)try{_==="input"&&h.type==="radio"&&h.name!=null&&Fo(c,h),la(_,m);var O=la(_,h);for(m=0;m<j.length;m+=2){var M=j[m],F=j[m+1];M==="style"?Go(c,F):M==="dangerouslySetInnerHTML"?Jo(c,F):M==="children"?Tn(c,F):$(c,M,F,O)}switch(_){case"input":ra(c,h);break;case"textarea":qo(c,h);break;case"select":var U=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var G=h.value;G!=null?Mr(c,!!h.multiple,G,!1):U!==!!h.multiple&&(h.defaultValue!=null?Mr(c,!!h.multiple,h.defaultValue,!0):Mr(c,!!h.multiple,h.multiple?[]:"",!1))}c[Yn]=h}catch(te){Ae(e,e.return,te)}}break;case 6:if(Nt(t,e),Lt(e),i&4){if(e.stateNode===null)throw Error(s(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(te){Ae(e,e.return,te)}}break;case 3:if(Nt(t,e),Lt(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Mn(t.containerInfo)}catch(te){Ae(e,e.return,te)}break;case 4:Nt(t,e),Lt(e);break;case 13:Nt(t,e),Lt(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Dl=Le())),i&4&&fd(e);break;case 22:if(M=r!==null&&r.memoizedState!==null,e.mode&1?(Ze=(O=Ze)||M,Nt(t,e),Ze=O):Nt(t,e),Lt(e),i&8192){if(O=e.memoizedState!==null,(e.stateNode.isHidden=O)&&!M&&(e.mode&1)!==0)for(X=e,M=e.child;M!==null;){for(F=X=M;X!==null;){switch(U=X,G=U.child,U.tag){case 0:case 11:case 14:case 15:os(4,U,U.return);break;case 1:on(U,U.return);var Z=U.stateNode;if(typeof Z.componentWillUnmount=="function"){i=U,r=U.return;try{t=i,Z.props=t.memoizedProps,Z.state=t.memoizedState,Z.componentWillUnmount()}catch(te){Ae(i,r,te)}}break;case 5:on(U,U.return);break;case 22:if(U.memoizedState!==null){vd(F);continue}}G!==null?(G.return=U,X=G):vd(F)}M=M.sibling}e:for(M=null,F=e;;){if(F.tag===5){if(M===null){M=F;try{c=F.stateNode,O?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(_=F.stateNode,j=F.memoizedProps.style,m=j!=null&&j.hasOwnProperty("display")?j.display:null,_.style.display=Qo("display",m))}catch(te){Ae(e,e.return,te)}}}else if(F.tag===6){if(M===null)try{F.stateNode.nodeValue=O?"":F.memoizedProps}catch(te){Ae(e,e.return,te)}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===e)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===e)break e;for(;F.sibling===null;){if(F.return===null||F.return===e)break e;M===F&&(M=null),F=F.return}M===F&&(M=null),F.sibling.return=F.return,F=F.sibling}}break;case 19:Nt(t,e),Lt(e),i&4&&fd(e);break;case 21:break;default:Nt(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(cd(r)){var i=r;break e}r=r.return}throw Error(s(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(Tn(c,""),i.flags&=-33);var h=dd(e);Pl(e,h,c);break;case 3:case 4:var m=i.stateNode.containerInfo,_=dd(e);Tl(e,_,m);break;default:throw Error(s(161))}}catch(j){Ae(e,e.return,j)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bp(e,t,r){X=e,md(e)}function md(e,t,r){for(var i=(e.mode&1)!==0;X!==null;){var c=X,h=c.child;if(c.tag===22&&i){var m=c.memoizedState!==null||xi;if(!m){var _=c.alternate,j=_!==null&&_.memoizedState!==null||Ze;_=xi;var O=Ze;if(xi=m,(Ze=j)&&!O)for(X=c;X!==null;)m=X,j=m.child,m.tag===22&&m.memoizedState!==null?yd(c):j!==null?(j.return=m,X=j):yd(c);for(;h!==null;)X=h,md(h),h=h.sibling;X=c,xi=_,Ze=O}gd(e)}else(c.subtreeFlags&8772)!==0&&h!==null?(h.return=c,X=h):gd(e)}}function gd(e){for(;X!==null;){var t=X;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ze||wi(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Ze)if(r===null)i.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:kt(t.type,r.memoizedProps);i.componentDidUpdate(c,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&vc(t,h,i);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vc(t,m,r)}break;case 5:var _=t.stateNode;if(r===null&&t.flags&4){r=_;var j=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&r.focus();break;case"img":j.src&&(r.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var O=t.alternate;if(O!==null){var M=O.memoizedState;if(M!==null){var F=M.dehydrated;F!==null&&Mn(F)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(s(163))}Ze||t.flags&512&&Cl(t)}catch(U){Ae(t,t.return,U)}}if(t===e){X=null;break}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}}function vd(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var r=t.sibling;if(r!==null){r.return=t.return,X=r;break}X=t.return}}function yd(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{wi(4,t)}catch(j){Ae(t,r,j)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(j){Ae(t,c,j)}}var h=t.return;try{Cl(t)}catch(j){Ae(t,h,j)}break;case 5:var m=t.return;try{Cl(t)}catch(j){Ae(t,m,j)}}}catch(j){Ae(t,t.return,j)}if(t===e){X=null;break}var _=t.sibling;if(_!==null){_.return=t.return,X=_;break}X=t.return}}var Fp=Math.ceil,_i=I.ReactCurrentDispatcher,Rl=I.ReactCurrentOwner,yt=I.ReactCurrentBatchConfig,ve=0,Ve=null,ze=null,Je=0,ft=0,un=tr(0),Me=0,us=null,Er=0,bi=0,Ol=0,cs=null,at=null,Dl=0,cn=1/0,Vt=null,ji=!1,Al=null,lr=null,ki=!1,or=null,Si=0,ds=0,Ll=null,Ni=-1,Ei=0;function tt(){return(ve&6)!==0?Le():Ni!==-1?Ni:Ni=Le()}function ur(e){return(e.mode&1)===0?1:(ve&2)!==0&&Je!==0?Je&-Je:Sp.transition!==null?(Ei===0&&(Ei=du()),Ei):(e=be,e!==0||(e=window.event,e=e===void 0?16:wu(e.type)),e)}function Et(e,t,r,i){if(50<ds)throw ds=0,Ll=null,Error(s(185));Ln(e,r,i),((ve&2)===0||e!==Ve)&&(e===Ve&&((ve&2)===0&&(bi|=r),Me===4&&cr(e,Je)),lt(e,i),r===1&&ve===0&&(t.mode&1)===0&&(cn=Le()+500,ti&&nr()))}function lt(e,t){var r=e.callbackNode;Sf(e,t);var i=Is(e,e===Ve?Je:0);if(i===0)r!==null&&ou(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&ou(r),t===1)e.tag===0?kp(wd.bind(null,e)):ic(wd.bind(null,e)),wp(function(){(ve&6)===0&&nr()}),r=null;else{switch(hu(i)){case 1:r=pa;break;case 4:r=uu;break;case 16:r=Os;break;case 536870912:r=cu;break;default:r=Os}r=Cd(r,xd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function xd(e,t){if(Ni=-1,Ei=0,(ve&6)!==0)throw Error(s(327));var r=e.callbackNode;if(dn()&&e.callbackNode!==r)return null;var i=Is(e,e===Ve?Je:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=Ci(e,i);else{t=i;var c=ve;ve|=2;var h=bd();(Ve!==e||Je!==t)&&(Vt=null,cn=Le()+500,Tr(e,t));do try{qp();break}catch(_){_d(e,_)}while(!0);Za(),_i.current=h,ve=c,ze!==null?t=0:(Ve=null,Je=0,t=Me)}if(t!==0){if(t===2&&(c=ma(e),c!==0&&(i=c,t=Il(e,c))),t===1)throw r=us,Tr(e,0),cr(e,i),lt(e,Le()),r;if(t===6)cr(e,i);else{if(c=e.current.alternate,(i&30)===0&&!Wp(c)&&(t=Ci(e,i),t===2&&(h=ma(e),h!==0&&(i=h,t=Il(e,h))),t===1))throw r=us,Tr(e,0),cr(e,i),lt(e,Le()),r;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:Pr(e,at,Vt);break;case 3:if(cr(e,i),(i&130023424)===i&&(t=Dl+500-Le(),10<t)){if(Is(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){tt(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=Fa(Pr.bind(null,e,at,Vt),t);break}Pr(e,at,Vt);break;case 4:if(cr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var m=31-_t(i);h=1<<m,m=t[m],m>c&&(c=m),i&=~h}if(i=c,i=Le()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Fp(i/1960))-i,10<i){e.timeoutHandle=Fa(Pr.bind(null,e,at,Vt),i);break}Pr(e,at,Vt);break;case 5:Pr(e,at,Vt);break;default:throw Error(s(329))}}}return lt(e,Le()),e.callbackNode===r?xd.bind(null,e):null}function Il(e,t){var r=cs;return e.current.memoizedState.isDehydrated&&(Tr(e,t).flags|=256),e=Ci(e,t),e!==2&&(t=at,at=r,t!==null&&zl(t)),e}function zl(e){at===null?at=e:at.push.apply(at,e)}function Wp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var c=r[i],h=c.getSnapshot;c=c.value;try{if(!bt(h(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cr(e,t){for(t&=~Ol,t&=~bi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_t(t),i=1<<r;e[r]=-1,t&=~i}}function wd(e){if((ve&6)!==0)throw Error(s(327));dn();var t=Is(e,0);if((t&1)===0)return lt(e,Le()),null;var r=Ci(e,t);if(e.tag!==0&&r===2){var i=ma(e);i!==0&&(t=i,r=Il(e,i))}if(r===1)throw r=us,Tr(e,0),cr(e,t),lt(e,Le()),r;if(r===6)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pr(e,at,Vt),lt(e,Le()),null}function $l(e,t){var r=ve;ve|=1;try{return e(t)}finally{ve=r,ve===0&&(cn=Le()+500,ti&&nr())}}function Cr(e){or!==null&&or.tag===0&&(ve&6)===0&&dn();var t=ve;ve|=1;var r=yt.transition,i=be;try{if(yt.transition=null,be=1,e)return e()}finally{be=i,yt.transition=r,ve=t,(ve&6)===0&&nr()}}function Ul(){ft=un.current,Ce(un)}function Tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,xp(r)),ze!==null)for(r=ze.return;r!==null;){var i=r;switch(Ja(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Zs();break;case 3:an(),Ce(nt),Ce(Ge),ll();break;case 5:il(i);break;case 4:an();break;case 13:Ce(Oe);break;case 19:Ce(Oe);break;case 10:el(i.type._context);break;case 22:case 23:Ul()}r=r.return}if(Ve=e,ze=e=dr(e.current,null),Je=ft=t,Me=0,us=null,Ol=bi=Er=0,at=cs=null,kr!==null){for(t=0;t<kr.length;t++)if(r=kr[t],i=r.interleaved,i!==null){r.interleaved=null;var c=i.next,h=r.pending;if(h!==null){var m=h.next;h.next=c,i.next=m}r.pending=i}kr=null}return e}function _d(e,t){do{var r=ze;try{if(Za(),di.current=mi,hi){for(var i=De.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}hi=!1}if(Nr=0,We=Ue=De=null,ns=!1,ss=0,Rl.current=null,r===null||r.return===null){Me=1,us=t,ze=null;break}e:{var h=e,m=r.return,_=r,j=t;if(t=Je,_.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var O=j,M=_,F=M.tag;if((M.mode&1)===0&&(F===0||F===11||F===15)){var U=M.alternate;U?(M.updateQueue=U.updateQueue,M.memoizedState=U.memoizedState,M.lanes=U.lanes):(M.updateQueue=null,M.memoizedState=null)}var G=Hc(m);if(G!==null){G.flags&=-257,Kc(G,m,_,h,t),G.mode&1&&qc(h,O,t),t=G,j=O;var Z=t.updateQueue;if(Z===null){var te=new Set;te.add(j),t.updateQueue=te}else Z.add(j);break e}else{if((t&1)===0){qc(h,O,t),Ml();break e}j=Error(s(426))}}else if(Pe&&_.mode&1){var Ie=Hc(m);if(Ie!==null){(Ie.flags&65536)===0&&(Ie.flags|=256),Kc(Ie,m,_,h,t),Ya(ln(j,_));break e}}h=j=ln(j,_),Me!==4&&(Me=2),cs===null?cs=[h]:cs.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var E=Wc(h,j,t);gc(h,E);break e;case 1:_=j;var k=h.type,R=h.stateNode;if((h.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(lr===null||!lr.has(R)))){h.flags|=65536,t&=-t,h.lanes|=t;var q=Vc(h,_,t);gc(h,q);break e}}h=h.return}while(h!==null)}kd(r)}catch(re){t=re,ze===r&&r!==null&&(ze=r=r.return);continue}break}while(!0)}function bd(){var e=_i.current;return _i.current=mi,e===null?mi:e}function Ml(){(Me===0||Me===3||Me===2)&&(Me=4),Ve===null||(Er&268435455)===0&&(bi&268435455)===0||cr(Ve,Je)}function Ci(e,t){var r=ve;ve|=2;var i=bd();(Ve!==e||Je!==t)&&(Vt=null,Tr(e,t));do try{Vp();break}catch(c){_d(e,c)}while(!0);if(Za(),ve=r,_i.current=i,ze!==null)throw Error(s(261));return Ve=null,Je=0,Me}function Vp(){for(;ze!==null;)jd(ze)}function qp(){for(;ze!==null&&!gf();)jd(ze)}function jd(e){var t=Ed(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?kd(e):ze=t,Rl.current=null}function kd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=zp(r,t,ft),r!==null){ze=r;return}}else{if(r=$p(r,t),r!==null){r.flags&=32767,ze=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,ze=null;return}}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);Me===0&&(Me=5)}function Pr(e,t,r){var i=be,c=yt.transition;try{yt.transition=null,be=1,Hp(e,t,r,i)}finally{yt.transition=c,be=i}return null}function Hp(e,t,r,i){do dn();while(or!==null);if((ve&6)!==0)throw Error(s(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(Nf(e,h),e===Ve&&(ze=Ve=null,Je=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||ki||(ki=!0,Cd(Os,function(){return dn(),null})),h=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||h){h=yt.transition,yt.transition=null;var m=be;be=1;var _=ve;ve|=4,Rl.current=null,Mp(e,r),pd(r,e),hp(Ma),Us=!!Ua,Ma=Ua=null,e.current=r,Bp(r),vf(),ve=_,be=m,yt.transition=h}else e.current=r;if(ki&&(ki=!1,or=e,Si=c),h=e.pendingLanes,h===0&&(lr=null),wf(r.stateNode),lt(e,Le()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],i(c.value,{componentStack:c.stack,digest:c.digest});if(ji)throw ji=!1,e=Al,Al=null,e;return(Si&1)!==0&&e.tag!==0&&dn(),h=e.pendingLanes,(h&1)!==0?e===Ll?ds++:(ds=0,Ll=e):ds=0,nr(),null}function dn(){if(or!==null){var e=hu(Si),t=yt.transition,r=be;try{if(yt.transition=null,be=16>e?16:e,or===null)var i=!1;else{if(e=or,or=null,Si=0,(ve&6)!==0)throw Error(s(331));var c=ve;for(ve|=4,X=e.current;X!==null;){var h=X,m=h.child;if((X.flags&16)!==0){var _=h.deletions;if(_!==null){for(var j=0;j<_.length;j++){var O=_[j];for(X=O;X!==null;){var M=X;switch(M.tag){case 0:case 11:case 15:os(8,M,h)}var F=M.child;if(F!==null)F.return=M,X=F;else for(;X!==null;){M=X;var U=M.sibling,G=M.return;if(ud(M),M===O){X=null;break}if(U!==null){U.return=G,X=U;break}X=G}}}var Z=h.alternate;if(Z!==null){var te=Z.child;if(te!==null){Z.child=null;do{var Ie=te.sibling;te.sibling=null,te=Ie}while(te!==null)}}X=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,X=m;else e:for(;X!==null;){if(h=X,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:os(9,h,h.return)}var E=h.sibling;if(E!==null){E.return=h.return,X=E;break e}X=h.return}}var k=e.current;for(X=k;X!==null;){m=X;var R=m.child;if((m.subtreeFlags&2064)!==0&&R!==null)R.return=m,X=R;else e:for(m=k;X!==null;){if(_=X,(_.flags&2048)!==0)try{switch(_.tag){case 0:case 11:case 15:wi(9,_)}}catch(re){Ae(_,_.return,re)}if(_===m){X=null;break e}var q=_.sibling;if(q!==null){q.return=_.return,X=q;break e}X=_.return}}if(ve=c,nr(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Ds,e)}catch{}i=!0}return i}finally{be=r,yt.transition=t}}return!1}function Sd(e,t,r){t=ln(r,t),t=Wc(e,t,1),e=ir(e,t,1),t=tt(),e!==null&&(Ln(e,1,t),lt(e,t))}function Ae(e,t,r){if(e.tag===3)Sd(e,e,r);else for(;t!==null;){if(t.tag===3){Sd(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lr===null||!lr.has(i))){e=ln(r,e),e=Vc(t,e,1),t=ir(t,e,1),e=tt(),t!==null&&(Ln(t,1,e),lt(t,e));break}}t=t.return}}function Kp(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&r,Ve===e&&(Je&r)===r&&(Me===4||Me===3&&(Je&130023424)===Je&&500>Le()-Dl?Tr(e,0):Ol|=r),lt(e,t)}function Nd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ls,Ls<<=1,(Ls&130023424)===0&&(Ls=4194304)));var r=tt();e=Bt(e,t),e!==null&&(Ln(e,t,r),lt(e,r))}function Jp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Nd(e,r)}function Qp(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}i!==null&&i.delete(t),Nd(e,r)}var Ed;Ed=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)it=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return it=!1,Ip(e,t,r);it=(e.flags&131072)!==0}else it=!1,Pe&&(t.flags&1048576)!==0&&ac(t,ni,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;yi(e,t),e=t.pendingProps;var c=Xr(t,Ge.current);sn(t,r),c=cl(null,t,i,e,c,r);var h=dl();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(i)?(h=!0,ei(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,nl(t),c.updater=gi,t.stateNode=c,c._reactInternals=t,vl(t,i,e,r),t=_l(null,t,i,!0,h,r)):(t.tag=0,Pe&&h&&Ka(t),et(null,t,c,r),t=t.child),t;case 16:i=t.elementType;e:{switch(yi(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=Yp(i),e=kt(i,e),c){case 0:t=wl(null,t,i,e,r);break e;case 1:t=Zc(null,t,i,e,r);break e;case 11:t=Jc(null,t,i,e,r);break e;case 14:t=Qc(null,t,i,kt(i.type,e),r);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:kt(i,c),wl(e,t,i,c,r);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:kt(i,c),Zc(e,t,i,c,r);case 3:e:{if(ed(t),e===null)throw Error(s(387));i=t.pendingProps,h=t.memoizedState,c=h.element,mc(e,t),ui(t,i,null,r);var m=t.memoizedState;if(i=m.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=ln(Error(s(423)),t),t=td(e,t,i,r,c);break e}else if(i!==c){c=ln(Error(s(424)),t),t=td(e,t,i,r,c);break e}else for(ht=er(t.stateNode.containerInfo.firstChild),dt=t,Pe=!0,jt=null,r=fc(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(tn(),i===c){t=Wt(e,t,r);break e}et(e,t,i,r)}t=t.child}return t;case 5:return yc(t),e===null&&Ga(t),i=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,m=c.children,Ba(i,c)?m=null:h!==null&&Ba(i,h)&&(t.flags|=32),Xc(e,t),et(e,t,m,r),t.child;case 6:return e===null&&Ga(t),null;case 13:return rd(e,t,r);case 4:return sl(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=rn(t,null,i,r):et(e,t,i,r),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:kt(i,c),Jc(e,t,i,c,r);case 7:return et(e,t,t.pendingProps,r),t.child;case 8:return et(e,t,t.pendingProps.children,r),t.child;case 12:return et(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,h=t.memoizedProps,m=c.value,ke(ai,i._currentValue),i._currentValue=m,h!==null)if(bt(h.value,m)){if(h.children===c.children&&!nt.current){t=Wt(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var _=h.dependencies;if(_!==null){m=h.child;for(var j=_.firstContext;j!==null;){if(j.context===i){if(h.tag===1){j=Ft(-1,r&-r),j.tag=2;var O=h.updateQueue;if(O!==null){O=O.shared;var M=O.pending;M===null?j.next=j:(j.next=M.next,M.next=j),O.pending=j}}h.lanes|=r,j=h.alternate,j!==null&&(j.lanes|=r),tl(h.return,r,t),_.lanes|=r;break}j=j.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(s(341));m.lanes|=r,_=m.alternate,_!==null&&(_.lanes|=r),tl(m,r,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}et(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,sn(t,r),c=gt(c),i=i(c),t.flags|=1,et(e,t,i,r),t.child;case 14:return i=t.type,c=kt(i,t.pendingProps),c=kt(i.type,c),Qc(e,t,i,c,r);case 15:return Gc(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:kt(i,c),yi(e,t),t.tag=1,st(i)?(e=!0,ei(t)):e=!1,sn(t,r),Bc(t,i,c),vl(t,i,c,r),_l(null,t,i,!0,e,r);case 19:return sd(e,t,r);case 22:return Yc(e,t,r)}throw Error(s(156,t.tag))};function Cd(e,t){return lu(e,t)}function Gp(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xt(e,t,r,i){return new Gp(e,t,r,i)}function Bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yp(e){if(typeof e=="function")return Bl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===z)return 11;if(e===D)return 14}return 2}function dr(e,t){var r=e.alternate;return r===null?(r=xt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ti(e,t,r,i,c,h){var m=2;if(i=e,typeof e=="function")Bl(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case Y:return Rr(r.children,c,h,t);case ae:m=8,c|=8;break;case Ne:return e=xt(12,r,t,c|2),e.elementType=Ne,e.lanes=h,e;case ie:return e=xt(13,r,t,c),e.elementType=ie,e.lanes=h,e;case le:return e=xt(19,r,t,c),e.elementType=le,e.lanes=h,e;case ee:return Pi(r,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case je:m=10;break e;case Re:m=9;break e;case z:m=11;break e;case D:m=14;break e;case ne:m=16,i=null;break e}throw Error(s(130,e==null?e:typeof e,""))}return t=xt(m,r,t,c),t.elementType=e,t.type=i,t.lanes=h,t}function Rr(e,t,r,i){return e=xt(7,e,i,t),e.lanes=r,e}function Pi(e,t,r,i){return e=xt(22,e,i,t),e.elementType=ee,e.lanes=r,e.stateNode={isHidden:!1},e}function Fl(e,t,r){return e=xt(6,e,null,t),e.lanes=r,e}function Wl(e,t,r){return t=xt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xp(e,t,r,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ga(0),this.expirationTimes=ga(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ga(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Vl(e,t,r,i,c,h,m,_,j){return e=new Xp(e,t,r,_,j),t===1?(t=1,h===!0&&(t|=8)):t=0,h=xt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},nl(h),e}function Zp(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function Td(e){if(!e)return rr;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(s(171))}if(e.tag===1){var r=e.type;if(st(r))return nc(e,r,t)}return t}function Pd(e,t,r,i,c,h,m,_,j){return e=Vl(r,i,!0,e,c,h,m,_,j),e.context=Td(null),r=e.current,i=tt(),c=ur(r),h=Ft(i,c),h.callback=t??null,ir(r,h,c),e.current.lanes=c,Ln(e,c,i),lt(e,i),e}function Ri(e,t,r,i){var c=t.current,h=tt(),m=ur(c);return r=Td(r),t.context===null?t.context=r:t.pendingContext=r,t=Ft(h,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ir(c,t,m),e!==null&&(Et(e,c,m,h),oi(e,c,m)),m}function Oi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ql(e,t){Rd(e,t),(e=e.alternate)&&Rd(e,t)}function em(){return null}var Od=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hl(e){this._internalRoot=e}Di.prototype.render=Hl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));Ri(e,t,null,null)},Di.prototype.unmount=Hl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cr(function(){Ri(null,e,null,null)}),t[zt]=null}};function Di(e){this._internalRoot=e}Di.prototype.unstable_scheduleHydration=function(e){if(e){var t=mu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Yt.length&&t!==0&&t<Yt[r].priority;r++);Yt.splice(r,0,e),r===0&&yu(e)}};function Kl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ai(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Dd(){}function tm(e,t,r,i,c){if(c){if(typeof i=="function"){var h=i;i=function(){var O=Oi(m);h.call(O)}}var m=Pd(t,i,e,0,null,!1,!1,"",Dd);return e._reactRootContainer=m,e[zt]=m.current,Qn(e.nodeType===8?e.parentNode:e),Cr(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var _=i;i=function(){var O=Oi(j);_.call(O)}}var j=Vl(e,0,!1,null,null,!1,!1,"",Dd);return e._reactRootContainer=j,e[zt]=j.current,Qn(e.nodeType===8?e.parentNode:e),Cr(function(){Ri(t,j,r,i)}),j}function Li(e,t,r,i,c){var h=r._reactRootContainer;if(h){var m=h;if(typeof c=="function"){var _=c;c=function(){var j=Oi(m);_.call(j)}}Ri(t,m,e,c)}else m=tm(r,t,e,c,i);return Oi(m)}fu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=An(t.pendingLanes);r!==0&&(va(t,r|1),lt(t,Le()),(ve&6)===0&&(cn=Le()+500,nr()))}break;case 13:Cr(function(){var i=Bt(e,1);if(i!==null){var c=tt();Et(i,e,1,c)}}),ql(e,1)}},ya=function(e){if(e.tag===13){var t=Bt(e,134217728);if(t!==null){var r=tt();Et(t,e,134217728,r)}ql(e,134217728)}},pu=function(e){if(e.tag===13){var t=ur(e),r=Bt(e,t);if(r!==null){var i=tt();Et(r,e,t,i)}ql(e,t)}},mu=function(){return be},gu=function(e,t){var r=be;try{return be=e,t()}finally{be=r}},ca=function(e,t,r){switch(t){case"input":if(ra(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var c=Xs(i);if(!c)throw Error(s(90));Mo(i),ra(i,c)}}}break;case"textarea":qo(e,r);break;case"select":t=r.value,t!=null&&Mr(e,!!r.multiple,t,!1)}},eu=$l,tu=Cr;var rm={usingClientEntryPoint:!1,Events:[Xn,Gr,Xs,Xo,Zo,$l]},hs={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nm={bundleType:hs.bundleType,version:hs.version,rendererPackageName:hs.rendererPackageName,rendererConfig:hs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iu(e),e===null?null:e.stateNode},findFiberByHostInstance:hs.findFiberByHostInstance||em,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ii.isDisabled&&Ii.supportsFiber)try{Ds=Ii.inject(nm),Rt=Ii}catch{}}return ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rm,ot.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kl(t))throw Error(s(200));return Zp(e,t,null,r)},ot.createRoot=function(e,t){if(!Kl(e))throw Error(s(299));var r=!1,i="",c=Od;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Vl(e,1,!1,null,null,r,!1,i,c),e[zt]=t.current,Qn(e.nodeType===8?e.parentNode:e),new Hl(t)},ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=iu(t),e=e===null?null:e.stateNode,e},ot.flushSync=function(e){return Cr(e)},ot.hydrate=function(e,t,r){if(!Ai(t))throw Error(s(200));return Li(null,e,t,!0,r)},ot.hydrateRoot=function(e,t,r){if(!Kl(e))throw Error(s(405));var i=r!=null&&r.hydratedSources||null,c=!1,h="",m=Od;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=Pd(t,null,e,1,r??null,c,!1,h,m),e[zt]=t.current,Qn(e),i)for(e=0;e<i.length;e++)r=i[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Di(t)},ot.render=function(e,t,r){if(!Ai(t))throw Error(s(200));return Li(null,e,t,!1,r)},ot.unmountComponentAtNode=function(e){if(!Ai(e))throw Error(s(40));return e._reactRootContainer?(Cr(function(){Li(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1},ot.unstable_batchedUpdates=$l,ot.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Ai(r))throw Error(s(200));if(e==null||e._reactInternals===void 0)throw Error(s(38));return Li(e,t,r,!1,i)},ot.version="18.3.1-next-f1338f8080-20240426",ot}var Bd;function Sh(){if(Bd)return Gl.exports;Bd=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Gl.exports=fm(),Gl.exports}var Fd;function pm(){if(Fd)return zi;Fd=1;var o=Sh();return zi.createRoot=o.createRoot,zi.hydrateRoot=o.hydrateRoot,zi}var mm=pm();const gm=o=>o instanceof Error?o.message+`
`+o.stack:JSON.stringify(o,null,2);class vm extends kh.Component{constructor(n){super(n),this.state={hasError:!1,error:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n}}render(){return this.state.hasError?l.jsxs("div",{className:"p-4 border border-red-500 rounded",children:[l.jsx("h2",{className:"text-red-500",children:"Something went wrong."}),l.jsx("pre",{className:"mt-2 text-sm",children:gm(this.state.error)})]}):this.props.children}}Sh();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xs(){return xs=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},xs.apply(this,arguments)}var gr;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(gr||(gr={}));const Wd="popstate";function ym(o){o===void 0&&(o={});function n(a,u){let{pathname:d,search:f,hash:p}=a.location;return uo("",{pathname:d,search:f,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(a,u){return typeof u=="string"?u:Eh(u)}return wm(n,s,null,o)}function $e(o,n){if(o===!1||o===null||typeof o>"u")throw new Error(n)}function Nh(o,n){if(!o){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function xm(){return Math.random().toString(36).substr(2,8)}function Vd(o,n){return{usr:o.state,key:o.key,idx:n}}function uo(o,n,s,a){return s===void 0&&(s=null),xs({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof n=="string"?Sn(n):n,{state:s,key:n&&n.key||a||xm()})}function Eh(o){let{pathname:n="/",search:s="",hash:a=""}=o;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(n+=a.charAt(0)==="#"?a:"#"+a),n}function Sn(o){let n={};if(o){let s=o.indexOf("#");s>=0&&(n.hash=o.substr(s),o=o.substr(0,s));let a=o.indexOf("?");a>=0&&(n.search=o.substr(a),o=o.substr(0,a)),o&&(n.pathname=o)}return n}function wm(o,n,s,a){a===void 0&&(a={});let{window:u=document.defaultView,v5Compat:d=!1}=a,f=u.history,p=gr.Pop,g=null,x=w();x==null&&(x=0,f.replaceState(xs({},f.state,{idx:x}),""));function w(){return(f.state||{idx:null}).idx}function y(){p=gr.Pop;let A=w(),K=A==null?null:A-x;x=A,g&&g({action:p,location:T.location,delta:K})}function b(A,K){p=gr.Push;let B=uo(T.location,A,K);x=w()+1;let $=Vd(B,x),I=T.createHref(B);try{f.pushState($,"",I)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;u.location.assign(I)}d&&g&&g({action:p,location:T.location,delta:1})}function C(A,K){p=gr.Replace;let B=uo(T.location,A,K);x=w();let $=Vd(B,x),I=T.createHref(B);f.replaceState($,"",I),d&&g&&g({action:p,location:T.location,delta:0})}function S(A){let K=u.location.origin!=="null"?u.location.origin:u.location.href,B=typeof A=="string"?A:Eh(A);return B=B.replace(/ $/,"%20"),$e(K,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,K)}let T={get action(){return p},get location(){return o(u,f)},listen(A){if(g)throw new Error("A history only accepts one active listener");return u.addEventListener(Wd,y),g=A,()=>{u.removeEventListener(Wd,y),g=null}},createHref(A){return n(u,A)},createURL:S,encodeLocation(A){let K=S(A);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:b,replace:C,go(A){return f.go(A)}};return T}var qd;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(qd||(qd={}));function _m(o,n,s){return s===void 0&&(s="/"),bm(o,n,s)}function bm(o,n,s,a){let u=typeof n=="string"?Sn(n):n,d=Ph(u.pathname||"/",s);if(d==null)return null;let f=Ch(o);jm(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let x=Lm(d);p=Om(f[g],x)}return p}function Ch(o,n,s,a){n===void 0&&(n=[]),s===void 0&&(s=[]),a===void 0&&(a="");let u=(d,f,p)=>{let g={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};g.relativePath.startsWith("/")&&($e(g.relativePath.startsWith(a),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(a.length));let x=Ir([a,g.relativePath]),w=s.concat(g);d.children&&d.children.length>0&&($e(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+x+'".')),Ch(d.children,n,w,x)),!(d.path==null&&!d.index)&&n.push({path:x,score:Pm(x,d.index),routesMeta:w})};return o.forEach((d,f)=>{var p;if(d.path===""||!((p=d.path)!=null&&p.includes("?")))u(d,f);else for(let g of Th(d.path))u(d,f,g)}),n}function Th(o){let n=o.split("/");if(n.length===0)return[];let[s,...a]=n,u=s.endsWith("?"),d=s.replace(/\?$/,"");if(a.length===0)return u?[d,""]:[d];let f=Th(a.join("/")),p=[];return p.push(...f.map(g=>g===""?d:[d,g].join("/"))),u&&p.push(...f),p.map(g=>o.startsWith("/")&&g===""?"/":g)}function jm(o){o.sort((n,s)=>n.score!==s.score?s.score-n.score:Rm(n.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const km=/^:[\w-]+$/,Sm=3,Nm=2,Em=1,Cm=10,Tm=-2,Hd=o=>o==="*";function Pm(o,n){let s=o.split("/"),a=s.length;return s.some(Hd)&&(a+=Tm),n&&(a+=Nm),s.filter(u=>!Hd(u)).reduce((u,d)=>u+(km.test(d)?Sm:d===""?Em:Cm),a)}function Rm(o,n){return o.length===n.length&&o.slice(0,-1).every((a,u)=>a===n[u])?o[o.length-1]-n[n.length-1]:0}function Om(o,n,s){let{routesMeta:a}=o,u={},d="/",f=[];for(let p=0;p<a.length;++p){let g=a[p],x=p===a.length-1,w=d==="/"?n:n.slice(d.length)||"/",y=Dm({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},w),b=g.route;if(!y)return null;Object.assign(u,y.params),f.push({params:u,pathname:Ir([d,y.pathname]),pathnameBase:Um(Ir([d,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(d=Ir([d,y.pathnameBase]))}return f}function Dm(o,n){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[s,a]=Am(o.path,o.caseSensitive,o.end),u=n.match(s);if(!u)return null;let d=u[0],f=d.replace(/(.)\/+$/,"$1"),p=u.slice(1);return{params:a.reduce((x,w,y)=>{let{paramName:b,isOptional:C}=w;if(b==="*"){let T=p[y]||"";f=d.slice(0,d.length-T.length).replace(/(.)\/+$/,"$1")}const S=p[y];return C&&!S?x[b]=void 0:x[b]=(S||"").replace(/%2F/g,"/"),x},{}),pathname:d,pathnameBase:f,pattern:o}}function Am(o,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),Nh(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let a=[],u="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(a.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(a.push({paramName:"*"}),u+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":o!==""&&o!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),a]}function Lm(o){try{return o.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Nh(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),o}}function Ph(o,n){if(n==="/")return o;if(!o.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,a=o.charAt(s);return a&&a!=="/"?null:o.slice(s)||"/"}function Im(o,n){n===void 0&&(n="/");let{pathname:s,search:a="",hash:u=""}=typeof o=="string"?Sn(o):o;return{pathname:s?s.startsWith("/")?s:zm(s,n):n,search:Mm(a),hash:Bm(u)}}function zm(o,n){let s=n.replace(/\/+$/,"").split("/");return o.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function Zl(o,n,s,a){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $m(o){return o.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function Rh(o,n){let s=$m(o);return n?s.map((a,u)=>u===s.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function Oh(o,n,s,a){a===void 0&&(a=!1);let u;typeof o=="string"?u=Sn(o):(u=xs({},o),$e(!u.pathname||!u.pathname.includes("?"),Zl("?","pathname","search",u)),$e(!u.pathname||!u.pathname.includes("#"),Zl("#","pathname","hash",u)),$e(!u.search||!u.search.includes("#"),Zl("#","search","hash",u)));let d=o===""||u.pathname==="",f=d?"/":u.pathname,p;if(f==null)p=s;else{let y=n.length-1;if(!a&&f.startsWith("..")){let b=f.split("/");for(;b[0]==="..";)b.shift(),y-=1;u.pathname=b.join("/")}p=y>=0?n[y]:"/"}let g=Im(u,p),x=f&&f!=="/"&&f.endsWith("/"),w=(d||f===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(x||w)&&(g.pathname+="/"),g}const Ir=o=>o.join("/").replace(/\/\/+/g,"/"),Um=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),Mm=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,Bm=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function Fm(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const Dh=["post","put","patch","delete"];new Set(Dh);const Wm=["get",...Dh];new Set(Wm);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ws(){return ws=Object.assign?Object.assign.bind():function(o){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},ws.apply(this,arguments)}const Eo=L.createContext(null),Vm=L.createContext(null),js=L.createContext(null),Gi=L.createContext(null),$r=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Ah=L.createContext(null);function ks(){return L.useContext(Gi)!=null}function Co(){return ks()||$e(!1),L.useContext(Gi).location}function Lh(o){L.useContext(js).static||L.useLayoutEffect(o)}function qm(){let{isDataRoute:o}=L.useContext($r);return o?sg():Hm()}function Hm(){ks()||$e(!1);let o=L.useContext(Eo),{basename:n,future:s,navigator:a}=L.useContext(js),{matches:u}=L.useContext($r),{pathname:d}=Co(),f=JSON.stringify(Rh(u,s.v7_relativeSplatPath)),p=L.useRef(!1);return Lh(()=>{p.current=!0}),L.useCallback(function(x,w){if(w===void 0&&(w={}),!p.current)return;if(typeof x=="number"){a.go(x);return}let y=Oh(x,JSON.parse(f),d,w.relative==="path");o==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:Ir([n,y.pathname])),(w.replace?a.replace:a.push)(y,w.state,w)},[n,a,f,d,o])}function Km(o,n){return Jm(o,n)}function Jm(o,n,s,a){ks()||$e(!1);let{navigator:u,static:d}=L.useContext(js),{matches:f}=L.useContext($r),p=f[f.length-1],g=p?p.params:{};p&&p.pathname;let x=p?p.pathnameBase:"/";p&&p.route;let w=Co(),y;if(n){var b;let K=typeof n=="string"?Sn(n):n;x==="/"||(b=K.pathname)!=null&&b.startsWith(x)||$e(!1),y=K}else y=w;let C=y.pathname||"/",S=C;if(x!=="/"){let K=x.replace(/^\//,"").split("/");S="/"+C.replace(/^\//,"").split("/").slice(K.length).join("/")}let T=_m(o,{pathname:S}),A=Zm(T&&T.map(K=>Object.assign({},K,{params:Object.assign({},g,K.params),pathname:Ir([x,u.encodeLocation?u.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?x:Ir([x,u.encodeLocation?u.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),f,s,a);return n&&A?L.createElement(Gi.Provider,{value:{location:ws({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:gr.Pop}},A):A}function Qm(){let o=ng(),n=Fm(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),s=o instanceof Error?o.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},n),s?L.createElement("pre",{style:u},s):null,null)}const Gm=L.createElement(Qm,null);class Ym extends L.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?L.createElement($r.Provider,{value:this.props.routeContext},L.createElement(Ah.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xm(o){let{routeContext:n,match:s,children:a}=o,u=L.useContext(Eo);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),L.createElement($r.Provider,{value:n},a)}function Zm(o,n,s,a){var u;if(n===void 0&&(n=[]),s===void 0&&(s=null),a===void 0&&(a=null),o==null){var d;if(!s)return null;if(s.errors)o=s.matches;else if((d=a)!=null&&d.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)o=s.matches;else return null}let f=o,p=(u=s)==null?void 0:u.errors;if(p!=null){let w=f.findIndex(y=>y.route.id&&(p==null?void 0:p[y.route.id])!==void 0);w>=0||$e(!1),f=f.slice(0,Math.min(f.length,w+1))}let g=!1,x=-1;if(s&&a&&a.v7_partialHydration)for(let w=0;w<f.length;w++){let y=f[w];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(x=w),y.route.id){let{loaderData:b,errors:C}=s,S=y.route.loader&&b[y.route.id]===void 0&&(!C||C[y.route.id]===void 0);if(y.route.lazy||S){g=!0,x>=0?f=f.slice(0,x+1):f=[f[0]];break}}}return f.reduceRight((w,y,b)=>{let C,S=!1,T=null,A=null;s&&(C=p&&y.route.id?p[y.route.id]:void 0,T=y.route.errorElement||Gm,g&&(x<0&&b===0?(ig("route-fallback"),S=!0,A=null):x===b&&(S=!0,A=y.route.hydrateFallbackElement||null)));let K=n.concat(f.slice(0,b+1)),B=()=>{let $;return C?$=T:S?$=A:y.route.Component?$=L.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=w,L.createElement(Xm,{match:y,routeContext:{outlet:w,matches:K,isDataRoute:s!=null},children:$})};return s&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?L.createElement(Ym,{location:s.location,revalidation:s.revalidation,component:T,error:C,children:B(),routeContext:{outlet:null,matches:K,isDataRoute:!0}}):B()},null)}var Ih=function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o}(Ih||{}),zh=function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o}(zh||{});function eg(o){let n=L.useContext(Eo);return n||$e(!1),n}function tg(o){let n=L.useContext(Vm);return n||$e(!1),n}function rg(o){let n=L.useContext($r);return n||$e(!1),n}function $h(o){let n=rg(),s=n.matches[n.matches.length-1];return s.route.id||$e(!1),s.route.id}function ng(){var o;let n=L.useContext(Ah),s=tg(),a=$h();return n!==void 0?n:(o=s.errors)==null?void 0:o[a]}function sg(){let{router:o}=eg(Ih.UseNavigateStable),n=$h(zh.UseNavigateStable),s=L.useRef(!1);return Lh(()=>{s.current=!0}),L.useCallback(function(u,d){d===void 0&&(d={}),s.current&&(typeof u=="number"?o.navigate(u):o.navigate(u,ws({fromRouteId:n},d)))},[o,n])}const Kd={};function ig(o,n,s){Kd[o]||(Kd[o]=!0)}function ag(o,n){o==null||o.v7_startTransition,o==null||o.v7_relativeSplatPath}function Hi(o){let{to:n,replace:s,state:a,relative:u}=o;ks()||$e(!1);let{future:d,static:f}=L.useContext(js),{matches:p}=L.useContext($r),{pathname:g}=Co(),x=qm(),w=Oh(n,Rh(p,d.v7_relativeSplatPath),g,u==="path"),y=JSON.stringify(w);return L.useEffect(()=>x(JSON.parse(y),{replace:s,state:a,relative:u}),[x,y,u,s,a]),null}function qt(o){$e(!1)}function lg(o){let{basename:n="/",children:s=null,location:a,navigationType:u=gr.Pop,navigator:d,static:f=!1,future:p}=o;ks()&&$e(!1);let g=n.replace(/^\/*/,"/"),x=L.useMemo(()=>({basename:g,navigator:d,static:f,future:ws({v7_relativeSplatPath:!1},p)}),[g,p,d,f]);typeof a=="string"&&(a=Sn(a));let{pathname:w="/",search:y="",hash:b="",state:C=null,key:S="default"}=a,T=L.useMemo(()=>{let A=Ph(w,g);return A==null?null:{location:{pathname:A,search:y,hash:b,state:C,key:S},navigationType:u}},[g,w,y,b,C,S,u]);return T==null?null:L.createElement(js.Provider,{value:x},L.createElement(Gi.Provider,{children:s,value:T}))}function og(o){let{children:n,location:s}=o;return Km(co(n),s)}new Promise(()=>{});function co(o,n){n===void 0&&(n=[]);let s=[];return L.Children.forEach(o,(a,u)=>{if(!L.isValidElement(a))return;let d=[...n,u];if(a.type===L.Fragment){s.push.apply(s,co(a.props.children,d));return}a.type!==qt&&$e(!1),!a.props.index||!a.props.children||$e(!1);let f={id:a.props.id||d.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(f.children=co(a.props.children,d)),s.push(f)}),s}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ug="6";try{window.__reactRouterVersion=ug}catch{}const cg="startTransition",Jd=cm[cg];function dg(o){let{basename:n,children:s,future:a,window:u}=o,d=L.useRef();d.current==null&&(d.current=ym({window:u,v5Compat:!0}));let f=d.current,[p,g]=L.useState({action:f.action,location:f.location}),{v7_startTransition:x}=a||{},w=L.useCallback(y=>{x&&Jd?Jd(()=>g(y)):g(y)},[g,x]);return L.useLayoutEffect(()=>f.listen(w),[f,w]),L.useEffect(()=>ag(a),[a]),L.createElement(lg,{basename:n,children:s,location:p.location,navigationType:p.action,navigator:f,future:a})}var Qd;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(Qd||(Qd={}));var Gd;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(Gd||(Gd={}));const hg="modulepreload",fg=function(o){return"/"+o},Yd={},Ss=function(n,s,a){let u=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));u=Promise.allSettled(s.map(g=>{if(g=fg(g),g in Yd)return;Yd[g]=!0;const x=g.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${w}`))return;const y=document.createElement("link");if(y.rel=x?"stylesheet":hg,x||(y.as="script"),y.crossOrigin="",y.href=g,p&&y.setAttribute("nonce",p),document.head.appendChild(y),x)return new Promise((b,C)=>{y.addEventListener("load",b),y.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return u.then(f=>{for(const p of f||[])p.status==="rejected"&&d(p.reason);return n().catch(d)})},pg=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>Ss(async()=>{const{default:a}=await Promise.resolve().then(()=>Nn);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)};class To extends Error{constructor(n,s="FunctionsError",a){super(n),this.name=s,this.context=a}}class mg extends To{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Xd extends To{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Zd extends To{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var ho;(function(o){o.Any="any",o.ApNortheast1="ap-northeast-1",o.ApNortheast2="ap-northeast-2",o.ApSouth1="ap-south-1",o.ApSoutheast1="ap-southeast-1",o.ApSoutheast2="ap-southeast-2",o.CaCentral1="ca-central-1",o.EuCentral1="eu-central-1",o.EuWest1="eu-west-1",o.EuWest2="eu-west-2",o.EuWest3="eu-west-3",o.SaEast1="sa-east-1",o.UsEast1="us-east-1",o.UsWest1="us-west-1",o.UsWest2="us-west-2"})(ho||(ho={}));var gg=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};class vg{constructor(n,{headers:s={},customFetch:a,region:u=ho.Any}={}){this.url=n,this.headers=s,this.region=u,this.fetch=pg(a)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,s={}){var a;return gg(this,void 0,void 0,function*(){try{const{headers:u,method:d,body:f}=s;let p={},{region:g}=s;g||(g=this.region);const x=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,x.searchParams.set("forceFunctionRegion",g));let w;f&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(p["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(p["Content-Type"]="application/json",w=JSON.stringify(f)));const y=yield this.fetch(x.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),u),body:w}).catch(T=>{throw new mg(T)}),b=y.headers.get("x-relay-error");if(b&&b==="true")throw new Xd(y);if(!y.ok)throw new Zd(y);let C=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return C==="application/json"?S=yield y.json():C==="application/octet-stream"?S=yield y.blob():C==="text/event-stream"?S=y:C==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(u){return{data:null,error:u,response:u instanceof Zd||u instanceof Xd?u.context:void 0}}})}}var He={},hn={},fn={},pn={},mn={},gn={},yg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},kn=yg();const xg=kn.fetch,Uh=kn.fetch.bind(kn),Mh=kn.Headers,wg=kn.Request,_g=kn.Response,Nn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mh,Request:wg,Response:_g,default:Uh,fetch:xg},Symbol.toStringTag,{value:"Module"})),bg=am(Nn);var $i={},eh;function Bh(){if(eh)return $i;eh=1,Object.defineProperty($i,"__esModule",{value:!0});class o extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return $i.default=o,$i}var th;function Fh(){if(th)return gn;th=1;var o=gn&&gn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(gn,"__esModule",{value:!0});const n=o(bg),s=o(Bh());class a{constructor(d){var f,p;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(f=d.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=d.signal,this.isMaybeSingle=(p=d.isMaybeSingle)!==null&&p!==void 0?p:!1,d.fetch?this.fetch=d.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,f){return this.headers=new Headers(this.headers),this.headers.set(d,f),this}then(d,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var w,y,b,C;let S=null,T=null,A=null,K=x.status,B=x.statusText;if(x.ok){if(this.method!=="HEAD"){const H=await x.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?T=H:T=JSON.parse(H))}const I=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),W=(b=x.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");I&&W&&W.length>1&&(A=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(T)&&(T.length>1?(S={code:"PGRST116",details:`Results contain ${T.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},T=null,A=null,K=406,B="Not Acceptable"):T.length===1?T=T[0]:T=null)}else{const I=await x.text();try{S=JSON.parse(I),Array.isArray(S)&&x.status===404&&(T=[],S=null,K=200,B="OK")}catch{x.status===404&&I===""?(K=204,B="No Content"):S={message:I}}if(S&&this.isMaybeSingle&&(!((C=S==null?void 0:S.details)===null||C===void 0)&&C.includes("0 rows"))&&(S=null,K=200,B="OK"),S&&this.shouldThrowOnError)throw new s.default(S)}return{error:S,data:T,count:A,status:K,statusText:B}});return this.shouldThrowOnError||(g=g.catch(x=>{var w,y,b;return{error:{message:`${(w=x==null?void 0:x.name)!==null&&w!==void 0?w:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(y=x==null?void 0:x.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(b=x==null?void 0:x.code)!==null&&b!==void 0?b:""}`},data:null,count:null,status:0,statusText:""}})),g.then(d,f)}returns(){return this}overrideTypes(){return this}}return gn.default=a,gn}var rh;function Wh(){if(rh)return mn;rh=1;var o=mn&&mn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(mn,"__esModule",{value:!0});const n=o(Fh());class s extends n.default{select(u){let d=!1;const f=(u??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",f),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:d=!0,nullsFirst:f,foreignTable:p,referencedTable:g=p}={}){const x=g?`${g}.order`:"order",w=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${w?`${w},`:""}${u}.${d?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:d,referencedTable:f=d}={}){const p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${u}`),this}range(u,d,{foreignTable:f,referencedTable:p=f}={}){const g=typeof p>"u"?"offset":`${p}.offset`,x=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${u}`),this.url.searchParams.set(x,`${d-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:d=!1,settings:f=!1,buffers:p=!1,wal:g=!1,format:x="text"}={}){var w;const y=[u?"analyze":null,d?"verbose":null,f?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),b=(w=this.headers.get("Accept"))!==null&&w!==void 0?w:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${x}; for="${b}"; options=${y};`),x==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}}return mn.default=s,mn}var nh;function Po(){if(nh)return pn;nh=1;var o=pn&&pn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(pn,"__esModule",{value:!0});const n=o(Wh());class s extends n.default{eq(u,d){return this.url.searchParams.append(u,`eq.${d}`),this}neq(u,d){return this.url.searchParams.append(u,`neq.${d}`),this}gt(u,d){return this.url.searchParams.append(u,`gt.${d}`),this}gte(u,d){return this.url.searchParams.append(u,`gte.${d}`),this}lt(u,d){return this.url.searchParams.append(u,`lt.${d}`),this}lte(u,d){return this.url.searchParams.append(u,`lte.${d}`),this}like(u,d){return this.url.searchParams.append(u,`like.${d}`),this}likeAllOf(u,d){return this.url.searchParams.append(u,`like(all).{${d.join(",")}}`),this}likeAnyOf(u,d){return this.url.searchParams.append(u,`like(any).{${d.join(",")}}`),this}ilike(u,d){return this.url.searchParams.append(u,`ilike.${d}`),this}ilikeAllOf(u,d){return this.url.searchParams.append(u,`ilike(all).{${d.join(",")}}`),this}ilikeAnyOf(u,d){return this.url.searchParams.append(u,`ilike(any).{${d.join(",")}}`),this}is(u,d){return this.url.searchParams.append(u,`is.${d}`),this}in(u,d){const f=Array.from(new Set(d)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(u,`in.(${f})`),this}contains(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cs.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cs.{${d.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(d)}`),this}containedBy(u,d){return typeof d=="string"?this.url.searchParams.append(u,`cd.${d}`):Array.isArray(d)?this.url.searchParams.append(u,`cd.{${d.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(d)}`),this}rangeGt(u,d){return this.url.searchParams.append(u,`sr.${d}`),this}rangeGte(u,d){return this.url.searchParams.append(u,`nxl.${d}`),this}rangeLt(u,d){return this.url.searchParams.append(u,`sl.${d}`),this}rangeLte(u,d){return this.url.searchParams.append(u,`nxr.${d}`),this}rangeAdjacent(u,d){return this.url.searchParams.append(u,`adj.${d}`),this}overlaps(u,d){return typeof d=="string"?this.url.searchParams.append(u,`ov.${d}`):this.url.searchParams.append(u,`ov.{${d.join(",")}}`),this}textSearch(u,d,{config:f,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const x=f===void 0?"":`(${f})`;return this.url.searchParams.append(u,`${g}fts${x}.${d}`),this}match(u){return Object.entries(u).forEach(([d,f])=>{this.url.searchParams.append(d,`eq.${f}`)}),this}not(u,d,f){return this.url.searchParams.append(u,`not.${d}.${f}`),this}or(u,{foreignTable:d,referencedTable:f=d}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${u})`),this}filter(u,d,f){return this.url.searchParams.append(u,`${d}.${f}`),this}}return pn.default=s,pn}var sh;function Vh(){if(sh)return fn;sh=1;var o=fn&&fn.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(fn,"__esModule",{value:!0});const n=o(Po());class s{constructor(u,{headers:d={},schema:f,fetch:p}){this.url=u,this.headers=new Headers(d),this.schema=f,this.fetch=p}select(u,{head:d=!1,count:f}={}){const p=d?"HEAD":"GET";let g=!1;const x=(u??"*").split("").map(w=>/\s/.test(w)&&!g?"":(w==='"'&&(g=!g),w)).join("");return this.url.searchParams.set("select",x),f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(u,{count:d,defaultToNull:f=!0}={}){var p;const g="POST";if(d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const x=u.reduce((w,y)=>w.concat(Object.keys(y)),[]);if(x.length>0){const w=[...new Set(x)].map(y=>`"${y}"`);this.url.searchParams.set("columns",w.join(","))}}return new n.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(u,{onConflict:d,ignoreDuplicates:f=!1,count:p,defaultToNull:g=!0}={}){var x;const w="POST";if(this.headers.append("Prefer",`resolution=${f?"ignore":"merge"}-duplicates`),d!==void 0&&this.url.searchParams.set("on_conflict",d),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(u)){const y=u.reduce((b,C)=>b.concat(Object.keys(C)),[]);if(y.length>0){const b=[...new Set(y)].map(C=>`"${C}"`);this.url.searchParams.set("columns",b.join(","))}}return new n.default({method:w,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}update(u,{count:d}={}){var f;const p="PATCH";return d&&this.headers.append("Prefer",`count=${d}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:u,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}delete({count:u}={}){var d;const f="DELETE";return u&&this.headers.append("Prefer",`count=${u}`),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return fn.default=s,fn}var ih;function jg(){if(ih)return hn;ih=1;var o=hn&&hn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(hn,"__esModule",{value:!0});const n=o(Vh()),s=o(Po());class a{constructor(d,{headers:f={},schema:p,fetch:g}={}){this.url=d,this.headers=new Headers(f),this.schemaName=p,this.fetch=g}from(d){const f=new URL(`${this.url}/${d}`);return new n.default(f,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(d){return new a(this.url,{headers:this.headers,schema:d,fetch:this.fetch})}rpc(d,f={},{head:p=!1,get:g=!1,count:x}={}){var w;let y;const b=new URL(`${this.url}/rpc/${d}`);let C;p||g?(y=p?"HEAD":"GET",Object.entries(f).filter(([T,A])=>A!==void 0).map(([T,A])=>[T,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([T,A])=>{b.searchParams.append(T,A)})):(y="POST",C=f);const S=new Headers(this.headers);return x&&S.set("Prefer",`count=${x}`),new s.default({method:y,url:b,headers:S,schema:this.schemaName,body:C,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}}return hn.default=a,hn}var ah;function kg(){if(ah)return He;ah=1;var o=He&&He.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(He,"__esModule",{value:!0}),He.PostgrestError=He.PostgrestBuilder=He.PostgrestTransformBuilder=He.PostgrestFilterBuilder=He.PostgrestQueryBuilder=He.PostgrestClient=void 0;const n=o(jg());He.PostgrestClient=n.default;const s=o(Vh());He.PostgrestQueryBuilder=s.default;const a=o(Po());He.PostgrestFilterBuilder=a.default;const u=o(Wh());He.PostgrestTransformBuilder=u.default;const d=o(Fh());He.PostgrestBuilder=d.default;const f=o(Bh());return He.PostgrestError=f.default,He.default={PostgrestClient:n.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:u.default,PostgrestBuilder:d.default,PostgrestError:f.default},He}var Sg=kg();const Ng=jh(Sg),{PostgrestClient:Eg,PostgrestQueryBuilder:Bv,PostgrestFilterBuilder:Fv,PostgrestTransformBuilder:Wv,PostgrestBuilder:Vv,PostgrestError:qv}=Ng;class Cg{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const a=s.node,u=parseInt(a.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let s=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(s+=`

Suggested solution: ${n.workaround}`),new Error(s)}static createWebSocket(n,s){const a=this.getWebSocketConstructor();return new a(n,s)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Tg="2.15.5",Pg=`realtime-js/${Tg}`,Rg="1.0.0",fo=1e4,Og=1e3,Dg=100;var gs;(function(o){o[o.connecting=0]="connecting",o[o.open=1]="open",o[o.closing=2]="closing",o[o.closed=3]="closed"})(gs||(gs={}));var Be;(function(o){o.closed="closed",o.errored="errored",o.joined="joined",o.joining="joining",o.leaving="leaving"})(Be||(Be={}));var Tt;(function(o){o.close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token"})(Tt||(Tt={}));var po;(function(o){o.websocket="websocket"})(po||(po={}));var Lr;(function(o){o.Connecting="connecting",o.Open="open",o.Closing="closing",o.Closed="closed"})(Lr||(Lr={}));class Ag{constructor(){this.HEADER_LENGTH=1}decode(n,s){return n.constructor===ArrayBuffer?s(this._binaryDecode(n)):s(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const s=new DataView(n),a=new TextDecoder;return this._decodeBroadcast(n,s,a)}_decodeBroadcast(n,s,a){const u=s.getUint8(1),d=s.getUint8(2);let f=this.HEADER_LENGTH+2;const p=a.decode(n.slice(f,f+u));f=f+u;const g=a.decode(n.slice(f,f+d));f=f+d;const x=JSON.parse(a.decode(n.slice(f,n.byteLength)));return{ref:null,topic:p,event:g,payload:x}}}class qh{constructor(n,s){this.callback=n,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Se;(function(o){o.abstime="abstime",o.bool="bool",o.date="date",o.daterange="daterange",o.float4="float4",o.float8="float8",o.int2="int2",o.int4="int4",o.int4range="int4range",o.int8="int8",o.int8range="int8range",o.json="json",o.jsonb="jsonb",o.money="money",o.numeric="numeric",o.oid="oid",o.reltime="reltime",o.text="text",o.time="time",o.timestamp="timestamp",o.timestamptz="timestamptz",o.timetz="timetz",o.tsrange="tsrange",o.tstzrange="tstzrange"})(Se||(Se={}));const lh=(o,n,s={})=>{var a;const u=(a=s.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(n).reduce((d,f)=>(d[f]=Lg(f,o,n,u),d),{})},Lg=(o,n,s,a)=>{const u=n.find(p=>p.name===o),d=u==null?void 0:u.type,f=s[o];return d&&!a.includes(d)?Hh(d,f):mo(f)},Hh=(o,n)=>{if(o.charAt(0)==="_"){const s=o.slice(1,o.length);return Ug(n,s)}switch(o){case Se.bool:return Ig(n);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return zg(n);case Se.json:case Se.jsonb:return $g(n);case Se.timestamp:return Mg(n);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return mo(n);default:return mo(n)}},mo=o=>o,Ig=o=>{switch(o){case"t":return!0;case"f":return!1;default:return o}},zg=o=>{if(typeof o=="string"){const n=parseFloat(o);if(!Number.isNaN(n))return n}return o},$g=o=>{if(typeof o=="string")try{return JSON.parse(o)}catch(n){return console.log(`JSON parse error: ${n}`),o}return o},Ug=(o,n)=>{if(typeof o!="string")return o;const s=o.length-1,a=o[s];if(o[0]==="{"&&a==="}"){let d;const f=o.slice(1,s);try{d=JSON.parse("["+f+"]")}catch{d=f?f.split(","):[]}return d.map(p=>Hh(n,p))}return o},Mg=o=>typeof o=="string"?o.replace(" ","T"):o,Kh=o=>{let n=o;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class eo{constructor(n,s,a={},u=fo){this.channel=n,this.event=s,this.payload=a,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,s){var a;return this._hasReceived(n)&&s((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:n,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:s}){this.recHooks.filter(a=>a.status===n).forEach(a=>a.callback(s))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var oh;(function(o){o.SYNC="sync",o.JOIN="join",o.LEAVE="leave"})(oh||(oh={}));class vs{constructor(n,s){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vs.syncState(this.state,u,d,f),this.pendingDiffs.forEach(g=>{this.state=vs.syncDiff(this.state,g,d,f)}),this.pendingDiffs=[],p()}),this.channel._on(a.diff,{},u=>{const{onJoin:d,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=vs.syncDiff(this.state,u,d,f),p())}),this.onJoin((u,d,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:d,newPresences:f})}),this.onLeave((u,d,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:d,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,s,a,u){const d=this.cloneDeep(n),f=this.transformState(s),p={},g={};return this.map(d,(x,w)=>{f[x]||(g[x]=w)}),this.map(f,(x,w)=>{const y=d[x];if(y){const b=w.map(A=>A.presence_ref),C=y.map(A=>A.presence_ref),S=w.filter(A=>C.indexOf(A.presence_ref)<0),T=y.filter(A=>b.indexOf(A.presence_ref)<0);S.length>0&&(p[x]=S),T.length>0&&(g[x]=T)}else p[x]=w}),this.syncDiff(d,{joins:p,leaves:g},a,u)}static syncDiff(n,s,a,u){const{joins:d,leaves:f}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return a||(a=()=>{}),u||(u=()=>{}),this.map(d,(p,g)=>{var x;const w=(x=n[p])!==null&&x!==void 0?x:[];if(n[p]=this.cloneDeep(g),w.length>0){const y=n[p].map(C=>C.presence_ref),b=w.filter(C=>y.indexOf(C.presence_ref)<0);n[p].unshift(...b)}a(p,w,g)}),this.map(f,(p,g)=>{let x=n[p];if(!x)return;const w=g.map(y=>y.presence_ref);x=x.filter(y=>w.indexOf(y.presence_ref)<0),n[p]=x,u(p,x,g),x.length===0&&delete n[p]}),n}static map(n,s){return Object.getOwnPropertyNames(n).map(a=>s(a,n[a]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((s,a)=>{const u=n[a];return"metas"in u?s[a]=u.metas.map(d=>(d.presence_ref=d.phx_ref,delete d.phx_ref,delete d.phx_ref_prev,d)):s[a]=u,s},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var uh;(function(o){o.ALL="*",o.INSERT="INSERT",o.UPDATE="UPDATE",o.DELETE="DELETE"})(uh||(uh={}));var ys;(function(o){o.BROADCAST="broadcast",o.PRESENCE="presence",o.POSTGRES_CHANGES="postgres_changes",o.SYSTEM="system"})(ys||(ys={}));var Kt;(function(o){o.SUBSCRIBED="SUBSCRIBED",o.TIMED_OUT="TIMED_OUT",o.CLOSED="CLOSED",o.CHANNEL_ERROR="CHANNEL_ERROR"})(Kt||(Kt={}));class Ro{constructor(n,s={config:{}},a){this.topic=n,this.params=s,this.socket=a,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new eo(this,Tt.join,this.params,this.timeout),this.rejoinTimer=new qh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tt.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new vs(this),this.broadcastEndpointURL=Kh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,s=this.timeout){var a,u,d;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:f,presence:p,private:g}}=this.params,x=(u=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(C=>C.filter))!==null&&u!==void 0?u:[],w=!!this.bindings[ys.PRESENCE]&&this.bindings[ys.PRESENCE].length>0||((d=this.params.config.presence)===null||d===void 0?void 0:d.enabled)===!0,y={},b={broadcast:f,presence:Object.assign(Object.assign({},p),{enabled:w}),postgres_changes:x,private:g};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(C=>n==null?void 0:n(Kt.CHANNEL_ERROR,C)),this._onClose(()=>n==null?void 0:n(Kt.CLOSED)),this.updateJoinPayload(Object.assign({config:b},y)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:C})=>{var S;if(this.socket.setAuth(),C===void 0){n==null||n(Kt.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,A=(S=T==null?void 0:T.length)!==null&&S!==void 0?S:0,K=[];for(let B=0;B<A;B++){const $=T[B],{filter:{event:I,schema:W,table:H,filter:Y}}=$,ae=C&&C[B];if(ae&&ae.event===I&&ae.schema===W&&ae.table===H&&ae.filter===Y)K.push(Object.assign(Object.assign({},$),{id:ae.id}));else{this.unsubscribe(),this.state=Be.errored,n==null||n(Kt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=K,n&&n(Kt.SUBSCRIBED);return}}).receive("error",C=>{this.state=Be.errored,n==null||n(Kt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Kt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,s={}){return await this.send({type:"presence",event:"track",payload:n},s.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,s,a){return this.state===Be.joined&&n===ys.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,s,a)}async send(n,s={}){var a,u;if(!this._canPush()&&n.type==="broadcast"){const{event:d,payload:f}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:d,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);return await((u=x.body)===null||u===void 0?void 0:u.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(d=>{var f,p,g;const x=this._push(n.type,n,s.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&d("ok"),x.receive("ok",()=>d("ok")),x.receive("error",()=>d("error")),x.receive("timeout",()=>d("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Be.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tt.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(u=>{a=new eo(this,Tt.leave,{},n),a.receive("ok",()=>{s(),u("ok")}).receive("timeout",()=>{s(),u("timed out")}).receive("error",()=>{u("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Be.closed,this.bindings={}}async _fetchWithTimeout(n,s,a){const u=new AbortController,d=setTimeout(()=>u.abort(),a),f=await this.socket.fetch(n,Object.assign(Object.assign({},s),{signal:u.signal}));return clearTimeout(d),f}_push(n,s,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new eo(this,n,s,a);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Dg){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(n,s,a){return s}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,s,a){var u,d;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:x,join:w}=Tt;if(a&&[p,g,x,w].indexOf(f)>=0&&a!==this._joinRef())return;let b=this._onMessage(f,s,a);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(C=>{var S,T,A;return((S=C.filter)===null||S===void 0?void 0:S.event)==="*"||((A=(T=C.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===f}).map(C=>C.callback(b,a)):(d=this.bindings[f])===null||d===void 0||d.filter(C=>{var S,T,A,K,B,$;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in C){const I=C.id,W=(S=C.filter)===null||S===void 0?void 0:S.event;return I&&((T=s.ids)===null||T===void 0?void 0:T.includes(I))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((A=s.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const I=(B=(K=C==null?void 0:C.filter)===null||K===void 0?void 0:K.event)===null||B===void 0?void 0:B.toLocaleLowerCase();return I==="*"||I===(($=s==null?void 0:s.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===f}).map(C=>{if(typeof b=="object"&&"ids"in b){const S=b.data,{schema:T,table:A,commit_timestamp:K,type:B,errors:$}=S;b=Object.assign(Object.assign({},{schema:T,table:A,commit_timestamp:K,eventType:B,new:{},old:{},errors:$}),this._getPayloadRecords(S))}C.callback(b,a)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,s,a){const u=n.toLocaleLowerCase(),d={type:u,filter:s,callback:a};return this.bindings[u]?this.bindings[u].push(d):this.bindings[u]=[d],this}_off(n,s){const a=n.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(u=>{var d;return!(((d=u.type)===null||d===void 0?void 0:d.toLocaleLowerCase())===a&&Ro.isEqual(u.filter,s))})),this}static isEqual(n,s){if(Object.keys(n).length!==Object.keys(s).length)return!1;for(const a in n)if(n[a]!==s[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Tt.close,{},n)}_onError(n){this._on(Tt.error,{},s=>n(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const s={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(s.new=lh(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(s.old=lh(n.columns,n.old_record)),s}}const to=()=>{},Ui={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bg=[1e3,2e3,5e3,1e4],Fg=1e4,Wg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vg{constructor(n,s){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fo,this.transport=null,this.heartbeatIntervalMs=Ui.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=to,this.ref=0,this.reconnectTimer=null,this.logger=to,this.conn=null,this.sendBuffer=[],this.serializer=new Ag,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=u=>{let d;return u?d=u:typeof fetch>"u"?d=(...f)=>Ss(async()=>{const{default:p}=await Promise.resolve().then(()=>Nn);return{default:p}},void 0).then(({default:p})=>p(...f)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):d=fetch,(...f)=>d(...f)},!(!((a=s==null?void 0:s.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${n}/${po.websocket}`,this.httpEndpoint=Kh(n),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cg.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const s=n.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Rg}))}disconnect(n,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},n?this.conn.close(n,s??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const s=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const n=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,s,a){this.logger(n,s,a)}connectionState(){switch(this.conn&&this.conn.readyState){case gs.connecting:return Lr.Connecting;case gs.open:return Lr.Open;case gs.closing:return Lr.Closing;default:return Lr.Closed}}isConnected(){return this.connectionState()===Lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,s={config:{}}){const a=`realtime:${n}`,u=this.getChannels().find(d=>d.topic===a);if(u)return u;{const d=new Ro(`realtime:${n}`,s,this);return this.channels.push(d),d}}push(n){const{topic:s,event:a,payload:u,ref:d}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${s} ${a} (${d})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Og,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Ui.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let s=this.channels.find(a=>a.topic===n&&(a._isJoined()||a._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${n}"`),s.unsubscribe())}_remove(n){this.channels=this.channels.filter(s=>s.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(x){this.log("error","error in heartbeat callback",x)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:u,payload:d,ref:f}=s,p=f?`(${f})`:"",g=d.status||"";this.log("receive",`${g} ${a} ${u} ${p}`.trim(),d),this.channels.filter(x=>x._isMember(a)).forEach(x=>x._trigger(u,d,f)),this._triggerStateCallbacks("message",s)})}_clearTimer(n){var s;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var s;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Tt.error))}_appendParams(n,s){if(Object.keys(s).length===0)return n;const a=n.match(/\?/)?"&":"?",u=new URLSearchParams(s);return`${n}${a}${u}`}_workerObjectUrl(n){let s;if(n)s=n;else{const a=new Blob([Wg],{type:"application/javascript"});s=URL.createObjectURL(a)}return s}_setConnectionState(n,s=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(n=null){let s;n?s=n:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(a=>{const u={access_token:s,version:Pg};s&&a.updateJoinPayload(u),a.joinedOnce&&a._isJoined()&&a._push(Tt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${n}`,s)})}_triggerStateCallbacks(n,s){try{this.stateChangeCallbacks[n].forEach(a=>{try{a(s)}catch(u){this.log("error",`error in ${n} callback`,u)}})}catch(a){this.log("error",`error triggering ${n} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new qh(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ui.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var s,a,u,d,f,p,g,x,w;if(this.transport=(s=n==null?void 0:n.transport)!==null&&s!==void 0?s:null,this.timeout=(a=n==null?void 0:n.timeout)!==null&&a!==void 0?a:fo,this.heartbeatIntervalMs=(u=n==null?void 0:n.heartbeatIntervalMs)!==null&&u!==void 0?u:Ui.HEARTBEAT_INTERVAL,this.worker=(d=n==null?void 0:n.worker)!==null&&d!==void 0?d:!1,this.accessToken=(f=n==null?void 0:n.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(p=n==null?void 0:n.heartbeatCallback)!==null&&p!==void 0?p:to,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n==null?void 0:n.reconnectAfterMs)!==null&&g!==void 0?g:y=>Bg[y-1]||Fg,this.encode=(x=n==null?void 0:n.encode)!==null&&x!==void 0?x:(y,b)=>b(JSON.stringify(y)),this.decode=(w=n==null?void 0:n.decode)!==null&&w!==void 0?w:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}class Oo extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Fe(o){return typeof o=="object"&&o!==null&&"__isStorageError"in o}class qg extends Oo{constructor(n,s,a){super(n),this.name="StorageApiError",this.status=s,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class go extends Oo{constructor(n,s){super(n),this.name="StorageUnknownError",this.originalError=s}}var Hg=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};const Jh=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>Ss(async()=>{const{default:a}=await Promise.resolve().then(()=>Nn);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)},Kg=()=>Hg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ss(()=>Promise.resolve().then(()=>Nn),void 0)).Response:Response}),vo=o=>{if(Array.isArray(o))return o.map(s=>vo(s));if(typeof o=="function"||o!==Object(o))return o;const n={};return Object.entries(o).forEach(([s,a])=>{const u=s.replace(/([-_][a-z])/gi,d=>d.toUpperCase().replace(/[-_]/g,""));n[u]=vo(a)}),n},Jg=o=>{if(typeof o!="object"||o===null)return!1;const n=Object.getPrototypeOf(o);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in o)&&!(Symbol.iterator in o)};var Ur=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};const ro=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Qg=(o,n,s)=>Ur(void 0,void 0,void 0,function*(){const a=yield Kg();o instanceof a&&!(s!=null&&s.noResolveJson)?o.json().then(u=>{const d=o.status||500,f=(u==null?void 0:u.statusCode)||d+"";n(new qg(ro(u),d,f))}).catch(u=>{n(new go(ro(u),u))}):n(new go(ro(o),o))}),Gg=(o,n,s,a)=>{const u={method:o,headers:(n==null?void 0:n.headers)||{}};return o==="GET"||!a?u:(Jg(a)?(u.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),u.body=JSON.stringify(a)):u.body=a,n!=null&&n.duplex&&(u.duplex=n.duplex),Object.assign(Object.assign({},u),s))};function Ns(o,n,s,a,u,d){return Ur(this,void 0,void 0,function*(){return new Promise((f,p)=>{o(s,Gg(n,a,u,d)).then(g=>{if(!g.ok)throw g;return a!=null&&a.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>Qg(g,p,a))})})}function Ki(o,n,s,a){return Ur(this,void 0,void 0,function*(){return Ns(o,"GET",n,s,a)})}function It(o,n,s,a,u){return Ur(this,void 0,void 0,function*(){return Ns(o,"POST",n,a,u,s)})}function yo(o,n,s,a,u){return Ur(this,void 0,void 0,function*(){return Ns(o,"PUT",n,a,u,s)})}function Yg(o,n,s,a){return Ur(this,void 0,void 0,function*(){return Ns(o,"HEAD",n,Object.assign(Object.assign({},s),{noResolveJson:!0}),a)})}function Qh(o,n,s,a,u){return Ur(this,void 0,void 0,function*(){return Ns(o,"DELETE",n,a,u,s)})}var rt=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};const Xg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ch={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zg{constructor(n,s={},a,u){this.url=n,this.headers=s,this.bucketId=a,this.fetch=Jh(u)}uploadOrUpdate(n,s,a,u){return rt(this,void 0,void 0,function*(){try{let d;const f=Object.assign(Object.assign({},ch),u);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",this.encodeMetadata(g)),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.append("cacheControl",f.cacheControl),g&&d.append("metadata",this.encodeMetadata(g))):(d=a,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),u!=null&&u.headers&&(p=Object.assign(Object.assign({},p),u.headers));const x=this._removeEmptyFolders(s),w=this._getFinalPath(x),y=yield(n=="PUT"?yo:It)(this.fetch,`${this.url}/object/${w}`,d,Object.assign({headers:p},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:y.Id,fullPath:y.Key},error:null}}catch(d){if(Fe(d))return{data:null,error:d};throw d}})}upload(n,s,a){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,s,a)})}uploadToSignedUrl(n,s,a,u){return rt(this,void 0,void 0,function*(){const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),p=new URL(this.url+`/object/upload/sign/${f}`);p.searchParams.set("token",s);try{let g;const x=Object.assign({upsert:ch.upsert},u),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&a instanceof Blob?(g=new FormData,g.append("cacheControl",x.cacheControl),g.append("",a)):typeof FormData<"u"&&a instanceof FormData?(g=a,g.append("cacheControl",x.cacheControl)):(g=a,w["cache-control"]=`max-age=${x.cacheControl}`,w["content-type"]=x.contentType);const y=yield yo(this.fetch,p.toString(),g,{headers:w});return{data:{path:d,fullPath:y.Key},error:null}}catch(g){if(Fe(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,s){return rt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(n);const u=Object.assign({},this.headers);s!=null&&s.upsert&&(u["x-upsert"]="true");const d=yield It(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:u}),f=new URL(this.url+d.url),p=f.searchParams.get("token");if(!p)throw new Oo("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:p},error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}update(n,s,a){return rt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,s,a)})}move(n,s,a){return rt(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers}),error:null}}catch(u){if(Fe(u))return{data:null,error:u};throw u}})}copy(n,s,a){return rt(this,void 0,void 0,function*(){try{return{data:{path:(yield It(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:s,destinationBucket:a==null?void 0:a.destinationBucket},{headers:this.headers})).Key},error:null}}catch(u){if(Fe(u))return{data:null,error:u};throw u}})}createSignedUrl(n,s,a){return rt(this,void 0,void 0,function*(){try{let u=this._getFinalPath(n),d=yield It(this.fetch,`${this.url}/object/sign/${u}`,Object.assign({expiresIn:s},a!=null&&a.transform?{transform:a.transform}:{}),{headers:this.headers});const f=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return d={signedUrl:encodeURI(`${this.url}${d.signedURL}${f}`)},{data:d,error:null}}catch(u){if(Fe(u))return{data:null,error:u};throw u}})}createSignedUrls(n,s,a){return rt(this,void 0,void 0,function*(){try{const u=yield It(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:n},{headers:this.headers}),d=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{data:u.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${d}`):null})),error:null}}catch(u){if(Fe(u))return{data:null,error:u};throw u}})}download(n,s){return rt(this,void 0,void 0,function*(){const u=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",d=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),f=d?`?${d}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield Ki(this.fetch,`${this.url}/${u}/${p}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(Fe(p))return{data:null,error:p};throw p}})}info(n){return rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{const a=yield Ki(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:vo(a),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}exists(n){return rt(this,void 0,void 0,function*(){const s=this._getFinalPath(n);try{return yield Yg(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(Fe(a)&&a instanceof go){const u=a.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:a}}throw a}})}getPublicUrl(n,s){const a=this._getFinalPath(n),u=[],d=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";d!==""&&u.push(d);const p=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});g!==""&&u.push(g);let x=u.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${a}${x}`)}}}remove(n){return rt(this,void 0,void 0,function*(){try{return{data:yield Qh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}list(n,s,a){return rt(this,void 0,void 0,function*(){try{const u=Object.assign(Object.assign(Object.assign({},Xg),s),{prefix:n||""});return{data:yield It(this.fetch,`${this.url}/object/list/${this.bucketId}`,u,{headers:this.headers},a),error:null}}catch(u){if(Fe(u))return{data:null,error:u};throw u}})}listV2(n,s){return rt(this,void 0,void 0,function*(){try{const a=Object.assign({},n);return{data:yield It(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const s=[];return n.width&&s.push(`width=${n.width}`),n.height&&s.push(`height=${n.height}`),n.resize&&s.push(`resize=${n.resize}`),n.format&&s.push(`format=${n.format}`),n.quality&&s.push(`quality=${n.quality}`),s.join("&")}}const e0="2.11.1",t0={"X-Client-Info":`storage-js/${e0}`};var vn=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};class r0{constructor(n,s={},a,u){const d=new URL(n);u!=null&&u.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href,this.headers=Object.assign(Object.assign({},t0),s),this.fetch=Jh(a)}listBuckets(){return vn(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}})}getBucket(n){return vn(this,void 0,void 0,function*(){try{return{data:yield Ki(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}createBucket(n,s={public:!1}){return vn(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}updateBucket(n,s){return vn(this,void 0,void 0,function*(){try{return{data:yield yo(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(Fe(a))return{data:null,error:a};throw a}})}emptyBucket(n){return vn(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}deleteBucket(n){return vn(this,void 0,void 0,function*(){try{return{data:yield Qh(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(s){if(Fe(s))return{data:null,error:s};throw s}})}}class n0 extends r0{constructor(n,s={},a,u){super(n,s,a,u)}from(n){return new Zg(this.url,this.headers,n,this.fetch)}}const s0="2.57.2";let ms="";typeof Deno<"u"?ms="deno":typeof document<"u"?ms="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ms="react-native":ms="node";const i0={"X-Client-Info":`supabase-js-${ms}/${s0}`},a0={headers:i0},l0={schema:"public"},o0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},u0={};var c0=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};const d0=o=>{let n;return o?n=o:typeof fetch>"u"?n=Uh:n=fetch,(...s)=>n(...s)},h0=()=>typeof Headers>"u"?Mh:Headers,f0=(o,n,s)=>{const a=d0(s),u=h0();return(d,f)=>c0(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:o;let x=new u(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",o),x.has("Authorization")||x.set("Authorization",`Bearer ${g}`),a(d,Object.assign(Object.assign({},f),{headers:x}))})};var p0=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};function m0(o){return o.endsWith("/")?o:o+"/"}function g0(o,n){var s,a;const{db:u,auth:d,realtime:f,global:p}=o,{db:g,auth:x,realtime:w,global:y}=n,b={db:Object.assign(Object.assign({},g),u),auth:Object.assign(Object.assign({},x),d),realtime:Object.assign(Object.assign({},w),f),storage:{},global:Object.assign(Object.assign(Object.assign({},y),p),{headers:Object.assign(Object.assign({},(s=y==null?void 0:y.headers)!==null&&s!==void 0?s:{}),(a=p==null?void 0:p.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>p0(this,void 0,void 0,function*(){return""})};return o.accessToken?b.accessToken=o.accessToken:delete b.accessToken,b}const Gh="2.71.1",bn=30*1e3,xo=3,no=xo*bn,v0="http://localhost:9999",y0="supabase.auth.token",x0={"X-Client-Info":`gotrue-js/${Gh}`},wo="X-Supabase-Api-Version",Yh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},w0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_0=10*60*1e3;class Do extends Error{constructor(n,s,a){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=a}}function he(o){return typeof o=="object"&&o!==null&&"__isAuthError"in o}class b0 extends Do{constructor(n,s,a){super(n,s,a),this.name="AuthApiError",this.status=s,this.code=a}}function j0(o){return he(o)&&o.name==="AuthApiError"}class Xh extends Do{constructor(n,s){super(n),this.name="AuthUnknownError",this.originalError=s}}class yr extends Do{constructor(n,s,a,u){super(n,a,u),this.name=s,this.status=a}}class pr extends yr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function k0(o){return he(o)&&o.name==="AuthSessionMissingError"}class Mi extends yr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bi extends yr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Fi extends yr{constructor(n,s=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function S0(o){return he(o)&&o.name==="AuthImplicitGrantRedirectError"}class dh extends yr{constructor(n,s=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _o extends yr{constructor(n,s){super(n,"AuthRetryableFetchError",s,void 0)}}function so(o){return he(o)&&o.name==="AuthRetryableFetchError"}class hh extends yr{constructor(n,s,a){super(n,"AuthWeakPasswordError",s,"weak_password"),this.reasons=a}}class bo extends yr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ji="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fh=` 	
\r=`.split(""),N0=(()=>{const o=new Array(128);for(let n=0;n<o.length;n+=1)o[n]=-1;for(let n=0;n<fh.length;n+=1)o[fh[n].charCodeAt(0)]=-2;for(let n=0;n<Ji.length;n+=1)o[Ji[n].charCodeAt(0)]=n;return o})();function ph(o,n,s){if(o!==null)for(n.queue=n.queue<<8|o,n.queuedBits+=8;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(Ji[a]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const a=n.queue>>n.queuedBits-6&63;s(Ji[a]),n.queuedBits-=6}}function Zh(o,n,s){const a=N0[o];if(a>-1)for(n.queue=n.queue<<6|a,n.queuedBits+=6;n.queuedBits>=8;)s(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(o)}"`)}}function mh(o){const n=[],s=f=>{n.push(String.fromCodePoint(f))},a={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},d=f=>{T0(f,a,s)};for(let f=0;f<o.length;f+=1)Zh(o.charCodeAt(f),u,d);return n.join("")}function E0(o,n){if(o<=127){n(o);return}else if(o<=2047){n(192|o>>6),n(128|o&63);return}else if(o<=65535){n(224|o>>12),n(128|o>>6&63),n(128|o&63);return}else if(o<=1114111){n(240|o>>18),n(128|o>>12&63),n(128|o>>6&63),n(128|o&63);return}throw new Error(`Unrecognized Unicode codepoint: ${o.toString(16)}`)}function C0(o,n){for(let s=0;s<o.length;s+=1){let a=o.charCodeAt(s);if(a>55295&&a<=56319){const u=(a-55296)*1024&65535;a=(o.charCodeAt(s+1)-56320&65535|u)+65536,s+=1}E0(a,n)}}function T0(o,n,s){if(n.utf8seq===0){if(o<=127){s(o);return}for(let a=1;a<6;a+=1)if((o>>7-a&1)===0){n.utf8seq=a;break}if(n.utf8seq===2)n.codepoint=o&31;else if(n.utf8seq===3)n.codepoint=o&15;else if(n.utf8seq===4)n.codepoint=o&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(o<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|o&63,n.utf8seq-=1,n.utf8seq===0&&s(n.codepoint)}}function P0(o){const n=[],s={queue:0,queuedBits:0},a=u=>{n.push(u)};for(let u=0;u<o.length;u+=1)Zh(o.charCodeAt(u),s,a);return new Uint8Array(n)}function R0(o){const n=[];return C0(o,s=>n.push(s)),new Uint8Array(n)}function O0(o){const n=[],s={queue:0,queuedBits:0},a=u=>{n.push(u)};return o.forEach(u=>ph(u,s,a)),ph(null,s,a),n.join("")}function D0(o){return Math.round(Date.now()/1e3)+o}function A0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const n=Math.random()*16|0;return(o=="x"?n:n&3|8).toString(16)})}const Ct=()=>typeof window<"u"&&typeof document<"u",Or={tested:!1,writable:!1},ef=()=>{if(!Ct())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Or.tested)return Or.writable;const o=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(o,o),globalThis.localStorage.removeItem(o),Or.tested=!0,Or.writable=!0}catch{Or.tested=!0,Or.writable=!1}return Or.writable};function L0(o){const n={},s=new URL(o);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((u,d)=>{n[d]=u})}catch{}return s.searchParams.forEach((a,u)=>{n[u]=a}),n}const tf=o=>{let n;return o?n=o:typeof fetch>"u"?n=(...s)=>Ss(async()=>{const{default:a}=await Promise.resolve().then(()=>Nn);return{default:a}},void 0).then(({default:a})=>a(...s)):n=fetch,(...s)=>n(...s)},I0=o=>typeof o=="object"&&o!==null&&"status"in o&&"ok"in o&&"json"in o&&typeof o.json=="function",jn=async(o,n,s)=>{await o.setItem(n,JSON.stringify(s))},Dr=async(o,n)=>{const s=await o.getItem(n);if(!s)return null;try{return JSON.parse(s)}catch{return s}},fr=async(o,n)=>{await o.removeItem(n)};class Yi{constructor(){this.promise=new Yi.promiseConstructor((n,s)=>{this.resolve=n,this.reject=s})}}Yi.promiseConstructor=Promise;function io(o){const n=o.split(".");if(n.length!==3)throw new bo("Invalid JWT structure");for(let a=0;a<n.length;a++)if(!w0.test(n[a]))throw new bo("JWT not in base64url format");return{header:JSON.parse(mh(n[0])),payload:JSON.parse(mh(n[1])),signature:P0(n[2]),raw:{header:n[0],payload:n[1]}}}async function z0(o){return await new Promise(n=>{setTimeout(()=>n(null),o)})}function $0(o,n){return new Promise((a,u)=>{(async()=>{for(let d=0;d<1/0;d++)try{const f=await o(d);if(!n(d,null,f)){a(f);return}}catch(f){if(!n(d,f)){u(f);return}}})()})}function U0(o){return("0"+o.toString(16)).substr(-2)}function M0(){const n=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=s.length;let u="";for(let d=0;d<56;d++)u+=s.charAt(Math.floor(Math.random()*a));return u}return crypto.getRandomValues(n),Array.from(n,U0).join("")}async function B0(o){const s=new TextEncoder().encode(o),a=await crypto.subtle.digest("SHA-256",s),u=new Uint8Array(a);return Array.from(u).map(d=>String.fromCharCode(d)).join("")}async function F0(o){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),o;const s=await B0(o);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(o,n,s=!1){const a=M0();let u=a;s&&(u+="/PASSWORD_RECOVERY"),await jn(o,`${n}-code-verifier`,u);const d=await F0(a);return[d,a===d?"plain":"s256"]}const W0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function V0(o){const n=o.headers.get(wo);if(!n||!n.match(W0))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function q0(o){if(!o)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(o<=n)throw new Error("JWT has expired")}function H0(o){switch(o){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const K0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xn(o){if(!K0.test(o))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ao(){const o={};return new Proxy(o,{get:(n,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gh(o){return JSON.parse(JSON.stringify(o))}var J0=function(o,n){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&n.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(o);u<a.length;u++)n.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(o,a[u])&&(s[a[u]]=o[a[u]]);return s};const Ar=o=>o.msg||o.message||o.error_description||o.error||JSON.stringify(o),Q0=[502,503,504];async function vh(o){var n;if(!I0(o))throw new _o(Ar(o),0);if(Q0.includes(o.status))throw new _o(Ar(o),o.status);let s;try{s=await o.json()}catch(d){throw new Xh(Ar(d),d)}let a;const u=V0(o);if(u&&u.getTime()>=Yh["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?a=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(a=s.error_code),a){if(a==="weak_password")throw new hh(Ar(s),o.status,((n=s.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(a==="session_not_found")throw new pr}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((d,f)=>d&&typeof f=="string",!0))throw new hh(Ar(s),o.status,s.weak_password.reasons);throw new b0(Ar(s),o.status||500,a)}const G0=(o,n,s,a)=>{const u={method:o,headers:(n==null?void 0:n.headers)||{}};return o==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),u.body=JSON.stringify(a),Object.assign(Object.assign({},u),s))};async function ge(o,n,s,a){var u;const d=Object.assign({},a==null?void 0:a.headers);d[wo]||(d[wo]=Yh["2024-01-01"].name),a!=null&&a.jwt&&(d.Authorization=`Bearer ${a.jwt}`);const f=(u=a==null?void 0:a.query)!==null&&u!==void 0?u:{};a!=null&&a.redirectTo&&(f.redirect_to=a.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await Y0(o,n,s+p,{headers:d,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(g):{data:Object.assign({},g),error:null}}async function Y0(o,n,s,a,u,d){const f=G0(n,a,u,d);let p;try{p=await o(s,Object.assign({},f))}catch(g){throw console.error(g),new _o(Ar(g),0)}if(p.ok||await vh(p),a!=null&&a.noResolveJson)return p;try{return await p.json()}catch(g){await vh(g)}}function Ht(o){var n;let s=null;tv(o)&&(s=Object.assign({},o),o.expires_at||(s.expires_at=D0(o.expires_in)));const a=(n=o.user)!==null&&n!==void 0?n:o;return{data:{session:s,user:a},error:null}}function yh(o){const n=Ht(o);return!n.error&&o.weak_password&&typeof o.weak_password=="object"&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.message&&typeof o.weak_password.message=="string"&&o.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0)&&(n.data.weak_password=o.weak_password),n}function mr(o){var n;return{data:{user:(n=o.user)!==null&&n!==void 0?n:o},error:null}}function X0(o){return{data:o,error:null}}function Z0(o){const{action_link:n,email_otp:s,hashed_token:a,redirect_to:u,verification_type:d}=o,f=J0(o,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:s,hashed_token:a,redirect_to:u,verification_type:d},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function ev(o){return o}function tv(o){return o.access_token&&o.refresh_token&&o.expires_in}const lo=["global","local","others"];var rv=function(o,n){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&n.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(o);u<a.length;u++)n.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(o,a[u])&&(s[a[u]]=o[a[u]]);return s};class nv{constructor({url:n="",headers:s={},fetch:a}){this.url=n,this.headers=s,this.fetch=tf(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,s=lo[0]){if(lo.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${lo.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(a){if(he(a))return{data:null,error:a};throw a}}async inviteUserByEmail(n,s={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:mr})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async generateLink(n){try{const{options:s}=n,a=rv(n,["options"]),u=Object.assign(Object.assign({},a),s);return"newEmail"in a&&(u.new_email=a==null?void 0:a.newEmail,delete u.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Z0,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(he(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(n){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:mr})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async listUsers(n){var s,a,u,d,f,p,g;try{const x={nextPage:null,lastPage:0,total:0},w=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(s=n==null?void 0:n.page)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:"",per_page:(d=(u=n==null?void 0:n.perPage)===null||u===void 0?void 0:u.toString())!==null&&d!==void 0?d:""},xform:ev});if(w.error)throw w.error;const y=await w.json(),b=(f=w.headers.get("x-total-count"))!==null&&f!==void 0?f:0,C=(g=(p=w.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return C.length>0&&(C.forEach(S=>{const T=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(S.split(";")[1].split("=")[1]);x[`${A}Page`]=T}),x.total=parseInt(b)),{data:Object.assign(Object.assign({},y),x),error:null}}catch(x){if(he(x))return{data:{users:[]},error:x};throw x}}async getUserById(n){xn(n);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:mr})}catch(s){if(he(s))return{data:{user:null},error:s};throw s}}async updateUserById(n,s){xn(n);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:s,headers:this.headers,xform:mr})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async deleteUser(n,s=!1){xn(n);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:s},xform:mr})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async _listFactors(n){xn(n.userId);try{const{data:s,error:a}=await ge(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:s,error:a}}catch(s){if(he(s))return{data:null,error:s};throw s}}async _deleteFactor(n){xn(n.userId),xn(n.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}}function xh(o={}){return{getItem:n=>o[n]||null,setItem:(n,s)=>{o[n]=s},removeItem:n=>{delete o[n]}}}function sv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wn={debug:!!(globalThis&&ef()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rf extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class iv extends rf{}async function av(o,n,s){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",o,n);const a=new globalThis.AbortController;return n>0&&setTimeout(()=>{a.abort(),wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",o)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(o,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async u=>{if(u){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",o,u.name);try{return await s()}finally{wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",o,u.name)}}else{if(n===0)throw wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",o),new iv(`Acquiring an exclusive Navigator LockManager lock "${o}" immediately failed`);if(wn.debug)try{const d=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(d,null,"  "))}catch(d){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",d)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}sv();const lv={url:v0,storageKey:y0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:x0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function wh(o,n,s){return await s()}const _n={};class _s{constructor(n){var s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_s.nextInstanceID,_s.nextInstanceID+=1,this.instanceID>0&&Ct()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const u=Object.assign(Object.assign({},lv),n);if(this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.persistSession=u.persistSession,this.storageKey=u.storageKey,this.autoRefreshToken=u.autoRefreshToken,this.admin=new nv({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=tf(u.fetch),this.lock=u.lock||wh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,u.lock?this.lock=u.lock:Ct()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=av:this.lock=wh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:ef()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xh(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=xh(this.memoryStorage)),Ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}get jwks(){var n,s;return(s=(n=_n[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(n){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,s;return(s=(n=_n[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gh}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const s=L0(window.location.href);let a="none";if(this._isImplicitGrantCallback(s)?a="implicit":await this._isPKCECallback(s)&&(a="pkce"),Ct()&&this.detectSessionInUrl&&a!=="none"){const{data:u,error:d}=await this._getSessionFromURL(s,a);if(d){if(this._debug("#_initialize()","error detecting session from URL",d),S0(d)){const g=(n=d.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:d}}return await this._removeSession(),{error:d}}const{session:f,redirectType:p}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return he(s)?{error:s}:{error:new Xh("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var s,a,u;try{const d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(s=n==null?void 0:n.options)===null||s===void 0?void 0:s.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(u=n==null?void 0:n.options)===null||u===void 0?void 0:u.captchaToken}},xform:Ht}),{data:f,error:p}=d;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(d){if(he(d))return{data:{user:null,session:null},error:d};throw d}}async signUp(n){var s,a,u;try{let d;if("email"in n){const{email:w,password:y,options:b}=n;let C=null,S=null;this.flowType==="pkce"&&([C,S]=await yn(this.storage,this.storageKey)),d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:w,password:y,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:C,code_challenge_method:S},xform:Ht})}else if("phone"in n){const{phone:w,password:y,options:b}=n;d=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:y,data:(a=b==null?void 0:b.data)!==null&&a!==void 0?a:{},channel:(u=b==null?void 0:b.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Ht})}else throw new Bi("You must provide either an email or phone number and a password");const{data:f,error:p}=d;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(d){if(he(d))return{data:{user:null,session:null},error:d};throw d}}async signInWithPassword(n){try{let s;if("email"in n){const{email:d,password:f,options:p}=n;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:d,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:yh})}else if("phone"in n){const{phone:d,password:f,options:p}=n;s=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:d,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:yh})}else throw new Bi("You must provide either an email or phone number and a password");const{data:a,error:u}=s;return u?{data:{user:null,session:null},error:u}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Mi}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:u})}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(n){var s,a,u,d;return await this._handleProviderSignIn(n.provider,{redirectTo:(s=n.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=n.options)===null||a===void 0?void 0:a.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(d=n.options)===null||d===void 0?void 0:d.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:s}=n;if(s==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(n){var s,a,u,d,f,p,g,x,w,y,b,C;let S,T;if("message"in n)S=n.message,T=n.signature;else{const{chain:A,wallet:K,statement:B,options:$}=n;let I;if(Ct())if(typeof K=="object")I=K;else{const H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))I=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=K}const W=new URL((s=$==null?void 0:$.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in I&&I.signIn){const H=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},$==null?void 0:$.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),B?{statement:B}:null));let Y;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")Y=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)Y=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)S=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),T=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${W.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...B?["",B,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(u=(a=$==null?void 0:$.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((d=$==null?void 0:$.signInWithSolana)===null||d===void 0)&&d.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...!((f=$==null?void 0:$.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...!((p=$==null?void 0:$.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...!((g=$==null?void 0:$.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...!((x=$==null?void 0:$.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...!((y=(w=$==null?void 0:$.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||y===void 0)&&y.length?["Resources",...$.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const H=await I.signMessage(new TextEncoder().encode(S),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=H}}try{const{data:A,error:K}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:O0(T)},!((b=n.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(C=n.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Ht});if(K)throw K;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new Mi}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:K})}catch(A){if(he(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(n){const s=await Dr(this.storage,`${this.storageKey}-code-verifier`),[a,u]=(s??"").split("/");try{const{data:d,error:f}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:a},xform:Ht});if(await fr(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!d||!d.session||!d.user?{data:{user:null,session:null,redirectType:null},error:new Mi}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign(Object.assign({},d),{redirectType:u??null}),error:f})}catch(d){if(he(d))return{data:{user:null,session:null,redirectType:null},error:d};throw d}}async signInWithIdToken(n){try{const{options:s,provider:a,token:u,access_token:d,nonce:f}=n,p=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:u,access_token:d,nonce:f,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Ht}),{data:g,error:x}=p;return x?{data:{user:null,session:null},error:x}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new Mi}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:x})}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(n){var s,a,u,d,f;try{if("email"in n){const{email:p,options:g}=n;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await yn(this.storage,this.storageKey));const{error:y}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},create_user:(a=g==null?void 0:g.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:x,code_challenge_method:w},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in n){const{phone:p,options:g}=n,{data:x,error:w}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(u=g==null?void 0:g.data)!==null&&u!==void 0?u:{},create_user:(d=g==null?void 0:g.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(f=g==null?void 0:g.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:w}}throw new Bi("You must provide either an email or phone number.")}catch(p){if(he(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var s,a;try{let u,d;"options"in n&&(u=(s=n.options)===null||s===void 0?void 0:s.redirectTo,d=(a=n.options)===null||a===void 0?void 0:a.captchaToken);const{data:f,error:p}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:d}}),redirectTo:u,xform:Ht});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,x=f.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(u){if(he(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithSSO(n){var s,a,u;try{let d=null,f=null;return this.flowType==="pkce"&&([d,f]=await yn(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(a=(s=n.options)===null||s===void 0?void 0:s.redirectTo)!==null&&a!==void 0?a:void 0}),!((u=n==null?void 0:n.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:X0})}catch(d){if(he(d))return{data:null,error:d};throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)throw a;if(!s)throw new pr;const{error:u}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:u}})}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const s=`${this.url}/resend`;if("email"in n){const{email:a,type:u,options:d}=n,{error:f}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{email:a,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:a,type:u,options:d}=n,{data:f,error:p}=await ge(this.fetch,"POST",s,{headers:this.headers,body:{phone:a,type:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new Bi("You must provide either an email or phone number and a type")}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(n,s){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await a,await s()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=s();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await n(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const s=await Dr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?n=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const a=n.expires_at?n.expires_at*1e3-Date.now()<no:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",n.expires_at),!a){if(this.userStorage){const f=await Dr(this.userStorage,this.storageKey+"-user");f!=null&&f.user?n.user=f.user:n.user=ao()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,x,w)=>(!f&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,x,w))})}return{data:{session:n},error:null}}const{session:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{session:null},error:d}:{data:{session:u},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:mr}):await this._useSession(async s=>{var a,u,d;const{data:f,error:p}=s;if(p)throw p;return!(!((a=f.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pr}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0,xform:mr})})}catch(s){if(he(s))return k0(s)&&(await this._removeSession(),await fr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(n,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,s))}async _updateUser(n,s={}){try{return await this._useSession(async a=>{const{data:u,error:d}=a;if(d)throw d;if(!u.session)throw new pr;const f=u.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await yn(this.storage,this.storageKey));const{data:x,error:w}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:mr});if(w)throw w;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(a){if(he(a))return{data:{user:null},error:a};throw a}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new pr;const s=Date.now()/1e3;let a=s,u=!0,d=null;const{payload:f}=io(n.access_token);if(f.exp&&(a=f.exp,u=a<=s),u){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};d=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;d={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:a-s,expires_at:a},await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)}return{data:{user:d.user,session:d},error:null}}catch(s){if(he(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async s=>{var a;if(!n){const{data:f,error:p}=s;if(p)throw p;n=(a=f.session)!==null&&a!==void 0?a:void 0}if(!(n!=null&&n.refresh_token))throw new pr;const{session:u,error:d}=await this._callRefreshToken(n.refresh_token);return d?{data:{user:null,session:null},error:d}:u?{data:{user:u.user,session:u},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(n,s){try{if(!Ct())throw new Fi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Fi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new dh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fi("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new dh("No code detected.");const{data:B,error:$}=await this._exchangeCodeForSession(n.code);if($)throw $;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:B.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:u,access_token:d,refresh_token:f,expires_in:p,expires_at:g,token_type:x}=n;if(!d||!p||!f||!x)throw new Fi("No session defined in URL");const w=Math.round(Date.now()/1e3),y=parseInt(p);let b=w+y;g&&(b=parseInt(g));const C=b-w;C*1e3<=bn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${y}s`);const S=b-y;w-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,b,w):w-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,b,w);const{data:T,error:A}=await this._getUser(d);if(A)throw A;const K={provider_token:a,provider_refresh_token:u,access_token:d,expires_in:y,expires_at:b,refresh_token:f,token_type:x,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:K,redirectType:n.type},error:null}}catch(a){if(he(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const s=await Dr(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&s)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async s=>{var a;const{data:u,error:d}=s;if(d)return{error:d};const f=(a=u.session)===null||a===void 0?void 0:a.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(j0(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await fr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const s=A0(),a={id:s,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:a}}}async _emitInitialSession(n){return await this._useSession(async s=>{var a,u;try{const{data:{session:d},error:f}=s;if(f)throw f;await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",d)),this._debug("INITIAL_SESSION","callback id",n,"session",d)}catch(d){await((u=this.stateChangeEmitters.get(n))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",d),console.error(d)}})}async resetPasswordForEmail(n,s={}){let a=null,u=null;this.flowType==="pkce"&&([a,u]=await yn(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:a,code_challenge_method:u,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(d){if(he(d))return{data:null,error:d};throw d}}async getUserIdentities(){var n;try{const{data:s,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(n=s.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(s){if(he(s))return{data:null,error:s};throw s}}async linkIdentity(n){var s;try{const{data:a,error:u}=await this._useSession(async d=>{var f,p,g,x,w;const{data:y,error:b}=d;if(b)throw b;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",C,{headers:this.headers,jwt:(w=(x=y.session)===null||x===void 0?void 0:x.access_token)!==null&&w!==void 0?w:void 0})});if(u)throw u;return Ct()&&!(!((s=n.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),{data:{provider:n.provider,url:a==null?void 0:a.url},error:null}}catch(a){if(he(a))return{data:{provider:n.provider,url:null},error:a};throw a}}async unlinkIdentity(n){try{return await this._useSession(async s=>{var a,u;const{data:d,error:f}=s;if(f)throw f;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(u=(a=d.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0})})}catch(s){if(he(s))return{data:null,error:s};throw s}}async _refreshAccessToken(n){const s=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(s,"begin");try{const a=Date.now();return await $0(async u=>(u>0&&await z0(200*Math.pow(2,u-1)),this._debug(s,"refreshing attempt",u),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ht})),(u,d)=>{const f=200*Math.pow(2,u);return d&&so(d)&&Date.now()+f-a<bn})}catch(a){if(this._debug(s,"error",a),he(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(s,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,s){const a=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",s,"url",a),Ct()&&!s.skipBrowserRedirect&&window.location.assign(a),{data:{provider:n,url:a},error:null}}async _recoverAndRefresh(){var n,s;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const u=await Dr(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Dr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await jn(this.userStorage,this.storageKey+"-user",f)),u.user=(n=f==null?void 0:f.user)!==null&&n!==void 0?n:ao()}else if(u&&!u.user&&!u.user){const f=await Dr(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(u.user=f.user,await fr(this.storage,this.storageKey+"-user"),await jn(this.storage,this.storageKey,u)):u.user=ao()}if(this._debug(a,"session from storage",u),!this._isValidSession(u)){this._debug(a,"session is not valid"),u!==null&&await this._removeSession();return}const d=((s=u.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<no;if(this._debug(a,`session has${d?"":" not"} expired with margin of ${no}s`),d){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),so(f)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(u.access_token);!p&&(f!=null&&f.user)?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(a,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(a,"error",u),console.error(u);return}finally{this._debug(a,"end")}}async _callRefreshToken(n){var s,a;if(!n)throw new pr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new Yi;const{data:d,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!d.session)throw new pr;await this._saveSession(d.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",d.session);const p={session:d.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(d){if(this._debug(u,"error",d),he(d)){const f={session:null,error:d};return so(d)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(f),f}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(d),d}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(n,s,a=!0){const u=`#_notifyAllSubscribers(${n})`;this._debug(u,"begin",s,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:n,session:s});const d=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,s)}catch(g){d.push(g)}});if(await Promise.all(f),d.length>0){for(let p=0;p<d.length;p+=1)console.error(d[p]);throw d[0]}}finally{this._debug(u,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const s=Object.assign({},n),a=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&s.user&&await jn(this.userStorage,this.storageKey+"-user",{user:s.user});const u=Object.assign({},s);delete u.user;const d=gh(u);await jn(this.storage,this.storageKey,d)}else{const u=gh(s);await jn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),await fr(this.storage,this.storageKey),await fr(this.storage,this.storageKey+"-code-verifier"),await fr(this.storage,this.storageKey+"-user"),this.userStorage&&await fr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Ct()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),bn);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async s=>{const{data:{session:a}}=s;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((a.expires_at*1e3-n)/bn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${bn}ms, refresh threshold is ${xo} ticks`),u<=xo&&await this._callRefreshToken(a.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof rf)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ct()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const s=`#_onVisibilityChanged(${n})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,s,a){const u=[`provider=${encodeURIComponent(s)}`];if(a!=null&&a.redirectTo&&u.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&u.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[d,f]=await yn(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(d)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(p.toString())}if(a!=null&&a.queryParams){const d=new URLSearchParams(a.queryParams);u.push(d.toString())}return a!=null&&a.skipBrowserRedirect&&u.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${n}?${u.join("&")}`}async _unenroll(n){try{return await this._useSession(async s=>{var a;const{data:u,error:d}=s;return d?{data:null,error:d}:await ge(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(he(s))return{data:null,error:s};throw s}}async _enroll(n){try{return await this._useSession(async s=>{var a,u;const{data:d,error:f}=s;if(f)return{data:null,error:f};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:x}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(a=d==null?void 0:d.session)===null||a===void 0?void 0:a.access_token});return x?{data:null,error:x}:(n.factorType==="totp"&&(!((u=g==null?void 0:g.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(s){if(he(s))return{data:null,error:s};throw s}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:d}=s;if(d)return{data:null,error:d};const{data:f,error:p}=await ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:p})})}catch(s){if(he(s))return{data:null,error:s};throw s}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var a;const{data:u,error:d}=s;return d?{data:null,error:d}:await ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(a=u==null?void 0:u.session)===null||a===void 0?void 0:a.access_token})})}catch(s){if(he(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(n){const{data:s,error:a}=await this._challenge({factorId:n.factorId});return a?{data:null,error:a}:await this._verify({factorId:n.factorId,challengeId:s.id,code:n.code})}async _listFactors(){const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a=(n==null?void 0:n.factors)||[],u=a.filter(f=>f.factor_type==="totp"&&f.status==="verified"),d=a.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:a,totp:u,phone:d},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var s,a;const{data:{session:u},error:d}=n;if(d)return{data:null,error:d};if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=io(u.access_token);let p=null;f.aal&&(p=f.aal);let g=p;((a=(s=u.user.factors)===null||s===void 0?void 0:s.filter(y=>y.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(g="aal2");const w=f.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:w},error:null}}))}async fetchJwk(n,s={keys:[]}){let a=s.keys.find(p=>p.kid===n);if(a)return a;const u=Date.now();if(a=this.jwks.keys.find(p=>p.kid===n),a&&this.jwks_cached_at+_0>u)return a;const{data:d,error:f}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!d.keys||d.keys.length===0||(this.jwks=d,this.jwks_cached_at=u,a=d.keys.find(p=>p.kid===n),!a)?null:a}async getClaims(n,s={}){try{let a=n;if(!a){const{data:C,error:S}=await this.getSession();if(S||!C.session)return{data:null,error:S};a=C.session.access_token}const{header:u,payload:d,signature:f,raw:{header:p,payload:g}}=io(a);s!=null&&s.allowExpired||q0(d.exp);const x=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!x){const{error:C}=await this.getUser(a);if(C)throw C;return{data:{claims:d,header:u,signature:f},error:null}}const w=H0(u.alg),y=await crypto.subtle.importKey("jwk",x,w,!0,["verify"]);if(!await crypto.subtle.verify(w,y,f,R0(`${p}.${g}`)))throw new bo("Invalid JWT signature");return{data:{claims:d,header:u,signature:f},error:null}}catch(a){if(he(a))return{data:null,error:a};throw a}}}_s.nextInstanceID=0;const ov=_s;class uv extends ov{constructor(n){super(n)}}var cv=function(o,n,s,a){function u(d){return d instanceof s?d:new s(function(f){f(d)})}return new(s||(s=Promise))(function(d,f){function p(w){try{x(a.next(w))}catch(y){f(y)}}function g(w){try{x(a.throw(w))}catch(y){f(y)}}function x(w){w.done?d(w.value):u(w.value).then(p,g)}x((a=a.apply(o,n||[])).next())})};class dv{constructor(n,s,a){var u,d,f;if(this.supabaseUrl=n,this.supabaseKey=s,!n)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const p=m0(n),g=new URL(p);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const x=`sb-${g.hostname.split(".")[0]}-auth-token`,w={db:l0,realtime:u0,auth:Object.assign(Object.assign({},o0),{storageKey:x}),global:a0},y=g0(a??{},w);this.storageKey=(u=y.auth.storageKey)!==null&&u!==void 0?u:"",this.headers=(d=y.global.headers)!==null&&d!==void 0?d:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(b,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=y.auth)!==null&&f!==void 0?f:{},this.headers,y.global.fetch),this.fetch=f0(s,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new Eg(new URL("rest/v1",g).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new n0(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new vg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,s={},a={}){return this.rest.rpc(n,s,a)}channel(n,s={config:{}}){return this.realtime.channel(n,s)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,s;return cv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:u,userStorage:d,storageKey:f,flowType:p,lock:g,debug:x},w,y){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uv({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),w),storageKey:f,autoRefreshToken:n,persistSession:s,detectSessionInUrl:a,storage:u,userStorage:d,flowType:p,lock:g,debug:x,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Vg(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(n,s,a){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:n==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hv=(o,n,s)=>new dv(o,n,s);function fv(){if(typeof window<"u"||typeof process>"u")return!1;const o=process.version;if(o==null)return!1;const n=o.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}fv()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pv="https://okchmqhqjrydytfdegns.supabase.co",mv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rY2htcWhxanJ5ZHl0ZmRlZ25zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM1MzQ4NjEsImV4cCI6MjA0OTExMDg2MX0.26lT4SsEwvFJJoQFPhlcShbKXGVkqJDuYTt7sqXxPqA",fe=hv(pv,mv);async function gv(){const{data:{user:o},error:n}=await fe.auth.getUser();return n?(console.error("Error getting user:",n),null):o}async function oo(o){const{data:n,error:s}=await fe.from("profiles").select("*").eq("id",o).maybeSingle();return s?(console.error("Error fetching profile:",s),null):n}const nf=L.createContext(void 0);function wt(){const o=L.useContext(nf);if(o===void 0)throw new Error("useAuth must be used within an AuthProvider");return o}function vv({children:o}){const[n,s]=L.useState(null),[a,u]=L.useState(null),[d,f]=L.useState(!0);L.useEffect(()=>{async function b(){f(!0);try{const S=await gv();if(s(S),S){const T=await oo(S.id);u(T)}}finally{f(!1)}}b();const{data:{subscription:C}}=fe.auth.onAuthStateChange(async(S,T)=>{s((T==null?void 0:T.user)||null),T!=null&&T.user||u(null)});return()=>C.unsubscribe()},[]),L.useEffect(()=>{async function b(){if(n&&!a){const C=await oo(n.id);u(C)}}b()},[n,a]);const y={user:n,profile:a,loading:d,signIn:async(b,C)=>await fe.auth.signInWithPassword({email:b,password:C}),signUp:async(b,C,S)=>await fe.auth.signUp({email:b,password:C,options:{emailRedirectTo:`${window.location.protocol}//${window.location.host}/auth/callback`,data:S}}),signOut:async()=>(u(null),await fe.auth.signOut()),refreshProfile:async()=>{if(n){const b=await oo(n.id);u(b)}}};return l.jsx(nf.Provider,{value:y,children:o})}function sf(o){const[n,s]=L.useState([]),[a,u]=L.useState(0),[d,f]=L.useState(!0);return L.useEffect(()=>{if(!o)return;(async()=>{try{const{data:b,error:C}=await fe.from("notifications").select("*").eq("recipient_id",o).order("created_at",{ascending:!1}).limit(50);if(C)throw C;s(b||[]),u((b==null?void 0:b.filter(S=>!S.is_read).length)||0)}catch(b){console.error("Error loading notifications:",b)}finally{f(!1)}})();const y=fe.channel("notifications").on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`recipient_id=eq.${o}`},b=>{if(console.log("Notification change received:",b),b.eventType==="INSERT"){const C=b.new;s(S=>[C,...S]),C.is_read||u(S=>S+1),"Notification"in window&&Notification.permission==="granted"&&new Notification(C.title,{body:C.message,icon:"/favicon.ico",tag:C.id})}else if(b.eventType==="UPDATE"){const C=b.new;s(S=>S.map(T=>T.id===C.id?C:T)),s(S=>(u(S.filter(T=>!T.is_read).length),S))}else if(b.eventType==="DELETE"){const C=b.old.id;s(S=>S.filter(T=>T.id!==C))}}).subscribe();return"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission(),()=>{y.unsubscribe()}},[o]),{notifications:n,unreadCount:a,loading:d,markAsRead:async w=>{try{const{error:y}=await fe.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",w);if(y)throw y}catch(y){console.error("Error marking notification as read:",y)}},markAllAsRead:async()=>{try{const{error:w}=await fe.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("recipient_id",o).eq("is_read",!1);if(w)throw w}catch(w){console.error("Error marking all notifications as read:",w)}},createNotification:async w=>{try{const{error:y}=await fe.from("notifications").insert({...w,is_read:!1,action_taken:!1});if(y)throw y}catch(y){console.error("Error creating notification:",y)}}}}function Qe(o,n){const[s,a]=L.useState([]),[u,d]=L.useState(!0),[f,p]=L.useState(null);return L.useEffect(()=>{(async()=>{try{let w=fe.from(o).select("*");const{data:y,error:b}=await w;if(b)throw b;a(y)}catch(w){p(w.message)}finally{d(!1)}})();const x=fe.channel(`realtime-${o}`).on("postgres_changes",{event:"*",schema:"public",table:o,filter:n},w=>{console.log(`${o} change received:`,w),w.eventType==="INSERT"?a(y=>[w.new,...y]):w.eventType==="UPDATE"?a(y=>y.map(b=>b.id===w.new.id?w.new:b)):w.eventType==="DELETE"&&a(y=>y.filter(b=>b.id!==w.old.id))}).subscribe();return()=>{x.unsubscribe()}},[o,n]),{data:s,loading:u,error:f,setData:a}}/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(o,n)=>{const s=L.forwardRef(({color:a="currentColor",size:u=24,strokeWidth:d=2,absoluteStrokeWidth:f,className:p="",children:g,...x},w)=>L.createElement("svg",{ref:w,...yv,width:u,height:u,stroke:a,strokeWidth:f?Number(d)*24/Number(u):d,className:["lucide",`lucide-${xv(o)}`,p].join(" "),...x},[...n.map(([y,b])=>L.createElement(y,b)),...Array.isArray(g)?g:[g]]));return s.displayName=`${o}`,s};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=ye("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ye("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ye("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ye("ScanText",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 8h8",key:"1jbsf9"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M7 16h6",key:"1vyc9m"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ye("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=ye("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=ye("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function Cv(){const{profile:o}=wt(),[n,s]=L.useState(!1),{notifications:a,unreadCount:u,loading:d,markAsRead:f,markAllAsRead:p}=sf((o==null?void 0:o.id)||""),g=(y,b)=>{switch(y){case"critical_value":return l.jsx(Qi,{size:16,className:"text-red-500"});case"appointment_reminder":return l.jsx(_h,{size:16,className:"text-blue-500"});case"treatment_overdue":return l.jsx(bs,{size:16,className:"text-orange-500"});case"new_document":return l.jsx(af,{size:16,className:"text-green-500"});default:return l.jsx(_h,{size:16,className:"text-gray-500"})}},x=y=>{const b=new Date(y),S=Math.floor((new Date().getTime()-b.getTime())/(1e3*60));return S<1?"Gerade eben":S<60?`vor ${S} Min`:S<1440?`vor ${Math.floor(S/60)} Std`:`vor ${Math.floor(S/1440)} Tagen`},w=async y=>{y.is_read||await f(y.id),y.related_table&&y.related_id&&console.log("Navigate to:",y.related_table,y.related_id)};return o?l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>s(!n),className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors",children:[l.jsx(jo,{size:20}),u>0&&l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:u>9?"9+":u})]}),n&&l.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[l.jsx("div",{className:"p-4 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Benachrichtigungen"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[u>0&&l.jsxs("button",{onClick:p,className:"text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-1",children:[l.jsx(wv,{size:14}),l.jsx("span",{children:"Alle lesen"})]}),l.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:l.jsx(En,{size:16})})]})]})}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?l.jsx("div",{className:"p-4 text-center text-gray-500",children:l.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-300 mx-auto"})}):a.length===0?l.jsxs("div",{className:"p-4 text-center text-gray-500",children:[l.jsx(jo,{className:"mx-auto h-8 w-8 text-gray-300 mb-2"}),l.jsx("p",{children:"Keine Benachrichtigungen"})]}):l.jsx("div",{className:"divide-y divide-gray-100",children:a.map(y=>l.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${y.is_read?"":"bg-blue-50 border-l-4 border-blue-500"}`,onClick:()=>w(y),children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("div",{className:"flex-shrink-0 mt-1",children:g(y.notification_type,y.priority)}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:`text-sm font-medium text-gray-900 ${y.is_read?"":"font-semibold"}`,children:y.title}),l.jsxs("div",{className:"flex items-center space-x-1",children:[!y.is_read&&l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),l.jsx("span",{className:"text-xs text-gray-500",children:x(y.created_at)})]})]}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.message}),y.action_required&&!y.action_taken&&l.jsx("div",{className:"mt-2",children:l.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded",children:"Aktion erforderlich"})})]})]})},y.id))})}),a.length>0&&l.jsx("div",{className:"p-3 border-t border-gray-200 text-center",children:l.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800",children:"Alle Benachrichtigungen anzeigen"})})]})]}):null}const Tv=[{id:"dashboard",label:"Dashboard",icon:Ao,roles:["admin","trainer","physiotherapist","physician"],path:"/dashboard"},{id:"athletiktrainer",label:"Athletiktrainer",icon:zr,roles:["admin","trainer"],path:"/athletiktrainer"},{id:"physiotherapie",label:"Physiotherapie",icon:Vi,roles:["admin","physiotherapist"],path:"/physiotherapie"},{id:"aerzte",label:"Ärzte",icon:Pt,roles:["admin","physician"],path:"/aerzte"},{id:"befund-digitalisierung",label:"Befund-Digitalisierung",icon:Sv,roles:["admin","trainer","physiotherapist","physician"],path:"/befund-digitalisierung"},{id:"termine",label:"Termine",icon:vr,roles:["admin","trainer","physiotherapist","physician"],path:"/termine"},{id:"benachrichtigungen",label:"Benachrichtigungen",icon:jo,roles:["admin","trainer","physiotherapist","physician"],path:"/benachrichtigungen"}];function Pv({children:o}){var w,y;const{profile:n,signOut:s}=wt(),[a,u]=L.useState(!1),[d,f]=L.useState("/dashboard"),p=Tv.filter(b=>(n==null?void 0:n.role)&&b.roles.includes(n.role)),g=b=>{f(b),u(!1),window.location.href=b},x=async()=>{await s()};return l.jsxs("div",{className:"h-screen bg-gray-50 flex overflow-hidden",children:[a&&l.jsx("div",{className:"fixed inset-0 flex z-40 md:hidden",onClick:()=>u(!1),children:l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})}),l.jsxs("div",{className:`
        ${a?"translate-x-0":"-translate-x-full"}
        fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out
        md:translate-x-0 md:static md:inset-0
      `,children:[l.jsxs("div",{className:"flex items-center justify-between h-16 px-6 bg-blue-600",children:[l.jsx("h1",{className:"text-white text-xl font-bold",children:"VolleyMed"}),l.jsx("button",{onClick:()=>u(!1),className:"text-white md:hidden",children:l.jsx(En,{size:24})})]}),l.jsx("nav",{className:"flex-1 px-4 py-6 overflow-y-auto",children:l.jsx("div",{className:"space-y-2",children:p.map(b=>{const C=b.icon;return l.jsxs("button",{onClick:()=>g(b.path),className:`
                    w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors
                    ${d===b.path?"bg-blue-50 text-blue-700 border-r-4 border-blue-700":"text-gray-700 hover:bg-gray-100"}
                  `,children:[l.jsx(C,{size:20,className:"mr-3"}),b.label]},b.id)})})}),l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:(y=(w=n==null?void 0:n.full_name)==null?void 0:w.charAt(0))==null?void 0:y.toUpperCase()})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n==null?void 0:n.full_name}),l.jsx("p",{className:"text-xs text-gray-500 capitalize",children:n==null?void 0:n.role})]})]}),l.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",title:"Abmelden",children:l.jsx(_v,{size:18})})]})})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[l.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between h-16 px-6",children:[l.jsx("button",{onClick:()=>u(!0),className:"text-gray-500 hover:text-gray-700 md:hidden",children:l.jsx(bv,{size:24})}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(Cv,{}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Willkommen, ",n==null?void 0:n.full_name]})]})]})}),l.jsx("main",{className:"flex-1 overflow-auto",children:l.jsx("div",{className:"p-6",children:o})})]})]})}function Rv(){const{signIn:o,loading:n}=wt(),[s,a]=L.useState(""),[u,d]=L.useState(""),[f,p]=L.useState(""),[g,x]=L.useState(!1),w=async y=>{y.preventDefault(),p(""),x(!0);try{const{error:b}=await o(s,u);b&&p("Anmeldung fehlgeschlagen. Bitte überprüfen Sie Ihre Anmeldedaten.")}catch{p("Ein unerwarteter Fehler ist aufgetreten.")}finally{x(!1)}};return n?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"max-w-md w-full space-y-8",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"VolleyMed System"}),l.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Medizinisches Dokumentationssystem für Volleyballvereine"})]}),l.jsxs("form",{className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow",onSubmit:w,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"E-Mail-Adresse"}),l.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:s,onChange:y=>a(y.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"ihre.email@verein.de"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Passwort"}),l.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:u,onChange:y=>d(y.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"})]})]}),f&&l.jsx("div",{className:"rounded-md bg-red-50 p-4",children:l.jsx("div",{className:"text-sm text-red-700",children:f})}),l.jsx("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Anmelden...":"Anmelden"})]}),l.jsx("div",{className:"text-center",children:l.jsx("div",{className:"text-xs text-gray-500",children:"DSGVO-konforme medizinische Dokumentation"})})]})})}function Ov(){const{profile:o}=wt(),[n,s]=L.useState({cmjTests:{value:0,change:0,trend:"stable"},physioSessions:{value:0,change:0,trend:"stable"},newInjuries:{value:0,change:0,trend:"stable"},appointments:{value:0,change:0,trend:"stable"}}),{data:a}=Qe("cmj_tests"),{data:u}=Qe("physio_assessments"),{data:d}=Qe("appointments"),{data:f}=Qe("medical_treatments");L.useEffect(()=>{p()},[a,u,d,f]);const p=()=>{var H,Y,ae,Ne,je,Re,z,ie;const x=new Date,w=new Date(x.getFullYear(),x.getMonth(),x.getDate()-x.getDay()),y=new Date(w.getTime()-7*24*60*60*1e3),b=new Date(w.getTime()-1),C=((H=a==null?void 0:a.filter(le=>new Date(le.test_date)>=w))==null?void 0:H.length)||0,S=((Y=a==null?void 0:a.filter(le=>{const D=new Date(le.test_date);return D>=y&&D<=b}))==null?void 0:Y.length)||0,T=((ae=u==null?void 0:u.filter(le=>new Date(le.date_of_assessment)>=w))==null?void 0:ae.length)||0,A=((Ne=u==null?void 0:u.filter(le=>{const D=new Date(le.date_of_assessment);return D>=y&&D<=b}))==null?void 0:Ne.length)||0,K=((je=d==null?void 0:d.filter(le=>new Date(le.appointment_date)>=w))==null?void 0:je.length)||0,B=((Re=d==null?void 0:d.filter(le=>{const D=new Date(le.appointment_date);return D>=y&&D<=b}))==null?void 0:Re.length)||0,$=((z=f==null?void 0:f.filter(le=>new Date(le.treatment_date)>=w))==null?void 0:z.length)||0,I=((ie=f==null?void 0:f.filter(le=>{const D=new Date(le.treatment_date);return D>=y&&D<=b}))==null?void 0:ie.length)||0,W=(le,D)=>{if(D===0)return{change:0,trend:"stable"};const ne=(le-D)/D*100,ee=ne>5?"up":ne<-5?"down":"stable";return{change:Math.round(ne),trend:ee}};s({cmjTests:{value:C,...W(C,S)},physioSessions:{value:T,...W(T,A)},newInjuries:{value:$,...W($,I)},appointments:{value:K,...W(K,B)}})},g=({title:x,stat:w,icon:y,color:b})=>{const C=()=>{switch(w.trend){case"up":return l.jsx($o,{size:16,className:"text-green-500"});case"down":return l.jsx(Ev,{size:16,className:"text-red-500"});default:return l.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})}},S=()=>{switch(w.trend){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-500"}};return l.jsx("div",{className:`bg-white p-4 rounded-lg border-l-4 ${b} shadow-sm`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-600 font-medium",children:x}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.value}),l.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[C(),l.jsxs("span",{className:`text-sm font-medium ${S()}`,children:[w.change!==0&&`${w.change>0?"+":""}${w.change}%`,w.change===0&&"Unverändert"]}),l.jsx("span",{className:"text-xs text-gray-500",children:"vs. letzte Woche"})]})]}),l.jsx("div",{className:"p-3 bg-gray-50 rounded-full",children:l.jsx(y,{size:24,className:"text-gray-600"})})]})})};return o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Wochenstatistik"}),l.jsx("p",{className:"text-gray-600 text-sm",children:"Live-Trends und Vergleich zur Vorwoche"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm text-gray-500",children:"Live"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.role==="trainer"&&l.jsx(g,{title:"CMJ Tests",stat:n.cmjTests,icon:zr,color:"border-green-400"}),(o.role==="physiotherapist"||o.role==="admin")&&l.jsx(g,{title:"Physio-Sessions",stat:n.physioSessions,icon:of,color:"border-blue-400"}),l.jsx(g,{title:"Termine",stat:n.appointments,icon:vr,color:"border-purple-400"}),(o.role==="physician"||o.role==="admin")&&l.jsx(g,{title:"Neue Behandlungen",stat:n.newInjuries,icon:Ao,color:"border-orange-400"})]}),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schnelle Einblicke"}),l.jsx(jv,{size:20,className:"text-blue-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.cmjTests.value+n.physioSessions.value}),l.jsx("div",{className:"text-sm text-gray-600",children:"Gesamte Assessments"})]}),l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.round(n.appointments.value/7*10)/10}),l.jsx("div",{className:"text-sm text-gray-600",children:"Ø Termine/Tag"})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:n.newInjuries.value===0?"✓":n.newInjuries.value}),l.jsx("div",{className:"text-sm text-gray-600",children:n.newInjuries.value===0?"Keine neuen Verletzungen":"Neue Behandlungen"})]})]})]})]}):null}function Dv(){const{profile:o}=wt(),[n,s]=L.useState({totalPlayers:0,activeInjuries:0,todayAppointments:0,pendingAssessments:0,thisWeekTests:0,criticalRiskPlayers:0}),[a,u]=L.useState([]),[d,f]=L.useState(!0),[p,g]=L.useState(!1),{data:x}=Qe("players"),{data:w}=Qe("appointments"),{data:y}=Qe("physio_assessments"),{data:b}=Qe("cmj_tests"),{data:C}=Qe("performance_assessments"),{unreadCount:S}=sf((o==null?void 0:o.id)||"");L.useEffect(()=>{T()},[]),L.useEffect(()=>{A()},[x,w,y,b,C,o==null?void 0:o.role]),L.useEffect(()=>{B()},[y,b,C]);const T=L.useCallback(async()=>{try{f(!0),await A(),await K()}catch(W){console.error("Error loading dashboard data:",W)}finally{f(!1)}},[o==null?void 0:o.role]),A=L.useCallback(async()=>{var W,H,Y,ae,Ne;try{const je=new Date().toISOString().split("T")[0],Re=new Date(Date.now()-7*24*60*60*1e3).toISOString(),z=((W=x==null?void 0:x.filter(ee=>ee.is_active))==null?void 0:W.length)||0,ie=((H=w==null?void 0:w.filter(ee=>{var V;return((V=ee.appointment_date)==null?void 0:V.split("T")[0])===je&&ee.status==="scheduled"}))==null?void 0:H.length)||0;let le=0,D=0,ne=0;(o==null?void 0:o.role)==="physiotherapist"?le=((Y=y==null?void 0:y.filter(ee=>ee.date_of_assessment>=Re))==null?void 0:Y.length)||0:(o==null?void 0:o.role)==="trainer"&&(D=((ae=b==null?void 0:b.filter(ee=>ee.test_date>=Re))==null?void 0:ae.length)||0,ne=((Ne=C==null?void 0:C.filter(ee=>(ee.risk_score||0)>=7))==null?void 0:Ne.length)||0),s({totalPlayers:z,activeInjuries:0,todayAppointments:ie,pendingAssessments:le,thisWeekTests:D,criticalRiskPlayers:ne})}catch(je){console.error("Error updating stats from realtime data:",je)}},[x,w,y,b,C,o==null?void 0:o.role]),K=L.useCallback(async()=>{try{const W=[];if(b&&b.length>0){const H=b.sort((Y,ae)=>new Date(ae.test_date).getTime()-new Date(Y.test_date).getTime()).slice(0,3);for(const Y of H){const{data:ae}=await fe.from("players").select("first_name, last_name").eq("id",Y.player_id).single();W.push({id:`cmj-${Y.id}`,type:"CMJ Test",description:`CMJ Test durchgeführt (${Y.jump_height_cm||"N/A"}cm)`,timestamp:Y.test_date,playerName:ae?`${ae.first_name} ${ae.last_name}`:"Unbekannter Spieler"})}}if(y&&y.length>0){const H=y.sort((Y,ae)=>new Date(ae.date_of_assessment).getTime()-new Date(Y.date_of_assessment).getTime()).slice(0,3);for(const Y of H){const{data:ae}=await fe.from("players").select("first_name, last_name").eq("id",Y.player_id).single();W.push({id:`physio-${Y.id}`,type:"Physiotherapie",description:Y.diagnosis||"Eingangsbefund erstellt",timestamp:Y.date_of_assessment,playerName:ae?`${ae.first_name} ${ae.last_name}`:"Unbekannter Patient"})}}W.sort((H,Y)=>new Date(Y.timestamp).getTime()-new Date(H.timestamp).getTime()),u(W.slice(0,5))}catch(W){console.error("Error loading recent activities:",W)}},[b,y]),B=L.useCallback(async()=>{d||await K()},[K,d]),$=async()=>{g(!0),await T(),setTimeout(()=>g(!1),500)},I=({icon:W,title:H,value:Y,subtitle:ae,color:Ne="blue"})=>{const je={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",orange:"bg-orange-50 text-orange-600",red:"bg-red-50 text-red-600"};return l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:H}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:Y}),l.jsx("p",{className:"text-sm text-gray-500",children:ae})]}),l.jsx("div",{className:`p-3 rounded-full ${je[Ne]}`,children:l.jsx(W,{size:24})})]})})};return d?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Dashboard - Medizinisches Dokumentationssystem"}),l.jsxs("p",{className:"text-gray-600",children:["Willkommen, ",o==null?void 0:o.full_name,". Übersicht über alle wichtigen Kennzahlen und Aktivitäten."]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[S>0&&l.jsxs("div",{className:"bg-red-100 text-red-600 px-3 py-1 rounded-full text-sm font-medium",children:[S," neue Benachrichtigung",S===1?"":"en"]}),l.jsxs("button",{onClick:$,disabled:p,className:"flex items-center space-x-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[l.jsx(kv,{size:16,className:p?"animate-spin":""}),l.jsx("span",{children:"Aktualisieren"})]})]})]})}),l.jsx(Ov,{}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(I,{icon:of,title:"Aktive Spieler",value:n.totalPlayers,subtitle:"Im System registriert",color:"blue"}),l.jsx(I,{icon:vr,title:"Heute Termine",value:n.todayAppointments,subtitle:"Geplante Termine",color:"green"}),(o==null?void 0:o.role)==="physiotherapist"&&l.jsx(I,{icon:Pt,title:"Neue Befunde",value:n.pendingAssessments,subtitle:"Diese Woche",color:"blue"}),(o==null?void 0:o.role)==="trainer"&&l.jsxs(l.Fragment,{children:[l.jsx(I,{icon:zr,title:"CMJ Tests",value:n.thisWeekTests,subtitle:"Diese Woche",color:"green"}),l.jsx(I,{icon:Qi,title:"Risiko-Spieler",value:n.criticalRiskPlayers,subtitle:"Hoher Risikoscore",color:"red"})]}),n.activeInjuries>0&&l.jsx(I,{icon:Qi,title:"Aktive Verletzungen",value:n.activeInjuries,subtitle:"Aktuell in Behandlung",color:"orange"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Letzte Aktivitäten"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse",title:"Live-Updates aktiv"}),l.jsx($o,{size:20,className:"text-blue-600"})]})]}),l.jsx("div",{className:"space-y-4",children:a.length===0?l.jsxs("div",{className:"text-center py-4 text-gray-500",children:[l.jsx(zr,{size:24,className:"mx-auto mb-2 text-gray-400"}),l.jsx("p",{children:"Noch keine Aktivitäten vorhanden"})]}):a.map(W=>{const H=new Date(W.timestamp)>new Date(Date.now()-36e5);return l.jsxs("div",{className:`flex items-start space-x-3 p-2 rounded-lg transition-colors ${H?"bg-blue-50 border border-blue-200":""}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${W.type==="CMJ Test"?"bg-green-500":W.type==="Physiotherapie"?"bg-blue-500":"bg-purple-500"}`}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:W.description}),l.jsxs("p",{className:"text-sm text-gray-600",children:[W.playerName," - ",W.type]}),l.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(W.timestamp).toLocaleString("de-DE"),H&&l.jsx("span",{className:"ml-2 text-blue-600 font-medium",children:"Neu"})]})]})]},W.id)})})]}),l.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Schnellzugriff"}),l.jsx(ko,{size:20,className:"text-blue-600"})]}),l.jsxs("div",{className:"space-y-3",children:[(o==null?void 0:o.role)==="trainer"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Neuer CMJ Test"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Counter Movement Jump Test durchführen"})]}),l.jsxs("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Risikobewertung"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Verletzungsrisiko bewerten"})]})]}),(o==null?void 0:o.role)==="physiotherapist"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Neuer Eingangsbefund"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Patientenakte erstellen"})]}),l.jsxs("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Behandlung dokumentieren"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Therapiesitzung erfassen"})]})]}),(o==null?void 0:o.role)==="physician"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Neue Behandlung"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Medizinische Behandlung dokumentieren"})]}),l.jsxs("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Dokument hochladen"}),l.jsx("div",{className:"text-sm text-gray-600",children:"MRT, Röntgen oder Befund hinzufügen"})]})]}),l.jsxs("button",{className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"font-medium text-gray-900",children:"Termin vereinbaren"}),l.jsx("div",{className:"text-sm text-gray-600",children:"Neuen Termin planen"})]})]})]})]})]})}function Av(){const{profile:o}=wt(),[n,s]=L.useState("cmj"),[a,u]=L.useState("list"),[d,f]=L.useState(null),[p,g]=L.useState(""),[x,w]=L.useState(!1),[y,b]=L.useState(!1),{data:C}=Qe("players"),{data:S,setData:T}=Qe("cmj_tests"),{data:A,setData:K}=Qe("performance_assessments"),[B,$]=L.useState({player_id:"",test_date:new Date().toISOString().split("T")[0],jump_height_cm:void 0,flight_time_ms:void 0,ground_contact_time_ms:void 0,balance_left_percent:void 0,balance_right_percent:void 0,peak_force_n:void 0,power_watts:void 0,rsi_score:void 0,notes:""}),[I,W]=L.useState({player_id:"",assessment_date:new Date().toISOString().split("T")[0],risk_score:void 0,fatigue_level:void 0,readiness_score:void 0,strength_assessment:"",mobility_assessment:"",recommendations:"",return_to_play_status:"cleared"}),H=async()=>{try{b(!0);const D={...B,tested_by:o==null?void 0:o.id};let ne;if(a==="edit"&&(d!=null&&d.id)?ne=await fe.from("cmj_tests").update(D).eq("id",d.id).select().single():ne=await fe.from("cmj_tests").insert([D]).select().single(),ne.error)throw ne.error;T(a==="edit"?ee=>ee.map(V=>V.id===ne.data.id?ne.data:V):ee=>[ne.data,...ee]),u("list"),ae()}catch(D){console.error("Error saving CMJ test:",D),alert("Fehler beim Speichern: "+D.message)}finally{b(!1)}},Y=async()=>{try{b(!0);const D={...I,assessed_by:o==null?void 0:o.id};let ne;if(a==="edit"&&(d!=null&&d.id)?ne=await fe.from("performance_assessments").update(D).eq("id",d.id).select().single():ne=await fe.from("performance_assessments").insert([D]).select().single(),ne.error)throw ne.error;K(a==="edit"?ee=>ee.map(V=>V.id===ne.data.id?ne.data:V):ee=>[ne.data,...ee]),u("list"),ae()}catch(D){console.error("Error saving performance assessment:",D),alert("Fehler beim Speichern: "+D.message)}finally{b(!1)}},ae=()=>{$({player_id:"",test_date:new Date().toISOString().split("T")[0],jump_height_cm:void 0,flight_time_ms:void 0,ground_contact_time_ms:void 0,balance_left_percent:void 0,balance_right_percent:void 0,peak_force_n:void 0,power_watts:void 0,rsi_score:void 0,notes:""}),W({player_id:"",assessment_date:new Date().toISOString().split("T")[0],risk_score:void 0,fatigue_level:void 0,readiness_score:void 0,strength_assessment:"",mobility_assessment:"",recommendations:"",return_to_play_status:"cleared"}),f(null)},Ne=D=>{n==="cmj"?$(D):W(D),f(D),u("edit")},je=D=>{f(D),u("view")},Re=D=>{const ne=C==null?void 0:C.find(ee=>ee.id===D);return ne?`${ne.first_name} ${ne.last_name}`:"Unbekannt"},z=D=>{const ne=(S==null?void 0:S.filter(V=>V.player_id===D))||[],ee=ne.sort((V,se)=>new Date(se.test_date).getTime()-new Date(V.test_date).getTime())[0];return{totalTests:ne.length,latestHeight:ee==null?void 0:ee.jump_height_cm,latestRSI:ee==null?void 0:ee.rsi_score}},ie=()=>n==="cmj"?(S==null?void 0:S.filter(D=>p?Re(D.player_id).toLowerCase().includes(p.toLowerCase()):!0))||[]:(A==null?void 0:A.filter(D=>p?Re(D.player_id).toLowerCase().includes(p.toLowerCase()):!0))||[],le=D=>D?D>=8?"text-red-600":D>=6?"text-orange-600":D>=4?"text-yellow-600":"text-green-600":"text-gray-500";return a==="list"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Athletiktrainer"}),l.jsx("p",{className:"text-gray-600",children:"Leistungsdiagnostik und Performance-Assessments"})]}),l.jsxs("button",{onClick:()=>u("new"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[l.jsx(Io,{size:20}),l.jsxs("span",{children:["Neuer ",n==="cmj"?"CMJ Test":"Performance-Assessment"]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"border-b border-gray-200",children:l.jsxs("nav",{className:"flex space-x-8 px-6",children:[l.jsxs("button",{onClick:()=>s("cmj"),className:`py-4 px-1 border-b-2 font-medium text-sm ${n==="cmj"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(zr,{size:18,className:"inline mr-2"}),"CMJ Tests"]}),l.jsxs("button",{onClick:()=>s("performance"),className:`py-4 px-1 border-b-2 font-medium text-sm ${n==="performance"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(So,{size:18,className:"inline mr-2"}),"Performance-Assessments"]})]})}),l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(ea,{size:20,className:"absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Spieler suchen...",value:p,onChange:D=>g(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(Lo,{size:18}),l.jsx("span",{children:"Filter"})]})]})})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsx("div",{className:"divide-y divide-gray-200",children:ie().length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n==="cmj"?l.jsxs(l.Fragment,{children:[l.jsx(zr,{size:48,className:"mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Keine CMJ Tests gefunden"})]}):l.jsxs(l.Fragment,{children:[l.jsx(So,{size:48,className:"mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Keine Performance-Assessments gefunden"})]}),l.jsx("p",{className:"text-sm",children:"Erstellen Sie einen neuen Eintrag mit der Schaltfläche oben."})]}):ie().map(D=>{const ne=C==null?void 0:C.find(ee=>ee.id===D.player_id);return z(D.player_id),l.jsx("div",{className:"p-4 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Uo,{size:20,className:"text-blue-600"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"font-semibold text-gray-900",children:[Re(D.player_id),(ne==null?void 0:ne.jersey_number)&&l.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["#",ne.jersey_number]})]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(vr,{size:14}),l.jsx("span",{children:new Date(D.test_date||D.assessment_date).toLocaleDateString("de-DE")})]}),n==="cmj"&&l.jsxs(l.Fragment,{children:[D.jump_height_cm&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx($o,{size:14}),l.jsxs("span",{children:[D.jump_height_cm,"cm"]})]}),D.rsi_score&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(Ao,{size:14}),l.jsxs("span",{children:["RSI: ",D.rsi_score]})]})]}),n==="performance"&&l.jsxs(l.Fragment,{children:[D.risk_score&&l.jsxs("span",{className:`flex items-center space-x-1 ${le(D.risk_score)}`,children:[l.jsx(Qi,{size:14}),l.jsxs("span",{children:["Risiko: ",D.risk_score,"/10"]})]}),D.readiness_score&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(zr,{size:14}),l.jsxs("span",{children:["Bereitschaft: ",D.readiness_score,"/10"]})]})]})]})]})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>je(D),className:"p-2 text-gray-600 hover:text-blue-600",title:"Anzeigen",children:l.jsx(Xi,{size:18})}),l.jsx("button",{onClick:()=>Ne(D),className:"p-2 text-gray-600 hover:text-blue-600",title:"Bearbeiten",children:l.jsx(zo,{size:18})})]})]})},D.id)})})})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a==="new"?`Neuer ${n==="cmj"?"CMJ Test":"Performance-Assessment"}`:a==="edit"?`${n==="cmj"?"CMJ Test":"Performance-Assessment"} bearbeiten`:`${n==="cmj"?"CMJ Test":"Performance-Assessment"} anzeigen`}),l.jsx("p",{className:"text-gray-600",children:n==="cmj"?"Counter Movement Jump Test":"Leistungsdiagnostik und Risikoeinschätzung"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("button",{onClick:()=>{u("list"),ae()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(En,{size:18,className:"inline mr-2"}),"Abbrechen"]}),a!=="view"&&l.jsxs("button",{onClick:n==="cmj"?H:Y,disabled:y||!(n==="cmj"?B.player_id:I.player_id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Zi,{size:18,className:"inline mr-2"}),y?"Speichern...":"Speichern"]})]})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spieler *"}),l.jsxs("select",{value:n==="cmj"?B.player_id:I.player_id,onChange:D=>{n==="cmj"?$({...B,player_id:D.target.value}):W({...I,player_id:D.target.value})},disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",required:!0,children:[l.jsx("option",{value:"",children:"Spieler auswählen..."}),C==null?void 0:C.map(D=>l.jsxs("option",{value:D.id,children:[D.first_name," ",D.last_name,D.jersey_number?`(#${D.jersey_number})`:""]},D.id))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n==="cmj"?"Testdatum":"Bewertungsdatum"," *"]}),l.jsx("input",{type:"date",value:n==="cmj"?B.test_date:I.assessment_date,onChange:D=>{n==="cmj"?$({...B,test_date:D.target.value}):W({...I,assessment_date:D.target.value})},disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",required:!0})]})]}),n==="cmj"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sprungleistung"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sprunghiöhe (cm)"}),l.jsx("input",{type:"number",step:"0.1",value:B.jump_height_cm||"",onChange:D=>$({...B,jump_height_cm:D.target.value?parseFloat(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 45.2"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Flugzeit (ms)"}),l.jsx("input",{type:"number",step:"1",value:B.flight_time_ms||"",onChange:D=>$({...B,flight_time_ms:D.target.value?parseInt(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bodenkontaktzeit (ms)"}),l.jsx("input",{type:"number",step:"1",value:B.ground_contact_time_ms||"",onChange:D=>$({...B,ground_contact_time_ms:D.target.value?parseInt(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 250"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Kraftparameter"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spitzenkraft (N)"}),l.jsx("input",{type:"number",step:"1",value:B.peak_force_n||"",onChange:D=>$({...B,peak_force_n:D.target.value?parseInt(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 2500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Leistung (Watt)"}),l.jsx("input",{type:"number",step:"1",value:B.power_watts||"",onChange:D=>$({...B,power_watts:D.target.value?parseInt(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 3500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSI Score"}),l.jsx("input",{type:"number",step:"0.01",value:B.rsi_score||"",onChange:D=>$({...B,rsi_score:D.target.value?parseFloat(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 1.8"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Balance"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance Links (%)"}),l.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:B.balance_left_percent||"",onChange:D=>$({...B,balance_left_percent:D.target.value?parseFloat(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 48.5"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Balance Rechts (%)"}),l.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:B.balance_right_percent||"",onChange:D=>$({...B,balance_right_percent:D.target.value?parseFloat(D.target.value):void 0}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. 51.5"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notizen"}),l.jsx("textarea",{value:B.notes||"",onChange:D=>$({...B,notes:D.target.value}),disabled:a==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Besonderheiten, Auffälligkeiten oder Kommentare"})]})]}),n==="performance"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Risikoeinschätzung"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risikoscore (1-10)"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:I.risk_score||5,onChange:D=>W({...I,risk_score:parseInt(D.target.value)}),disabled:a==="view",className:"flex-1"}),l.jsx("span",{className:`text-2xl font-bold w-8 ${le(I.risk_score)}`,children:I.risk_score||5})]}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"Niedrig"}),l.jsx("span",{children:"Mittel"}),l.jsx("span",{children:"Hoch"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ermüdungsgrad (1-10)"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:I.fatigue_level||5,onChange:D=>W({...I,fatigue_level:parseInt(D.target.value)}),disabled:a==="view",className:"flex-1"}),l.jsx("span",{className:"text-2xl font-bold text-gray-900 w-8",children:I.fatigue_level||5})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bereitschaftsscore (1-10)"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:I.readiness_score||5,onChange:D=>W({...I,readiness_score:parseInt(D.target.value)}),disabled:a==="view",className:"flex-1"}),l.jsx("span",{className:"text-2xl font-bold text-green-600 w-8",children:I.readiness_score||5})]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Assessments"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kraftbewertung"}),l.jsx("textarea",{value:I.strength_assessment||"",onChange:D=>W({...I,strength_assessment:D.target.value}),disabled:a==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Krafttests, Schwächen, Stärken"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobilitätsbewertung"}),l.jsx("textarea",{value:I.mobility_assessment||"",onChange:D=>W({...I,mobility_assessment:D.target.value}),disabled:a==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Beweglichkeitstests, Einschränkungen"})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Return-to-Play Status"}),l.jsxs("select",{value:I.return_to_play_status||"cleared",onChange:D=>W({...I,return_to_play_status:D.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",children:[l.jsx("option",{value:"cleared",children:"Vollständig freigegeben"}),l.jsx("option",{value:"restricted",children:"Eingeschränkt freigegeben"}),l.jsx("option",{value:"modified",children:"Modifiziertes Training"}),l.jsx("option",{value:"not_cleared",children:"Nicht freigegeben"})]})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empfehlungen"}),l.jsx("textarea",{value:I.recommendations||"",onChange:D=>W({...I,recommendations:D.target.value}),disabled:a==="view",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Trainingsempfehlungen, Präventionsmaßnahmen, weitere Maßnahmen"})]})]})]})})]})}function Lv(){const{profile:o}=wt(),[n,s]=L.useState("list"),[a,u]=L.useState(null),[d,f]=L.useState(""),[p,g]=L.useState(!1),[x,w]=L.useState(!1),{data:y}=Qe("players"),{data:b,setData:C}=Qe("physio_assessments"),[S,T]=L.useState({player_id:"",date_of_assessment:new Date().toISOString().split("T")[0],diagnosis:"",secondary_diagnosis:"",medications:"",recreational_activities:"",social_history:"",current_occupation:"",current_complaints:"",complaints_in_daily_life:"",complaints_since_when:"",frequency_of_complaints:"",triggered_by:"",relieved_by:"",previous_treatments:"",previous_therapies:"",inspection_findings:"",palpation_findings:"",pain_intensity:5,pain_description:"",specific_findings:"",therapy_goals:""}),[A,K]=L.useState([]),[B,$]=L.useState({date:new Date().toISOString().split("T")[0],notes:""});L.useEffect(()=>{a!=null&&a.id&&I(a.id)},[a]);const I=async z=>{try{const{data:ie,error:le}=await fe.from("physio_documentation").select("*").eq("assessment_id",z).order("date",{ascending:!1});if(le)throw le;K(ie||[])}catch(ie){console.error("Error loading documentation:",ie)}},W=async()=>{try{w(!0);const z={...S,therapist_id:o==null?void 0:o.id};let ie;if(n==="edit"&&(a!=null&&a.id)?ie=await fe.from("physio_assessments").update(z).eq("id",a.id).select().single():ie=await fe.from("physio_assessments").insert([z]).select().single(),ie.error)throw ie.error;C(n==="edit"?le=>le.map(D=>D.id===ie.data.id?ie.data:D):le=>[ie.data,...le]),s("list"),Y()}catch(z){console.error("Error saving assessment:",z),alert("Fehler beim Speichern: "+z.message)}finally{w(!1)}},H=async()=>{if(!(!(a!=null&&a.id)||!B.notes.trim()))try{const{data:z,error:ie}=await fe.from("physio_documentation").insert([{assessment_id:a.id,date:B.date,notes:B.notes,therapist_id:o==null?void 0:o.id}]).select().single();if(ie)throw ie;K(le=>[z,...le]),$({date:new Date().toISOString().split("T")[0],notes:""})}catch(z){console.error("Error adding documentation:",z)}},Y=()=>{T({player_id:"",date_of_assessment:new Date().toISOString().split("T")[0],diagnosis:"",secondary_diagnosis:"",medications:"",recreational_activities:"",social_history:"",current_occupation:"",current_complaints:"",complaints_in_daily_life:"",complaints_since_when:"",frequency_of_complaints:"",triggered_by:"",relieved_by:"",previous_treatments:"",previous_therapies:"",inspection_findings:"",palpation_findings:"",pain_intensity:5,pain_description:"",specific_findings:"",therapy_goals:""}),u(null)},ae=z=>{T(z),u(z),s("edit")},Ne=z=>{u(z),s("view")},je=(b==null?void 0:b.filter(z=>{var D;if(!d)return!0;const ie=y==null?void 0:y.find(ne=>ne.id===z.player_id);return`${(ie==null?void 0:ie.first_name)||""} ${(ie==null?void 0:ie.last_name)||""}`.toLowerCase().includes(d.toLowerCase())||((D=z.diagnosis)==null?void 0:D.toLowerCase().includes(d.toLowerCase()))}))||[],Re=z=>{const ie=y==null?void 0:y.find(le=>le.id===z);return ie?`${ie.first_name} ${ie.last_name}`:"Unbekannt"};return n==="list"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Physiotherapie"}),l.jsx("p",{className:"text-gray-600",children:"Eingangsbefunde und Behandlungsdokumentation"})]}),l.jsxs("button",{onClick:()=>s("new"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[l.jsx(Io,{size:20}),l.jsx("span",{children:"Neuer Eingangsbefund"})]})]}),l.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(ea,{size:20,className:"absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Patient oder Diagnose suchen...",value:d,onChange:z=>f(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(Lo,{size:18}),l.jsx("span",{children:"Filter"})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsx("div",{className:"divide-y divide-gray-200",children:je.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Pt,{size:48,className:"mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Keine Eingangsbefunde gefunden"}),l.jsx("p",{className:"text-sm",children:"Erstellen Sie einen neuen Befund mit der Schaltfläche oben."})]}):je.map(z=>(y==null||y.find(ie=>ie.id===z.player_id),l.jsx("div",{className:"p-4 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:l.jsx(Uo,{size:20,className:"text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:Re(z.player_id)}),l.jsx("p",{className:"text-gray-600",children:z.diagnosis}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(vr,{size:14}),l.jsx("span",{children:new Date(z.date_of_assessment).toLocaleDateString("de-DE")})]}),z.pain_intensity&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(bs,{size:14}),l.jsxs("span",{children:["Schmerz: ",z.pain_intensity,"/10"]})]})]})]})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>Ne(z),className:"p-2 text-gray-600 hover:text-blue-600",title:"Anzeigen",children:l.jsx(Xi,{size:18})}),l.jsx("button",{onClick:()=>ae(z),className:"p-2 text-gray-600 hover:text-blue-600",title:"Bearbeiten",children:l.jsx(zo,{size:18})})]})]})},z.id)))})})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n==="new"?"Neuer Eingangsbefund":n==="edit"?"Befund bearbeiten":"Befund anzeigen"}),l.jsx("p",{className:"text-gray-600",children:"Physiotherapeutische Erstbeurteilung"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("button",{onClick:()=>{s("list"),Y()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(En,{size:18,className:"inline mr-2"}),"Abbrechen"]}),n!=="view"&&l.jsxs("button",{onClick:W,disabled:x||!S.player_id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Zi,{size:18,className:"inline mr-2"}),x?"Speichern...":"Speichern"]})]})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient *"}),l.jsxs("select",{value:S.player_id,onChange:z=>T({...S,player_id:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",required:!0,children:[l.jsx("option",{value:"",children:"Patient auswählen..."}),y==null?void 0:y.map(z=>l.jsxs("option",{value:z.id,children:[z.first_name," ",z.last_name,z.jersey_number?`(#${z.jersey_number})`:""]},z.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datum der Bewertung *"}),l.jsx("input",{type:"date",value:S.date_of_assessment,onChange:z=>T({...S,date_of_assessment:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diagnose *"}),l.jsx("input",{type:"text",value:S.diagnosis||"",onChange:z=>T({...S,diagnosis:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Hauptdiagnose"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relevante Nebendiagnose"}),l.jsx("input",{type:"text",value:S.secondary_diagnosis||"",onChange:z=>T({...S,secondary_diagnosis:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Nebendiagnose"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medikamente"}),l.jsx("input",{type:"text",value:S.medications||"",onChange:z=>T({...S,medications:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Aktuelle Medikation"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Freizeitaktivitäten"}),l.jsx("input",{type:"text",value:S.recreational_activities||"",onChange:z=>T({...S,recreational_activities:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Sportliche und andere Aktivitäten"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sozialanamnese"}),l.jsx("input",{type:"text",value:S.social_history||"",onChange:z=>T({...S,social_history:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Familiäre und soziale Situation"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aktuelle Tätigkeit"}),l.jsx("input",{type:"text",value:S.current_occupation||"",onChange:z=>T({...S,current_occupation:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Beruf/Ausbildung"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Aktuelle Beschwerden"}),l.jsx("textarea",{value:S.current_complaints||"",onChange:z=>T({...S,current_complaints:z.target.value}),disabled:n==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Beschreibung der aktuellen Beschwerden"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Beschwerdeanamnese"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wie machen sich die Beschwerden im Alltag bemerkbar?"}),l.jsx("textarea",{value:S.complaints_in_daily_life||"",onChange:z=>T({...S,complaints_in_daily_life:z.target.value}),disabled:n==="view",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seit wann bestehen die Beschwerden?"}),l.jsx("input",{type:"text",value:S.complaints_since_when||"",onChange:z=>T({...S,complaints_since_when:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Häufigkeit der Beschwerden"}),l.jsx("input",{type:"text",value:S.frequency_of_complaints||"",onChange:z=>T({...S,frequency_of_complaints:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. täglich, bei Belastung"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wodurch werden sie ausgelöst?"}),l.jsx("input",{type:"text",value:S.triggered_by||"",onChange:z=>T({...S,triggered_by:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. gehen, stehen, heben"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wie lassen sie sich verringern?"}),l.jsx("input",{type:"text",value:S.relieved_by||"",onChange:z=>T({...S,relieved_by:z.target.value}),disabled:n==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. Kälte, Wärme, Ruhe, Medikamente"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bisherige Behandlung"}),l.jsx("textarea",{value:S.previous_treatments||"",onChange:z=>T({...S,previous_treatments:z.target.value}),disabled:n==="view",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Wie werden die Beschwerden bisher behandelt?"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bisherige Therapien"}),l.jsx("textarea",{value:S.previous_therapies||"",onChange:z=>T({...S,previous_therapies:z.target.value}),disabled:n==="view",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Welche Therapien sind bisher erfolgt?"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Untersuchungsbefunde"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Inspektion"}),l.jsx("textarea",{value:S.inspection_findings||"",onChange:z=>T({...S,inspection_findings:z.target.value}),disabled:n==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Sichtbare Befunde"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Palpation"}),l.jsx("textarea",{value:S.palpation_findings||"",onChange:z=>T({...S,palpation_findings:z.target.value}),disabled:n==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Tastbare Befunde"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schmerzbewertung"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schmerzstärke (0=kein Schmerz / 10=stärkster vorstellbarer Schmerz)"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("input",{type:"range",min:"0",max:"10",value:S.pain_intensity||0,onChange:z=>T({...S,pain_intensity:parseInt(z.target.value)}),disabled:n==="view",className:"flex-1"}),l.jsx("span",{className:"text-2xl font-bold text-gray-900 w-8",children:S.pain_intensity||0})]}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"0"}),l.jsx("span",{children:"5"}),l.jsx("span",{children:"10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wie fühlt sich der Schmerz an?"}),l.jsx("textarea",{value:S.pain_description||"",onChange:z=>T({...S,pain_description:z.target.value}),disabled:n==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Schmerzqualität (z.B. stechend, dumpf, brennend)"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Spezifische Befunde"}),l.jsx("textarea",{value:S.specific_findings||"",onChange:z=>T({...S,specific_findings:z.target.value}),disabled:n==="view",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Zusätzliche spezifische Untersuchungsbefunde"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Therapie-/Teilziele"}),l.jsx("textarea",{value:S.therapy_goals||"",onChange:z=>T({...S,therapy_goals:z.target.value}),disabled:n==="view",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Behandlungsziele und geplante Maßnahmen"})]})]})}),n==="view"&&a&&l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Dokumentation"}),l.jsxs("span",{className:"text-sm text-gray-500",children:[A.length," Einträge"]})]}),l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datum"}),l.jsx("input",{type:"date",value:B.date,onChange:z=>$({...B,date:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notizen"}),l.jsx("input",{type:"text",value:B.notes,onChange:z=>$({...B,notes:z.target.value}),placeholder:"Behandlungsnotizen hinzufügen",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsx("button",{onClick:H,disabled:!B.notes.trim(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Hinzufügen"})]})}),l.jsx("div",{className:"space-y-3",children:A.length===0?l.jsx("p",{className:"text-gray-500 text-center py-4",children:"Noch keine Dokumentation vorhanden"}):A.map(z=>l.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"font-medium text-gray-900",children:new Date(z.date).toLocaleDateString("de-DE")}),l.jsx("span",{className:"text-xs text-gray-500",children:z.created_at&&new Date(z.created_at).toLocaleString("de-DE")})]}),l.jsx("p",{className:"text-gray-700 mt-1",children:z.notes})]})]},z.id))})]})})]})}function Iv(){const{profile:o}=wt(),[n,s]=L.useState("treatments"),[a,u]=L.useState("list"),[d,f]=L.useState(null),[p,g]=L.useState(""),[x,w]=L.useState(!1),[y,b]=L.useState(!1),[C,S]=L.useState(!1),{data:T}=Qe("players"),{data:A,setData:K}=Qe("medical_treatments"),[B,$]=L.useState([]),[I,W]=L.useState({player_id:"",treatment_date:new Date().toISOString().split("T")[0],treating_doctor:"",hospital_or_practice:"",icd10_code:"",diagnosis:"",treatment_measures:"",therapy_recommendations:"",prognosis:"",follow_up_date:"",treatment_notes:""}),[H,Y]=L.useState({player_id:"",treatment_id:"",document_type:"radiology",document_name:"",notes:""}),[ae,Ne]=L.useState(null);L.useEffect(()=>{je()},[]);const je=async()=>{try{const{data:v,error:P}=await fe.from("medical_documents").select("*").order("upload_date",{ascending:!1});if(P)throw P;$(v||[])}catch(v){console.error("Error loading documents:",v)}},Re=async()=>{try{b(!0);const v={...I,created_by:o==null?void 0:o.id};let P;if(a==="edit"&&(d!=null&&d.id)?P=await fe.from("medical_treatments").update(v).eq("id",d.id).select().single():P=await fe.from("medical_treatments").insert([v]).select().single(),P.error)throw P.error;K(a==="edit"?J=>J.map(Q=>Q.id===P.data.id?P.data:Q):J=>[P.data,...J]),u("list"),le()}catch(v){console.error("Error saving treatment:",v),alert("Fehler beim Speichern: "+v.message)}finally{b(!1)}},z=async()=>{if(!ae||!H.player_id){alert("Bitte wählen Sie eine Datei und einen Patienten aus.");return}try{S(!0);const v=ae.name.split(".").pop(),P=`${H.player_id}/${Date.now()}.${v}`,{data:J,error:Q}=await fe.storage.from("medical_documents").upload(P,ae);if(Q)throw Q;const ce={player_id:H.player_id,treatment_id:H.treatment_id||null,document_type:H.document_type,document_name:H.document_name||ae.name,file_path:J.path,upload_date:new Date().toISOString().split("T")[0],uploaded_by:o==null?void 0:o.id,notes:H.notes},{data:me,error:we}=await fe.from("medical_documents").insert([ce]).select().single();if(we)throw we;$(_e=>[me,..._e]),Ne(null),Y({player_id:"",treatment_id:"",document_type:"radiology",document_name:"",notes:""}),alert("Dokument erfolgreich hochgeladen!")}catch(v){console.error("Error uploading file:",v),alert("Fehler beim Hochladen: "+v.message)}finally{S(!1)}},ie=async v=>{try{const{data:P,error:J}=await fe.storage.from("medical_documents").download(v.file_path);if(J)throw J;const Q=URL.createObjectURL(P),ce=document.createElement("a");ce.href=Q,ce.download=v.document_name,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(Q)}catch(P){console.error("Error downloading file:",P),alert("Fehler beim Download: "+P.message)}},le=()=>{W({player_id:"",treatment_date:new Date().toISOString().split("T")[0],treating_doctor:"",hospital_or_practice:"",icd10_code:"",diagnosis:"",treatment_measures:"",therapy_recommendations:"",prognosis:"",follow_up_date:"",treatment_notes:""}),f(null)},D=v=>{W(v),f(v),u("edit")},ne=v=>{f(v),u("view")},ee=v=>{const P=T==null?void 0:T.find(J=>J.id===v);return P?`${P.first_name} ${P.last_name}`:"Unbekannt"},V=(A==null?void 0:A.filter(v=>{var J,Q;return p?ee(v.player_id).toLowerCase().includes(p.toLowerCase())||((J=v.diagnosis)==null?void 0:J.toLowerCase().includes(p.toLowerCase()))||((Q=v.icd10_code)==null?void 0:Q.toLowerCase().includes(p.toLowerCase())):!0}))||[],se=(B==null?void 0:B.filter(v=>{var J,Q;return p?ee(v.player_id).toLowerCase().includes(p.toLowerCase())||((J=v.document_name)==null?void 0:J.toLowerCase().includes(p.toLowerCase()))||((Q=v.document_type)==null?void 0:Q.toLowerCase().includes(p.toLowerCase())):!0}))||[],N=v=>({radiology:"Radiologie (Röntgen, MRT, CT)",lab_results:"Laborergebnisse",referral:"Ü̈berweisung",discharge_summary:"Entlassungsbericht",therapy_plan:"Therapieplan",other:"Sonstiges"})[v]||v;return a==="list"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ärzte-Modul"}),l.jsx("p",{className:"text-gray-600",children:"Medizinische Behandlungen und Dokumentation"})]}),l.jsxs("button",{onClick:()=>u("new"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[l.jsx(Io,{size:20}),l.jsxs("span",{children:["Neue ",n==="treatments"?"Behandlung":"Dokument hochladen"]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[l.jsx("div",{className:"border-b border-gray-200",children:l.jsxs("nav",{className:"flex space-x-8 px-6",children:[l.jsxs("button",{onClick:()=>s("treatments"),className:`py-4 px-1 border-b-2 font-medium text-sm ${n==="treatments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Vi,{size:18,className:"inline mr-2"}),"Behandlungen"]}),l.jsxs("button",{onClick:()=>s("documents"),className:`py-4 px-1 border-b-2 font-medium text-sm ${n==="documents"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(Pt,{size:18,className:"inline mr-2"}),"Dokumente"]})]})}),l.jsx("div",{className:"p-4",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(ea,{size:20,className:"absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:n==="treatments"?"Patient oder Diagnose suchen...":"Patient oder Dokument suchen...",value:p,onChange:v=>g(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(Lo,{size:18}),l.jsx("span",{children:"Filter"})]})]})})]}),n==="treatments"?l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsx("div",{className:"divide-y divide-gray-200",children:V.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Vi,{size:48,className:"mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Keine Behandlungen gefunden"}),l.jsx("p",{className:"text-sm",children:"Erstellen Sie eine neue Behandlung mit der Schaltfläche oben."})]}):V.map(v=>l.jsx("div",{className:"p-4 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:l.jsx(Uo,{size:20,className:"text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:ee(v.player_id)}),l.jsx("p",{className:"text-gray-600",children:v.diagnosis}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(vr,{size:14}),l.jsx("span",{children:new Date(v.treatment_date).toLocaleDateString("de-DE")})]}),v.icd10_code&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(Pt,{size:14}),l.jsxs("span",{children:["ICD-10: ",v.icd10_code]})]}),v.treating_doctor&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(Vi,{size:14}),l.jsxs("span",{children:["Dr. ",v.treating_doctor]})]})]})]})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>ne(v),className:"p-2 text-gray-600 hover:text-blue-600",title:"Anzeigen",children:l.jsx(Xi,{size:18})}),l.jsx("button",{onClick:()=>D(v),className:"p-2 text-gray-600 hover:text-blue-600",title:"Bearbeiten",children:l.jsx(zo,{size:18})})]})]})},v.id))})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Neues Dokument hochladen"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient *"}),l.jsxs("select",{value:H.player_id,onChange:v=>Y({...H,player_id:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[l.jsx("option",{value:"",children:"Patient auswählen..."}),T==null?void 0:T.map(v=>l.jsxs("option",{value:v.id,children:[v.first_name," ",v.last_name]},v.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Behandlung (optional)"}),l.jsxs("select",{value:H.treatment_id,onChange:v=>Y({...H,treatment_id:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Keine Verknüpfung"}),A==null?void 0:A.filter(v=>v.player_id===H.player_id).map(v=>l.jsxs("option",{value:v.id,children:[v.diagnosis," - ",new Date(v.treatment_date).toLocaleDateString("de-DE")]},v.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dokumenttyp *"}),l.jsxs("select",{value:H.document_type,onChange:v=>Y({...H,document_type:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"radiology",children:"Radiologie"}),l.jsx("option",{value:"lab_results",children:"Laborergebnisse"}),l.jsx("option",{value:"referral",children:"Ü̈berweisung"}),l.jsx("option",{value:"discharge_summary",children:"Entlassungsbericht"}),l.jsx("option",{value:"therapy_plan",children:"Therapieplan"}),l.jsx("option",{value:"other",children:"Sonstiges"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datei *"}),l.jsx("input",{type:"file",onChange:v=>{var P;return Ne(((P=v.target.files)==null?void 0:P[0])||null)},accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dokumentname (optional)"}),l.jsx("input",{type:"text",value:H.document_name,onChange:v=>Y({...H,document_name:v.target.value}),placeholder:"Wird automatisch aus Dateiname übernommen",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notizen"}),l.jsx("input",{type:"text",value:H.notes,onChange:v=>Y({...H,notes:v.target.value}),placeholder:"Zusätzliche Informationen",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),l.jsx("div",{className:"mt-4",children:l.jsxs("button",{onClick:z,disabled:C||!ae||!H.player_id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(qi,{size:18,className:"inline mr-2"}),C?"Hochladen...":"Dokument hochladen"]})})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsx("div",{className:"divide-y divide-gray-200",children:se.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Pt,{size:48,className:"mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Keine Dokumente gefunden"})]}):se.map(v=>l.jsx("div",{className:"p-4 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:l.jsx(Pt,{size:20,className:"text-green-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:v.document_name}),l.jsxs("p",{className:"text-gray-600",children:[ee(v.player_id)," - ",N(v.document_type)]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(vr,{size:14}),l.jsx("span",{children:new Date(v.upload_date).toLocaleDateString("de-DE")})]}),v.notes&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(bs,{size:14}),l.jsx("span",{children:v.notes})]})]})]})]})}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{onClick:()=>ie(v),className:"p-2 text-gray-600 hover:text-blue-600",title:"Herunterladen",children:l.jsx(lf,{size:18})})})]})},v.id))})})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a==="new"?"Neue Behandlung":a==="edit"?"Behandlung bearbeiten":"Behandlung anzeigen"}),l.jsx("p",{className:"text-gray-600",children:"Medizinische Dokumentation"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("button",{onClick:()=>{u("list"),le()},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(En,{size:18,className:"inline mr-2"}),"Abbrechen"]}),a!=="view"&&l.jsxs("button",{onClick:Re,disabled:y||!I.player_id,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Zi,{size:18,className:"inline mr-2"}),y?"Speichern...":"Speichern"]})]})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient *"}),l.jsxs("select",{value:I.player_id,onChange:v=>W({...I,player_id:v.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",required:!0,children:[l.jsx("option",{value:"",children:"Patient auswählen..."}),T==null?void 0:T.map(v=>l.jsxs("option",{value:v.id,children:[v.first_name," ",v.last_name,v.jersey_number?`(#${v.jersey_number})`:""]},v.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Behandlungsdatum *"}),l.jsx("input",{type:"date",value:I.treatment_date,onChange:v=>W({...I,treatment_date:v.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",required:!0})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Behandelnder Arzt"}),l.jsx("input",{type:"text",value:I.treating_doctor||"",onChange:v=>W({...I,treating_doctor:v.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Name des behandelnden Arztes"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Krankenhaus/Praxis"}),l.jsx("input",{type:"text",value:I.hospital_or_practice||"",onChange:v=>W({...I,hospital_or_practice:v.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Name der Einrichtung"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ICD-10 Code"}),l.jsx("input",{type:"text",value:I.icd10_code||"",onChange:v=>W({...I,icd10_code:v.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"z.B. M25.3"})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diagnose *"}),l.jsx("input",{type:"text",value:I.diagnosis||"",onChange:v=>W({...I,diagnosis:v.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Medizinische Diagnose",required:!0})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Behandlungsmaßnahmen"}),l.jsx("textarea",{value:I.treatment_measures||"",onChange:v=>W({...I,treatment_measures:v.target.value}),disabled:a==="view",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Durchgeführte Behandlungen, Medikation, Eingriffe"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Therapieempfehlungen"}),l.jsx("textarea",{value:I.therapy_recommendations||"",onChange:v=>W({...I,therapy_recommendations:v.target.value}),disabled:a==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Empfohlene Therapien, Nachbehandlung"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prognose"}),l.jsx("textarea",{value:I.prognosis||"",onChange:v=>W({...I,prognosis:v.target.value}),disabled:a==="view",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Heilungsaussichten, erwartete Dauer"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nachtermin"}),l.jsx("input",{type:"date",value:I.follow_up_date||"",onChange:v=>W({...I,follow_up_date:v.target.value}),disabled:a==="view",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Behandlungsnotizen"}),l.jsx("textarea",{value:I.treatment_notes||"",onChange:v=>W({...I,treatment_notes:v.target.value}),disabled:a==="view",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-50",placeholder:"Zusätzliche Notizen, Besonderheiten"})]})]})})]})}function zv(){const{profile:o}=wt(),[n,s]=L.useState("upload"),[a,u]=L.useState(null),[d,f]=L.useState(""),[p,g]=L.useState("all"),[x,w]=L.useState(!1),[y,b]=L.useState(!1),{data:C}=Qe("players"),[S,T]=L.useState([]),[A,K]=L.useState({player_id:"",document_type:"physio_assessment",notes:""}),[B,$]=L.useState(null),[I,W]=L.useState(!1);L.useEffect(()=>{H()},[]);const H=async()=>{try{const{data:N,error:v}=await fe.from("ocr_jobs").select("*").order("created_at",{ascending:!1});if(v)throw v;T(N||[])}catch(N){console.error("Error loading OCR jobs:",N)}},Y=async()=>{if(!B||!A.player_id){alert("Bitte wählen Sie eine Datei und einen Patienten aus.");return}try{w(!0);const N=B.name.split(".").pop(),v=`ocr/${A.player_id}/${Date.now()}.${N}`,{data:P,error:J}=await fe.storage.from("medical_documents").upload(v,B);if(J)throw J;const Q={player_id:A.player_id,document_type:A.document_type,file_path:P.path,original_filename:B.name,ocr_status:"pending",created_by:o==null?void 0:o.id},{data:ce,error:me}=await fe.from("ocr_jobs").insert([Q]).select().single();if(me)throw me;T(we=>[ce,...we]),await ae(ce),$(null),K({player_id:"",document_type:"physio_assessment",notes:""}),alert("Datei erfolgreich hochgeladen und OCR gestartet!"),s("jobs")}catch(N){console.error("Error uploading file:",N),alert("Fehler beim Hochladen: "+N.message)}finally{w(!1)}},ae=async N=>{try{b(!0),await fe.from("ocr_jobs").update({ocr_status:"processing"}).eq("id",N.id),T(Q=>Q.map(ce=>ce.id===N.id?{...ce,ocr_status:"processing"}:ce));const{data:v,error:P}=await fe.functions.invoke("ocr-processing",{body:{file_path:N.file_path,document_type:N.document_type,player_id:N.player_id}});if(P)throw P;const J={ocr_status:"completed",raw_text:v.data.raw_text,extracted_data:v.data.extracted_data,confidence_score:v.data.confidence_score,processing_time:v.data.processing_time};await fe.from("ocr_jobs").update(J).eq("id",N.id),T(Q=>Q.map(ce=>ce.id===N.id?{...ce,...J}:ce))}catch(v){console.error("Error processing OCR:",v),await fe.from("ocr_jobs").update({ocr_status:"failed"}).eq("id",N.id),T(P=>P.map(J=>J.id===N.id?{...J,ocr_status:"failed"}:J))}finally{b(!1)}},Ne=async N=>{await ae(N)},je=async N=>{if(confirm("Möchten Sie diesen Job wirklich löschen?"))try{const{error:v}=await fe.from("ocr_jobs").delete().eq("id",N.id);if(v)throw v;await fe.storage.from("medical_documents").remove([N.file_path]),T(P=>P.filter(J=>J.id!==N.id))}catch(v){console.error("Error deleting job:",v),alert("Fehler beim Löschen: "+v.message)}},Re=async N=>{try{const{data:v,error:P}=await fe.storage.from("medical_documents").download(N.file_path);if(P)throw P;const J=URL.createObjectURL(v),Q=document.createElement("a");Q.href=J,Q.download=N.original_filename,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(J)}catch(v){console.error("Error downloading file:",v),alert("Fehler beim Download: "+v.message)}},z=async N=>{var v;if(N.extracted_data)try{const P=N.extracted_data;if(N.document_type==="physio_assessment"){const J={player_id:N.player_id,date_of_assessment:P.date||new Date().toISOString().split("T")[0],diagnosis:P.diagnosis||"",pain_intensity:P.pain_level||0,therapy_goals:P.therapy_goals||"",mobility_assessment:P.mobility_assessment||"",therapist_id:o==null?void 0:o.id},{error:Q}=await fe.from("physio_assessments").insert([J]);if(Q)throw Q;alert("Physiotherapie-Assessment erfolgreich erstellt!")}else if(N.document_type==="medical_report"){const J={player_id:N.player_id,treatment_date:P.date||new Date().toISOString().split("T")[0],diagnosis:P.diagnosis||"",icd10_code:((v=P.icd10_codes)==null?void 0:v[0])||"",treatment_notes:`OCR-Import: ${N.original_filename}`,therapy_recommendations:P.recommendations||"",created_by:o==null?void 0:o.id},{error:Q}=await fe.from("medical_treatments").insert([J]);if(Q)throw Q;alert("Medizinische Behandlung erfolgreich erstellt!")}}catch(P){console.error("Error creating document:",P),alert("Fehler beim Erstellen: "+P.message)}},ie=N=>{N.preventDefault(),N.stopPropagation(),N.type==="dragenter"||N.type==="dragover"?W(!0):N.type==="dragleave"&&W(!1)},le=N=>{N.preventDefault(),N.stopPropagation(),W(!1),N.dataTransfer.files&&N.dataTransfer.files[0]&&$(N.dataTransfer.files[0])},D=N=>{const v=C==null?void 0:C.find(P=>P.id===N);return v?`${v.first_name} ${v.last_name}`:"Unbekannt"},ne=N=>{switch(N){case"pending":return l.jsx(ko,{size:16,className:"text-yellow-500"});case"processing":return l.jsx(bh,{size:16,className:"text-blue-500 animate-pulse"});case"completed":return l.jsx(af,{size:16,className:"text-green-500"});case"failed":return l.jsx(bs,{size:16,className:"text-red-500"});default:return l.jsx(ko,{size:16,className:"text-gray-500"})}},ee=N=>({pending:"Wartend",processing:"Verarbeitung",completed:"Abgeschlossen",failed:"Fehlgeschlagen"})[N]||N,V=N=>({physio_assessment:"Physiotherapie-Befund",medical_report:"Medizinischer Bericht",lab_results:"Laborergebnisse",radiology:"Radiologie-Befund",other:"Sonstiges"})[N]||N,se=S.filter(N=>{const v=!d||D(N.player_id).toLowerCase().includes(d.toLowerCase())||N.original_filename.toLowerCase().includes(d.toLowerCase()),P=p==="all"||N.ocr_status===p;return v&&P});if(n==="upload")return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Befund-Digitalisierung"}),l.jsx("p",{className:"text-gray-600",children:"OCR-gestützte Dokumentenerkennung und -verarbeitung"})]}),l.jsxs("button",{onClick:()=>s("jobs"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[l.jsx(Pt,{size:20}),l.jsx("span",{children:"OCR-Jobs anzeigen"})]})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Neues Dokument hochladen"}),l.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient *"}),l.jsxs("select",{value:A.player_id,onChange:N=>K({...A,player_id:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[l.jsx("option",{value:"",children:"Patient auswählen..."}),C==null?void 0:C.map(N=>l.jsxs("option",{value:N.id,children:[N.first_name," ",N.last_name,N.jersey_number?`(#${N.jersey_number})`:""]},N.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dokumenttyp *"}),l.jsxs("select",{value:A.document_type,onChange:N=>K({...A,document_type:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"physio_assessment",children:"Physiotherapie-Befund"}),l.jsx("option",{value:"medical_report",children:"Medizinischer Bericht"}),l.jsx("option",{value:"lab_results",children:"Laborergebnisse"}),l.jsx("option",{value:"radiology",children:"Radiologie-Befund"}),l.jsx("option",{value:"other",children:"Sonstiges"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notizen (optional)"}),l.jsx("textarea",{value:A.notes,onChange:N=>K({...A,notes:N.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Zusätzliche Informationen zum Dokument"})]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Datei auswählen"}),l.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center ${I?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDragEnter:ie,onDragLeave:ie,onDragOver:ie,onDrop:le,children:B?l.jsxs("div",{className:"space-y-2",children:[l.jsx(Pt,{size:48,className:"mx-auto text-green-500"}),l.jsx("p",{className:"text-sm font-medium text-gray-900",children:B.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[(B.size/1024/1024).toFixed(2)," MB"]}),l.jsx("button",{onClick:()=>$(null),className:"text-red-600 hover:text-red-700 text-sm",children:"Entfernen"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsx(qi,{size:48,className:"mx-auto text-gray-400"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Datei hier ablegen oder"}),l.jsxs("label",{className:"cursor-pointer",children:[l.jsx("span",{className:"text-blue-600 hover:text-blue-700 font-medium",children:"Datei auswählen"}),l.jsx("input",{type:"file",className:"hidden",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx",onChange:N=>{var v;return $(((v=N.target.files)==null?void 0:v[0])||null)}})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"PDF, JPG, PNG, DOC, DOCX (max. 10MB)"})]})}),l.jsxs("button",{onClick:Y,disabled:x||!B||!A.player_id,className:"w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[l.jsx(qi,{size:20}),l.jsx("span",{children:x?"Hochladen und Verarbeiten...":"Hochladen und OCR starten"})]})]})]})}),l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(bs,{size:20,className:"text-blue-600 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-blue-900",children:"OCR-Verarbeitung"}),l.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Die automatische Texterkennung (OCR) extrahiert strukturierte Daten aus Ihren Dokumenten. Je nach Dokumenttyp werden spezifische Informationen wie Patientendaten, Diagnosen, Schmerzwerte und Therapieziele erkannt."})]})]})})]});if(n==="view"&&a){const N=a.extracted_data;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"OCR-Ergebnis"}),l.jsx("p",{className:"text-gray-600",children:a.original_filename})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("button",{onClick:()=>s("jobs"),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx(En,{size:18,className:"inline mr-2"}),"Zurück"]}),a.ocr_status==="completed"&&l.jsxs("button",{onClick:()=>z(a),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[l.jsx(Zi,{size:18,className:"inline mr-2"}),"Dokument erstellen"]})]})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient"}),l.jsx("p",{className:"text-gray-900",children:D(a.player_id)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dokumenttyp"}),l.jsx("p",{className:"text-gray-900",children:V(a.document_type)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[ne(a.ocr_status),l.jsx("span",{className:"text-gray-900",children:ee(a.ocr_status)})]})]})]})}),a.ocr_status==="completed"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Extrahierte Daten"}),l.jsxs("div",{className:"space-y-4",children:[N.patient_name&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Patientenname"}),l.jsx("p",{className:"text-gray-900",children:N.patient_name})]}),N.date&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Datum"}),l.jsx("p",{className:"text-gray-900",children:N.date})]}),N.diagnosis&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Diagnose"}),l.jsx("p",{className:"text-gray-900",children:N.diagnosis})]}),N.pain_level&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Schmerzlevel"}),l.jsxs("p",{className:"text-gray-900",children:[N.pain_level,"/10"]})]}),N.therapy_goals&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Therapieziele"}),l.jsx("p",{className:"text-gray-900",children:N.therapy_goals})]}),N.icd10_codes&&N.icd10_codes.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ICD-10 Codes"}),l.jsx("p",{className:"text-gray-900",children:N.icd10_codes.join(", ")})]}),N.medications&&N.medications.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Medikamente"}),l.jsx("p",{className:"text-gray-900",children:N.medications.join(", ")})]})]}),a.confidence_score&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Vertrauenswert"}),l.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round((a.confidence_score||0)*100),"%"]})]}),l.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${(a.confidence_score||0)*100}%`}})})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Erkannter Text"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4 max-h-96 overflow-y-auto",children:l.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:a.raw_text||"Kein Text erkannt"})})]})]})]})}return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"OCR-Jobs"}),l.jsx("p",{className:"text-gray-600",children:"Verarbeitungsstatus und Ergebnisse"})]}),l.jsxs("button",{onClick:()=>s("upload"),className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[l.jsx(qi,{size:20}),l.jsx("span",{children:"Neues Dokument"})]})]}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(ea,{size:20,className:"absolute left-3 top-2.5 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Patient oder Dateiname suchen...",value:d,onChange:N=>f(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("select",{value:p,onChange:N=>g(N.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"all",children:"Alle Status"}),l.jsx("option",{value:"pending",children:"Wartend"}),l.jsx("option",{value:"processing",children:"Verarbeitung"}),l.jsx("option",{value:"completed",children:"Abgeschlossen"}),l.jsx("option",{value:"failed",children:"Fehlgeschlagen"})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:l.jsx("div",{className:"divide-y divide-gray-200",children:se.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Pt,{size:48,className:"mx-auto mb-4 text-gray-300"}),l.jsx("p",{children:"Keine OCR-Jobs gefunden"}),l.jsx("p",{className:"text-sm",children:"Laden Sie ein neues Dokument zur OCR-Verarbeitung hoch."})]}):se.map(N=>l.jsx("div",{className:"p-4 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:l.jsx(Pt,{size:20,className:"text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:N.original_filename}),l.jsxs("p",{className:"text-gray-600",children:[D(N.player_id)," - ",V(N.document_type)]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mt-1",children:[l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(vr,{size:14}),l.jsx("span",{children:N.created_at&&new Date(N.created_at).toLocaleDateString("de-DE")})]}),l.jsxs("span",{className:"flex items-center space-x-1",children:[ne(N.ocr_status),l.jsx("span",{children:ee(N.ocr_status)})]}),N.confidence_score&&l.jsxs("span",{className:"flex items-center space-x-1",children:[l.jsx(So,{size:14}),l.jsxs("span",{children:[Math.round((N.confidence_score||0)*100),"% Vertrauen"]})]})]})]})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[N.ocr_status==="completed"&&l.jsx("button",{onClick:()=>{u(N),s("view")},className:"p-2 text-gray-600 hover:text-blue-600",title:"Ergebnis anzeigen",children:l.jsx(Xi,{size:18})}),l.jsx("button",{onClick:()=>Re(N),className:"p-2 text-gray-600 hover:text-blue-600",title:"Datei herunterladen",children:l.jsx(lf,{size:18})}),N.ocr_status==="failed"&&l.jsx("button",{onClick:()=>Ne(N),className:"p-2 text-gray-600 hover:text-green-600",title:"OCR wiederholen",disabled:y,children:l.jsx(bh,{size:18})}),l.jsx("button",{onClick:()=>je(N),className:"p-2 text-gray-600 hover:text-red-600",title:"Löschen",children:l.jsx(Nv,{size:18})})]})]})},N.id))})})]})}function ps({children:o}){const{user:n,loading:s}=wt();return s?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?l.jsx(Pv,{children:o}):l.jsx(Hi,{to:"/login",replace:!0})}function Wi({children:o,allowedRoles:n}){const{profile:s}=wt();return!s||!n.includes(s.role)?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[l.jsx("strong",{className:"font-bold",children:"Zugriff verweigert!"}),l.jsx("span",{className:"block sm:inline",children:" Sie haben nicht die erforderlichen Berechtigungen für diese Seite."})]}),l.jsx("button",{onClick:()=>window.history.back(),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Zurück"})]})}):l.jsx(l.Fragment,{children:o})}function $v({children:o}){const{user:n,loading:s}=wt();return s?l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?l.jsx(Hi,{to:"/dashboard",replace:!0}):l.jsx(l.Fragment,{children:o})}function Uv(){return l.jsx(dg,{children:l.jsxs(og,{children:[l.jsx(qt,{path:"/login",element:l.jsx($v,{children:l.jsx(Rv,{})})}),l.jsx(qt,{path:"/dashboard",element:l.jsx(ps,{children:l.jsx(Dv,{})})}),l.jsx(qt,{path:"/athletiktrainer",element:l.jsx(ps,{children:l.jsx(Wi,{allowedRoles:["admin","trainer"],children:l.jsx(Av,{})})})}),l.jsx(qt,{path:"/physiotherapie",element:l.jsx(ps,{children:l.jsx(Wi,{allowedRoles:["admin","physiotherapist"],children:l.jsx(Lv,{})})})}),l.jsx(qt,{path:"/aerzte",element:l.jsx(ps,{children:l.jsx(Wi,{allowedRoles:["admin","physician"],children:l.jsx(Iv,{})})})}),l.jsx(qt,{path:"/befund-digitalisierung",element:l.jsx(ps,{children:l.jsx(Wi,{allowedRoles:["admin","trainer","physiotherapist","physician"],children:l.jsx(zv,{})})})}),l.jsx(qt,{path:"/",element:l.jsx(Hi,{to:"/dashboard",replace:!0})}),l.jsx(qt,{path:"*",element:l.jsx(Hi,{to:"/dashboard",replace:!0})})]})})}function Mv(){return l.jsx(vv,{children:l.jsx(Uv,{})})}mm.createRoot(document.getElementById("root")).render(l.jsx(L.StrictMode,{children:l.jsx(vm,{children:l.jsx(Mv,{})})}));
